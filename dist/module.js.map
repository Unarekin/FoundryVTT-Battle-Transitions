{
  "version": 3,
  "sources": ["../node_modules/semver/internal/constants.js", "../node_modules/semver/internal/debug.js", "../node_modules/semver/internal/re.js", "../node_modules/semver/internal/parse-options.js", "../node_modules/semver/internal/identifiers.js", "../node_modules/semver/classes/semver.js", "../node_modules/semver/functions/parse.js", "../node_modules/semver/functions/valid.js", "../node_modules/semver/functions/clean.js", "../node_modules/semver/functions/inc.js", "../node_modules/semver/functions/diff.js", "../node_modules/semver/functions/major.js", "../node_modules/semver/functions/minor.js", "../node_modules/semver/functions/patch.js", "../node_modules/semver/functions/prerelease.js", "../node_modules/semver/functions/compare.js", "../node_modules/semver/functions/rcompare.js", "../node_modules/semver/functions/compare-loose.js", "../node_modules/semver/functions/compare-build.js", "../node_modules/semver/functions/sort.js", "../node_modules/semver/functions/rsort.js", "../node_modules/semver/functions/gt.js", "../node_modules/semver/functions/lt.js", "../node_modules/semver/functions/eq.js", "../node_modules/semver/functions/neq.js", "../node_modules/semver/functions/gte.js", "../node_modules/semver/functions/lte.js", "../node_modules/semver/functions/cmp.js", "../node_modules/semver/functions/coerce.js", "../node_modules/semver/internal/lrucache.js", "../node_modules/semver/classes/range.js", "../node_modules/semver/classes/comparator.js", "../node_modules/semver/functions/satisfies.js", "../node_modules/semver/ranges/to-comparators.js", "../node_modules/semver/ranges/max-satisfying.js", "../node_modules/semver/ranges/min-satisfying.js", "../node_modules/semver/ranges/min-version.js", "../node_modules/semver/ranges/valid.js", "../node_modules/semver/ranges/outside.js", "../node_modules/semver/ranges/gtr.js", "../node_modules/semver/ranges/ltr.js", "../node_modules/semver/ranges/intersects.js", "../node_modules/semver/ranges/simplify.js", "../node_modules/semver/ranges/subset.js", "../node_modules/semver/index.js", "../src/constants.ts", "../src/ScreenSpaceCanvasGroup.ts", "../src/errors/LocalizedError.ts", "../src/errors/CannotInitializeCanvasError.ts", "../src/errors/CanvasNotFoundError.ts", "../src/errors/FileNotFoundError.ts", "../src/errors/InvalidDirectionError.ts", "../src/errors/InvalidImportError.ts", "../src/errors/InvalidMacroError.ts", "../src/errors/InvalidObjectError.ts", "../src/errors/InvalidRollTableError.ts", "../src/errors/InvalidSceneError.ts", "../src/errors/InvalidSoundError.ts", "../src/errors/InvalidTargetError.ts", "../src/errors/InvalidTextureError.ts", "../src/errors/InvalidTipLocationError.ts", "../src/errors/InvalidTransitionError.ts", "../src/errors/InvalidVersionError.ts", "../src/errors/NewerVersionError.ts", "../src/errors/NoCoverElementError.ts", "../src/errors/NoFileError.ts", "../src/errors/NoPreviousStepError.ts", "../src/errors/NotImplementedError.ts", "../src/errors/NotInitializedError.ts", "../src/errors/ParallelExecuteError.ts", "../src/errors/PermissionDeniedError.ts", "../src/errors/RepeatExecuteError.ts", "../src/errors/SequenceTimedOutError.ts", "../src/errors/StepNotReversibleError.ts", "../src/errors/TransitionToSelfError.ts", "../src/errors/UnableToMigrateError.ts", "../src/coercion.ts", "../src/lib/simplex-noise.ts", "../src/lib/base64Utils.ts", "../src/steps/index.ts", "../src/steps/TransitionStep.ts", "../src/filters/default.frag", "../src/filters/default.vert", "../src/filters/CustomFilter.ts", "../src/filters/FireDissolve/firedissolve.frag", "../src/filters/FireDissolve/FireDissolveFilter.ts", "../src/filters/DiamondTransition/diamondtransition.frag", "../src/filters/DiamondTransition/DiamondTransitionFilter.ts", "../src/filters/TextureWipe/texturewipe.frag", "../src/filters/TextureWipe/TextureWipeFilter.ts", "../src/filters/FadeTransition/fadetransition.frag", "../src/filters/FadeTransition/FadeTransitionFilter.ts", "../src/filters/BilinearWipe/BilinearWipeFilter.ts", "../src/filters/LinearWipe/LinearWipeFilter.ts", "../src/filters/ClockWipe/ClockWipeFilter.ts", "../src/filters/SpotlightWipe/SpotlightWipeFilter.ts", "../src/filters/RadialWipe/RadialWipeFilter.ts", "../src/filters/ChromaKey/chromakey.frag", "../src/filters/ChromaKey/ChromaKeyFilter.ts", "../src/filters/TextureSwap/textureswap.frag", "../src/filters/TextureSwap/TextureSwapFilter.ts", "../src/filters/Melt/melt.frag", "../src/filters/Melt/MeltFilter.ts", "../src/filters/AngularWipe/AngularWipeFilter.ts", "../src/filters/WaveWipe/WaveWipeFilter.ts", "../src/filters/Invert/invert.frag", "../src/filters/Invert/InvertFilter.ts", "../src/filters/SpiralShutter/SpiralShutterFilter.ts", "../src/filters/SpiralWipe/SpiralWipeFilter.ts", "../src/filters/HueShift/hueshift.frag", "../src/filters/HueShift/HueShiftFilter.ts", "../src/filters/BarWipe/BarWipeFilter.ts", "../src/filters/Zoom/zoom.frag", "../src/filters/Zoom/ZoomFilter.ts", "../src/filters/index.ts", "../src/steps/selectOptions.ts", "../src/steps/AngularWipeStep.ts", "../src/steps/BarWipeStep.ts", "../src/steps/BillinearWipeStep.ts", "../src/steps/BossSplashStep.ts", "../src/steps/ClearEffectsStep.ts", "../src/steps/ClockWipeStep.ts", "../src/steps/DiamondWipeStep.ts", "../src/steps/FadeStep.ts", "../src/steps/FireDissolveStep.ts", "../src/steps/FlashStep.ts", "../src/steps/HueShiftStep.ts", "../src/steps/InvertStep.ts", "../src/steps/LinearWipeStep.ts", "../src/steps/LoadingTipStep.ts", "../src/steps/MacroStep.ts", "../src/steps/MeltStep.ts", "../src/SocketHandler.ts", "../src/dialogs/addStepFunctions.ts", "../src/dialogs/AddStepDialogV1.ts", "../src/dialogs/AddStepDialogV2.ts", "../src/dialogs/EditStepDialogV1.ts", "../src/dialogs/EditStepDialogV2.ts", "../src/dialogs/TransitionBuilderV1.ts", "../src/dialogs/TransitionBuilderV2.ts", "../src/dialogs/functions.ts", "../src/migration/Migrator.ts", "../src/migration/SceneConfiguration.ts", "../src/migration/steps/AngularWipe.ts", "../src/migration/steps/BilinearWipe.ts", "../src/migration/steps/ClockWipe.ts", "../src/migration/steps/DiamondWipe.ts", "../src/migration/steps/Fade.ts", "../src/migration/steps/FireDissolve.ts", "../src/migration/steps/Flash.ts", "../src/migration/steps/Invert.ts", "../src/migration/steps/LinearWipe.ts", "../src/migration/steps/Macro.ts", "../src/migration/steps/Melt.ts", "../src/migration/steps/Parallel.ts", "../src/migration/steps/RadialWipe.ts", "../src/migration/steps/RemoveOverlay.ts", "../src/migration/steps/RestoreOverlay.ts", "../src/migration/steps/SceneChange.ts", "../src/migration/steps/Sound.ts", "../src/migration/steps/SpiralRadialWipe.ts", "../src/migration/steps/SpotlightWipe.ts", "../src/migration/steps/TextureSwap.ts", "../src/migration/steps/Video.ts", "../src/migration/steps/Wait.ts", "../src/migration/steps/WaveWipe.ts", "../src/migration/TransitionSteps.ts", "../src/DataMigration.ts", "../src/ConfigurationHandler.ts", "../src/dialogs/SceneConfigV11.ts", "../src/dialogs/SceneConfigV12.ts", "../src/BattleTransition.ts", "../src/steps/ParallelStep.ts", "../src/steps/PixelateStep.ts", "../src/steps/targetSelectFunctions.ts", "../src/steps/RadialWipeStep.ts", "../src/steps/RemoveOverlayStep.ts", "../src/steps/WaitStep.ts", "../src/steps/RepeatStep.ts", "../src/steps/RestoreOverlayStep.ts", "../src/steps/functions.ts", "../src/steps/ReverseStep.ts", "../src/steps/SceneChangeStep.ts", "../src/steps/SoundStep.ts", "../src/steps/SpiralShutterStep.ts", "../src/steps/SpiralWipeStep.ts", "../src/steps/SpotlightWipeStep.ts", "../src/steps/StartPlaylistStep.ts", "../src/steps/TextureSwapStep.ts", "../src/steps/TwistStep.ts", "../src/steps/VideoStep.ts", "../src/steps/WaveWipeStep.ts", "../src/steps/ZoomBlurStep.ts", "../src/steps/ZoomStep.ts", "../src/utils.ts", "../src/transitionUtils.ts", "../src/lib/groupBy.js", "../src/templates.ts", "../src/module.ts", "../src/vendor/libwrapper.shim.js"],
  "sourcesContent": ["// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n", "const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n", "const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n", "// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n", "const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n", "const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n", "const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n", "const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n", "const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n", "const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n", "const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n", "const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n", "const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n", "const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n", "const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n", "const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n", "const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n", "const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n", "const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n", "const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n", "const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n", "const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n", "const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n", "const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n", "const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n", "const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n", "const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n", "const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n", "const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n", "class LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n", "const SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n", "const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n", "const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n", "const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n", "const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n", "const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n", "const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n", "const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n", "const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n", "// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n", "const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n", "const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n", "// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n", "const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n", "// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n", "import { PreparedTransitionHash } from \"./interfaces\";\n\nexport const COVER_ID = \"transition-cover\";\nexport const TRANSLATION_KEY = \"BATTLETRANSITIONS\";\nexport const LOG_ICON = \"\u2694\uFE0F\";\n\nexport const CUSTOM_HOOKS = {\n  INITIALIZE: `${__MODULE_ID__}.init`,\n  TRANSITION_START: `${__MODULE_ID__}.transitionStart`,\n  TRANSITION_END: `${__MODULE_ID__}.transitionEnd`,\n  SCENE_ACTIVATED: `${__MODULE_ID__}.sceneActivated`\n}\n\n\nexport const PreparedSequences: { [x: string]: PreparedTransitionHash } = {};\n", "export class ScreenSpaceCanvasGroup extends PIXI.Container {\n  protected setInverseMatrix() {\n    if (canvas?.app?.stage)\n      this.transform.setFromMatrix(canvas.app.stage.localTransform.clone().invert());\n  }\n\n  constructor() {\n    super();\n    this.interactiveChildren = false;\n    this.interactive = false;\n    this.eventMode = \"none\";\n\n    if (canvas?.app) {\n      canvas.app.renderer.addListener(\"prerender\", () => {\n        this.setInverseMatrix();\n      })\n    }\n  }\n}", "import { TRANSLATION_KEY } from \"../constants\";\n\nexport class LocalizedError extends Error {\n  constructor(message?: string, subs?: { [x: string]: unknown }) {\n    if (message) super(game.i18n?.format(`${TRANSLATION_KEY}.ERRORS.${message}`, subs))\n    else super();\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class CannotInitializeCanvasError extends LocalizedError {\n  constructor() {\n    super(\"CANNOTINITIALIZECANVAS\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class CanvasNotFoundError extends LocalizedError {\n  constructor() {\n    super(\"CANVASNOTFOUND\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class FileNotFoundError extends LocalizedError {\n  constructor(file: string) {\n    super(\"FILENOTFOUND\", { file });\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidDirectionError extends LocalizedError {\n  constructor(direction: string) {\n    super(\"INVALIDDIRECTION\", { direction });\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidImportError extends LocalizedError {\n  constructor() {\n    super(\"INVALIDIMPORT\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidMacroError extends LocalizedError {\n  constructor(macro: string) {\n    super(\"INVALIDMACRO\", { macro });\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidObjectError extends LocalizedError {\n  constructor(arg: unknown) {\n    super(\"INVALIDOBJECT\", { object: typeof arg });\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidRollTableError extends LocalizedError {\n  constructor(table: unknown) {\n    super(\"INVALIDROLLTABLE\", { table: typeof table === \"string\" ? table : typeof table });\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidSceneError extends LocalizedError {\n  constructor(name: string) {\n    super(\"INVALIDSCENE\", { name });\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class InvalidSoundError extends LocalizedError {\n  constructor(sound: string) {\n    super(\"INVALIDSOUND\", { sound });\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidTargetError extends LocalizedError {\n  constructor(arg?: unknown) {\n    super(\"INVALIDTARGET\", { item: typeof arg === \"string\" ? arg : typeof arg });\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidTextureError extends LocalizedError {\n  constructor() {\n    super(\"INVALIDTEXTURE\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class InvalidTipLocationError extends LocalizedError {\n  constructor(location: unknown) {\n    super(\"INVALIDTIPLOCATION\", { location: typeof location === \"string\" ? location : typeof location });\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class InvalidTransitionError extends LocalizedError {\n  constructor(name: string) {\n    super(\"INVALIDTRANSITION\", { name });\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class InvalidVersionError extends LocalizedError {\n  constructor(version: string) {\n    super(\"INVALIDVERSION\", { version })\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class NewerVersionError extends LocalizedError {\n  constructor(version: string) {\n    super(\"NEWERVERSION\", { version })\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class NoCoverElementError extends LocalizedError {\n  constructor() {\n    super(\"NOCOVERELEMENT\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class NoFileError extends LocalizedError {\n  constructor() {\n    super(\"NOFILE\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class NoPreviousStepError extends LocalizedError {\n  constructor() {\n    super(\"NOPREVIOUSSTEP\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class NotImplementedError extends LocalizedError {\n  constructor() {\n    super(\"NOTIMPLEMENTED\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class NotInitializedError extends LocalizedError {\n  constructor() {\n    super(\"NOTINITIALIZED\");\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class ParallelExecuteError extends LocalizedError {\n  constructor() {\n    super(\"EXECUTECALLEDPARALLEL\")\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class PermissionDeniedError extends LocalizedError {\n  constructor() {\n    super(\"PERMISSIONDENIED\");\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class RepeatExecuteError extends LocalizedError {\n  constructor() {\n    super(\"EXECUTECALLEDREPEAT\")\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class SequenceTimedOutError extends LocalizedError {\n  constructor() {\n    super(\"SEQUENCETIMEDOUT\");\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class StepNotReversibleError extends LocalizedError {\n  constructor(key: string) {\n    super(\"STEPNOTREVERSIBLE\", { type: key });\n  }\n}", "import { LocalizedError } from './LocalizedError';\nexport class TransitionToSelfError extends LocalizedError {\n  constructor() {\n    super(\"TRANSITIONTOSELF\")\n  }\n}", "import { LocalizedError } from \"./LocalizedError\";\n\nexport class UnableToMigrateError extends LocalizedError {\n  constructor(old: string, current: string) {\n    super(\"UNABLETOMIGRATE\", { old, current });\n  }\n}", "import { createColorTexture } from \"./utils\";\n\nexport function coerceColor(source: unknown): PIXI.Color | undefined {\n  try {\n    return new PIXI.Color(source as PIXI.ColorSource);\n  } catch { /* empty */ }\n}\n\nexport function coerceTexture(source: unknown): PIXI.Texture | undefined {\n  const color = coerceColor(source);\n  if (color) return createColorTexture(color);\n\n\n  // Attempt to get a texture directly\n  try {\n    return PIXI.Texture.from(source as PIXI.TextureSource);\n  } catch { /* empty */ }\n}\n\nexport function coerceScene(arg: unknown): Scene | undefined {\n  if (!((game instanceof Game) && game.scenes)) return;\n\n  if (typeof arg === \"string\") {\n    let scene = game.scenes.get(arg);\n    if (scene) return scene;\n    scene = game.scenes.getName(arg);\n    if (scene) return scene;\n  } else if (arg instanceof Scene) {\n    return arg;\n  }\n}\n\nexport function coerceMacro(id: string): Macro | undefined\nexport function coerceMacro(name: string): Macro | undefined\nexport function coerceMacro(uuid: string): Macro | undefined\nexport function coerceMacro(macro: Macro): Macro\nexport function coerceMacro(arg: unknown): Macro | undefined {\n  if (arg instanceof Macro) return arg;\n  if (!(game as Game).macros) return;\n\n  if (typeof arg === \"string\") {\n    let macro = (game as Game).macros?.get(arg);\n    if (macro) return macro;\n    macro = (game as Game).macros?.getName(arg);\n    if (macro) return macro;\n    if (arg.split(\".\")[0] === \"Macro\") return (game as Game).macros?.get(arg.split(\".\").slice(1).join(\".\"));\n  }\n}", "/*\n * A fast javascript implementation of simplex noise by Jonas Wagner\n\nBased on a speed-improved simplex noise algorithm for 2D, 3D and 4D in Java.\nWhich is based on example code by Stefan Gustavson (stegu@itn.liu.se).\nWith Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\nBetter rank ordering method by Stefan Gustavson in 2012.\n\n Copyright (c) 2024 Jonas Wagner\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n */\n\n\n// these __PURE__ comments help uglifyjs with dead code removal\n//\nconst SQRT3 = /*#__PURE__*/ Math.sqrt(3.0);\nconst SQRT5 = /*#__PURE__*/ Math.sqrt(5.0);\nconst F2 = 0.5 * (SQRT3 - 1.0);\nconst G2 = (3.0 - SQRT3) / 6.0;\nconst F3 = 1.0 / 3.0;\nconst G3 = 1.0 / 6.0;\nconst F4 = (SQRT5 - 1.0) / 4.0;\nconst G4 = (5.0 - SQRT5) / 20.0;\n\n// I'm really not sure why this | 0 (basically a coercion to int)\n// is making this faster but I get ~5 million ops/sec more on the\n// benchmarks across the board or a ~10% speedup.\nconst fastFloor = (x: number) => Math.floor(x) | 0;\n\nconst grad2 = /*#__PURE__*/ new Float64Array([1, 1,\n  -1, 1,\n  1, -1,\n\n  -1, -1,\n  1, 0,\n  -1, 0,\n\n  1, 0,\n  -1, 0,\n  0, 1,\n\n  0, -1,\n  0, 1,\n  0, -1]);\n\n// double seems to be faster than single or int's\n// probably because most operations are in double precision\nconst grad3 = /*#__PURE__*/ new Float64Array([1, 1, 0,\n  -1, 1, 0,\n  1, -1, 0,\n\n  -1, -1, 0,\n  1, 0, 1,\n  -1, 0, 1,\n\n  1, 0, -1,\n  -1, 0, -1,\n  0, 1, 1,\n\n  0, -1, 1,\n  0, 1, -1,\n  0, -1, -1]);\n\n// double is a bit quicker here as well\nconst grad4 = /*#__PURE__*/ new Float64Array([0, 1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1,\n  0, -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1,\n  1, 0, 1, 1, 1, 0, 1, -1, 1, 0, -1, 1, 1, 0, -1, -1,\n  -1, 0, 1, 1, -1, 0, 1, -1, -1, 0, -1, 1, -1, 0, -1, -1,\n  1, 1, 0, 1, 1, 1, 0, -1, 1, -1, 0, 1, 1, -1, 0, -1,\n  -1, 1, 0, 1, -1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, -1,\n  1, 1, 1, 0, 1, 1, -1, 0, 1, -1, 1, 0, 1, -1, -1, 0,\n  -1, 1, 1, 0, -1, 1, -1, 0, -1, -1, 1, 0, -1, -1, -1, 0]);\n\n/**\n * A random() function, must return a number in the interval [0,1), just like Math.random().\n */\nexport type RandomFn = () => number;\n\n/**\n * Samples the noise field in two dimensions\n * \n * Coordinates should be finite, bigger than -2^31 and smaller than 2^31.\n * @param x\n * @param y\n * @returns a number in the interval [-1, 1]\n */\nexport type NoiseFunction2D = (x: number, y: number) => number;\n\n/**\n * Creates a 2D noise function\n * @param random the random function that will be used to build the permutation table\n * @returns {NoiseFunction2D}\n */\nexport function createNoise2D(random: RandomFn = Math.random): NoiseFunction2D {\n  const perm = buildPermutationTable(random);\n  // precalculating this yields a little ~3% performance improvement.\n  const permGrad2x = new Float64Array(perm).map(v => grad2[(v % 12) * 2]);\n  const permGrad2y = new Float64Array(perm).map(v => grad2[(v % 12) * 2 + 1]);\n  return function noise2D(x: number, y: number): number {\n    // if(!isFinite(x) || !isFinite(y)) return 0;\n    let n0 = 0; // Noise contributions from the three corners\n    let n1 = 0;\n    let n2 = 0;\n    // Skew the input space to determine which simplex cell we're in\n    const s = (x + y) * F2; // Hairy factor for 2D\n    const i = fastFloor(x + s);\n    const j = fastFloor(y + s);\n    const t = (i + j) * G2;\n    const X0 = i - t; // Unskew the cell origin back to (x,y) space\n    const Y0 = j - t;\n    const x0 = x - X0; // The x,y distances from the cell origin\n    const y0 = y - Y0;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if (x0 > y0) {\n      i1 = 1;\n      j1 = 0;\n    } // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    else {\n      i1 = 0;\n      j1 = 1;\n    } // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    const x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    const y1 = y0 - j1 + G2;\n    const x2 = x0 - 1.0 + 2.0 * G2; // Offsets for last corner in (x,y) unskewed coords\n    const y2 = y0 - 1.0 + 2.0 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    const ii = i & 255;\n    const jj = j & 255;\n    // Calculate the contribution from the three corners\n    let t0 = 0.5 - x0 * x0 - y0 * y0;\n    if (t0 >= 0) {\n      const gi0 = ii + perm[jj];\n      const g0x = permGrad2x[gi0];\n      const g0y = permGrad2y[gi0];\n      t0 *= t0;\n      // n0 = t0 * t0 * (grad2[gi0] * x0 + grad2[gi0 + 1] * y0); // (x,y) of grad3 used for 2D gradient\n      n0 = t0 * t0 * (g0x * x0 + g0y * y0);\n    }\n    let t1 = 0.5 - x1 * x1 - y1 * y1;\n    if (t1 >= 0) {\n      const gi1 = ii + i1 + perm[jj + j1];\n      const g1x = permGrad2x[gi1];\n      const g1y = permGrad2y[gi1];\n      t1 *= t1;\n      // n1 = t1 * t1 * (grad2[gi1] * x1 + grad2[gi1 + 1] * y1);\n      n1 = t1 * t1 * (g1x * x1 + g1y * y1);\n    }\n    let t2 = 0.5 - x2 * x2 - y2 * y2;\n    if (t2 >= 0) {\n      const gi2 = ii + 1 + perm[jj + 1];\n      const g2x = permGrad2x[gi2];\n      const g2y = permGrad2y[gi2];\n      t2 *= t2;\n      // n2 = t2 * t2 * (grad2[gi2] * x2 + grad2[gi2 + 1] * y2);\n      n2 = t2 * t2 * (g2x * x2 + g2y * y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70.0 * (n0 + n1 + n2);\n  };\n}\n\n/**\n * Samples the noise field in three dimensions\n * \n * Coordinates should be finite, bigger than -2^31 and smaller than 2^31.\n * @param x\n * @param y\n * @param z\n * @returns a number in the interval [-1, 1]\n */\nexport type NoiseFunction3D = (x: number, y: number, z: number) => number;\n\n/**\n * Creates a 3D noise function\n * @param random the random function that will be used to build the permutation table\n * @returns {NoiseFunction3D}\n */\nexport function createNoise3D(random: RandomFn = Math.random): NoiseFunction3D {\n  const perm = buildPermutationTable(random);\n  // precalculating these seems to yield a speedup of over 15%\n  const permGrad3x = new Float64Array(perm).map(v => grad3[(v % 12) * 3]);\n  const permGrad3y = new Float64Array(perm).map(v => grad3[(v % 12) * 3 + 1]);\n  const permGrad3z = new Float64Array(perm).map(v => grad3[(v % 12) * 3 + 2]);\n  return function noise3D(x: number, y: number, z: number): number {\n    let n0, n1, n2, n3; // Noise contributions from the four corners\n    // Skew the input space to determine which simplex cell we're in\n    const s = (x + y + z) * F3; // Very nice and simple skew factor for 3D\n    const i = fastFloor(x + s);\n    const j = fastFloor(y + s);\n    const k = fastFloor(z + s);\n    const t = (i + j + k) * G3;\n    const X0 = i - t; // Unskew the cell origin back to (x,y,z) space\n    const Y0 = j - t;\n    const Z0 = k - t;\n    const x0 = x - X0; // The x,y,z distances from the cell origin\n    const y0 = y - Y0;\n    const z0 = z - Z0;\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    let i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    let i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if (x0 >= y0) {\n      if (y0 >= z0) {\n        i1 = 1;\n        j1 = 0;\n        k1 = 0;\n        i2 = 1;\n        j2 = 1;\n        k2 = 0;\n      } // X Y Z order\n      else if (x0 >= z0) {\n        i1 = 1;\n        j1 = 0;\n        k1 = 0;\n        i2 = 1;\n        j2 = 0;\n        k2 = 1;\n      } // X Z Y order\n      else {\n        i1 = 0;\n        j1 = 0;\n        k1 = 1;\n        i2 = 1;\n        j2 = 0;\n        k2 = 1;\n      } // Z X Y order\n    }\n    else { // x0<y0\n      if (y0 < z0) {\n        i1 = 0;\n        j1 = 0;\n        k1 = 1;\n        i2 = 0;\n        j2 = 1;\n        k2 = 1;\n      } // Z Y X order\n      else if (x0 < z0) {\n        i1 = 0;\n        j1 = 1;\n        k1 = 0;\n        i2 = 0;\n        j2 = 1;\n        k2 = 1;\n      } // Y Z X order\n      else {\n        i1 = 0;\n        j1 = 1;\n        k1 = 0;\n        i2 = 1;\n        j2 = 1;\n        k2 = 0;\n      } // Y X Z order\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    const x1 = x0 - i1 + G3; // Offsets for second corner in (x,y,z) coords\n    const y1 = y0 - j1 + G3;\n    const z1 = z0 - k1 + G3;\n    const x2 = x0 - i2 + 2.0 * G3; // Offsets for third corner in (x,y,z) coords\n    const y2 = y0 - j2 + 2.0 * G3;\n    const z2 = z0 - k2 + 2.0 * G3;\n    const x3 = x0 - 1.0 + 3.0 * G3; // Offsets for last corner in (x,y,z) coords\n    const y3 = y0 - 1.0 + 3.0 * G3;\n    const z3 = z0 - 1.0 + 3.0 * G3;\n    // Work out the hashed gradient indices of the four simplex corners\n    const ii = i & 255;\n    const jj = j & 255;\n    const kk = k & 255;\n    // Calculate the contribution from the four corners\n    let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\n    if (t0 < 0) n0 = 0.0;\n    else {\n      const gi0 = ii + perm[jj + perm[kk]];\n      t0 *= t0;\n      n0 = t0 * t0 * (permGrad3x[gi0] * x0 + permGrad3y[gi0] * y0 + permGrad3z[gi0] * z0);\n    }\n    let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\n    if (t1 < 0) n1 = 0.0;\n    else {\n      const gi1 = ii + i1 + perm[jj + j1 + perm[kk + k1]];\n      t1 *= t1;\n      n1 = t1 * t1 * (permGrad3x[gi1] * x1 + permGrad3y[gi1] * y1 + permGrad3z[gi1] * z1);\n    }\n    let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\n    if (t2 < 0) n2 = 0.0;\n    else {\n      const gi2 = ii + i2 + perm[jj + j2 + perm[kk + k2]];\n      t2 *= t2;\n      n2 = t2 * t2 * (permGrad3x[gi2] * x2 + permGrad3y[gi2] * y2 + permGrad3z[gi2] * z2);\n    }\n    let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\n    if (t3 < 0) n3 = 0.0;\n    else {\n      const gi3 = ii + 1 + perm[jj + 1 + perm[kk + 1]];\n      t3 *= t3;\n      n3 = t3 * t3 * (permGrad3x[gi3] * x3 + permGrad3y[gi3] * y3 + permGrad3z[gi3] * z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to stay just inside [-1,1]\n    return 32.0 * (n0 + n1 + n2 + n3);\n  };\n}\n\n/**\n * Samples the noise field in four dimensions\n * \n * Coordinates should be finite, bigger than -2^31 and smaller than 2^31.\n * @param x\n * @param y\n * @param z\n * @param w\n * @returns a number in the interval [-1, 1]\n */\nexport type NoiseFunction4D = (x: number, y: number, z: number, w: number) => number;\n\n/**\n * Creates a 4D noise function\n * @param random the random function that will be used to build the permutation table\n * @returns {NoiseFunction4D}\n */\nexport function createNoise4D(random: RandomFn = Math.random): NoiseFunction4D {\n  const perm = buildPermutationTable(random);\n  // precalculating these leads to a ~10% speedup\n  const permGrad4x = new Float64Array(perm).map(v => grad4[(v % 32) * 4]);\n  const permGrad4y = new Float64Array(perm).map(v => grad4[(v % 32) * 4 + 1]);\n  const permGrad4z = new Float64Array(perm).map(v => grad4[(v % 32) * 4 + 2]);\n  const permGrad4w = new Float64Array(perm).map(v => grad4[(v % 32) * 4 + 3]);\n  return function noise4D(x: number, y: number, z: number, w: number): number {\n    let n0, n1, n2, n3, n4; // Noise contributions from the five corners\n    // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in\n    const s = (x + y + z + w) * F4; // Factor for 4D skewing\n    const i = fastFloor(x + s);\n    const j = fastFloor(y + s);\n    const k = fastFloor(z + s);\n    const l = fastFloor(w + s);\n    const t = (i + j + k + l) * G4; // Factor for 4D unskewing\n    const X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space\n    const Y0 = j - t;\n    const Z0 = k - t;\n    const W0 = l - t;\n    const x0 = x - X0; // The x,y,z,w distances from the cell origin\n    const y0 = y - Y0;\n    const z0 = z - Z0;\n    const w0 = w - W0;\n    // For the 4D case, the simplex is a 4D shape I won't even try to describe.\n    // To find out which of the 24 possible simplices we're in, we need to\n    // determine the magnitude ordering of x0, y0, z0 and w0.\n    // Six pair-wise comparisons are performed between each possible pair\n    // of the four coordinates, and the results are used to rank the numbers.\n    let rankx = 0;\n    let ranky = 0;\n    let rankz = 0;\n    let rankw = 0;\n    if (x0 > y0) rankx++;\n    else ranky++;\n    if (x0 > z0) rankx++;\n    else rankz++;\n    if (x0 > w0) rankx++;\n    else rankw++;\n    if (y0 > z0) ranky++;\n    else rankz++;\n    if (y0 > w0) ranky++;\n    else rankw++;\n    if (z0 > w0) rankz++;\n    else rankw++;\n    // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.\n    // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w\n    // impossible. Only the 24 indices which have non-zero entries make any sense.\n    // We use a thresholding to set the coordinates in turn from the largest magnitude.\n    // Rank 3 denotes the largest coordinate.\n    // Rank 2 denotes the second largest coordinate.\n    // Rank 1 denotes the second smallest coordinate.\n\n    // The integer offsets for the second simplex corner\n    const i1 = rankx >= 3 ? 1 : 0;\n    const j1 = ranky >= 3 ? 1 : 0;\n    const k1 = rankz >= 3 ? 1 : 0;\n    const l1 = rankw >= 3 ? 1 : 0;\n    // The integer offsets for the third simplex corner\n    const i2 = rankx >= 2 ? 1 : 0;\n    const j2 = ranky >= 2 ? 1 : 0;\n    const k2 = rankz >= 2 ? 1 : 0;\n    const l2 = rankw >= 2 ? 1 : 0;\n\n    // The integer offsets for the fourth simplex corner\n    const i3 = rankx >= 1 ? 1 : 0;\n    const j3 = ranky >= 1 ? 1 : 0;\n    const k3 = rankz >= 1 ? 1 : 0;\n    const l3 = rankw >= 1 ? 1 : 0;\n    // The fifth corner has all coordinate offsets = 1, so no need to compute that.\n    const x1 = x0 - i1 + G4; // Offsets for second corner in (x,y,z,w) coords\n    const y1 = y0 - j1 + G4;\n    const z1 = z0 - k1 + G4;\n    const w1 = w0 - l1 + G4;\n    const x2 = x0 - i2 + 2.0 * G4; // Offsets for third corner in (x,y,z,w) coords\n    const y2 = y0 - j2 + 2.0 * G4;\n    const z2 = z0 - k2 + 2.0 * G4;\n    const w2 = w0 - l2 + 2.0 * G4;\n    const x3 = x0 - i3 + 3.0 * G4; // Offsets for fourth corner in (x,y,z,w) coords\n    const y3 = y0 - j3 + 3.0 * G4;\n    const z3 = z0 - k3 + 3.0 * G4;\n    const w3 = w0 - l3 + 3.0 * G4;\n    const x4 = x0 - 1.0 + 4.0 * G4; // Offsets for last corner in (x,y,z,w) coords\n    const y4 = y0 - 1.0 + 4.0 * G4;\n    const z4 = z0 - 1.0 + 4.0 * G4;\n    const w4 = w0 - 1.0 + 4.0 * G4;\n    // Work out the hashed gradient indices of the five simplex corners\n    const ii = i & 255;\n    const jj = j & 255;\n    const kk = k & 255;\n    const ll = l & 255;\n    // Calculate the contribution from the five corners\n    let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\n    if (t0 < 0) n0 = 0.0;\n    else {\n      const gi0 = ii + perm[jj + perm[kk + perm[ll]]];\n      t0 *= t0;\n      n0 = t0 * t0 * (permGrad4x[gi0] * x0 + permGrad4y[gi0] * y0 + permGrad4z[gi0] * z0 + permGrad4w[gi0] * w0);\n    }\n    let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\n    if (t1 < 0) n1 = 0.0;\n    else {\n      const gi1 = ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]];\n      t1 *= t1;\n      n1 = t1 * t1 * (permGrad4x[gi1] * x1 + permGrad4y[gi1] * y1 + permGrad4z[gi1] * z1 + permGrad4w[gi1] * w1);\n    }\n    let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\n    if (t2 < 0) n2 = 0.0;\n    else {\n      const gi2 = ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]];\n      t2 *= t2;\n      n2 = t2 * t2 * (permGrad4x[gi2] * x2 + permGrad4y[gi2] * y2 + permGrad4z[gi2] * z2 + permGrad4w[gi2] * w2);\n    }\n    let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\n    if (t3 < 0) n3 = 0.0;\n    else {\n      const gi3 = ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]];\n      t3 *= t3;\n      n3 = t3 * t3 * (permGrad4x[gi3] * x3 + permGrad4y[gi3] * y3 + permGrad4z[gi3] * z3 + permGrad4w[gi3] * w3);\n    }\n    let t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\n    if (t4 < 0) n4 = 0.0;\n    else {\n      const gi4 = ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]];\n      t4 *= t4;\n      n4 = t4 * t4 * (permGrad4x[gi4] * x4 + permGrad4y[gi4] * y4 + permGrad4z[gi4] * z4 + permGrad4w[gi4] * w4);\n    }\n    // Sum up and scale the result to cover the range [-1,1]\n    return 27.0 * (n0 + n1 + n2 + n3 + n4);\n  };\n}\n\n/**\n * Builds a random permutation table.\n * This is exported only for (internal) testing purposes.\n * Do not rely on this export.\n * @private\n */\nexport function buildPermutationTable(random: RandomFn): Uint8Array {\n  const tableSize = 512;\n  const p = new Uint8Array(tableSize);\n  for (let i = 0; i < tableSize / 2; i++) {\n    p[i] = i;\n  }\n  for (let i = 0; i < tableSize / 2 - 1; i++) {\n    const r = i + ~~(random() * (256 - i));\n    const aux = p[i];\n    p[i] = p[r];\n    p[r] = aux;\n  }\n  for (let i = 256; i < tableSize; i++) {\n    p[i] = p[i - 256];\n  }\n  return p;\n}", "/*\nMIT License\n\nCopyright (c) 2021 Egor Nepomnyaschih\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n/*\n// This constant can also be computed with the following algorithm:\nconst base64abc = [],\n  A = \"A\".charCodeAt(0),\n  a = \"a\".charCodeAt(0),\n  n = \"0\".charCodeAt(0);\nfor (let i = 0; i < 26; ++i) {\n  base64abc.push(String.fromCharCode(A + i));\n}\nfor (let i = 0; i < 26; ++i) {\n  base64abc.push(String.fromCharCode(a + i));\n}\nfor (let i = 0; i < 10; ++i) {\n  base64abc.push(String.fromCharCode(n + i));\n}\nbase64abc.push(\"+\");\nbase64abc.push(\"/\");\n*/\nconst base64abc = [\n  \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\",\n  \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\",\n  \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\",\n  \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\n  \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"+\", \"/\"\n];\n\n/*\n// This constant can also be computed with the following algorithm:\nconst l = 256, base64codes = new Uint8Array(l);\nfor (let i = 0; i < l; ++i) {\n  base64codes[i] = 255; // invalid character\n}\nbase64abc.forEach((char, index) => {\n  base64codes[char.charCodeAt(0)] = index;\n});\nbase64codes[\"=\".charCodeAt(0)] = 0; // ignored anyway, so we just need to prevent an error\n*/\nconst base64codes = [\n  255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n  255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,\n  255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 62, 255, 255, 255, 63,\n  52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 255, 255, 255, 0, 255, 255,\n  255, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,\n  15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 255, 255, 255, 255, 255,\n  255, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n  41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n];\n\nfunction getBase64Code(charCode: number) {\n  if (charCode >= base64codes.length) {\n    throw new Error(\"Unable to parse base64 string.\");\n  }\n  const code = base64codes[charCode];\n  if (code === 255) {\n    throw new Error(\"Unable to parse base64 string.\");\n  }\n  return code;\n}\n\nexport function bytesToBase64(bytes: number[] | Uint8Array) {\n  let result = '', i;\n  const l = bytes.length;\n  for (i = 2; i < l; i += 3) {\n    result += base64abc[bytes[i - 2] >> 2];\n    result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\n    result += base64abc[((bytes[i - 1] & 0x0F) << 2) | (bytes[i] >> 6)];\n    result += base64abc[bytes[i] & 0x3F];\n  }\n  if (i === l + 1) { // 1 octet yet to write\n    result += base64abc[bytes[i - 2] >> 2];\n    result += base64abc[(bytes[i - 2] & 0x03) << 4];\n    result += \"==\";\n  }\n  if (i === l) { // 2 octets yet to write\n    result += base64abc[bytes[i - 2] >> 2];\n    result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\n    result += base64abc[(bytes[i - 1] & 0x0F) << 2];\n    result += \"=\";\n  }\n  return result;\n}\n\nexport function base64ToBytes(str: string) {\n  if (str.length % 4 !== 0) {\n    throw new Error(\"Unable to parse base64 string.\");\n  }\n  const index = str.indexOf(\"=\");\n  if (index !== -1 && index < str.length - 2) {\n    throw new Error(\"Unable to parse base64 string.\");\n  }\n  const missingOctets = str.endsWith(\"==\") ? 2 : str.endsWith(\"=\") ? 1 : 0,\n    n = str.length,\n    result = new Uint8Array(3 * (n / 4));\n  let buffer: number;\n  for (let i = 0, j = 0; i < n; i += 4, j += 3) {\n    buffer =\n      getBase64Code(str.charCodeAt(i)) << 18 |\n      getBase64Code(str.charCodeAt(i + 1)) << 12 |\n      getBase64Code(str.charCodeAt(i + 2)) << 6 |\n      getBase64Code(str.charCodeAt(i + 3));\n    result[j] = buffer >> 16;\n    result[j + 1] = (buffer >> 8) & 0xFF;\n    result[j + 2] = buffer & 0xFF;\n  }\n  return result.subarray(0, result.length - missingOctets);\n}\n\nexport function base64encode(str: string, encoder: { encode: (str: string) => Uint8Array | number[] } = new TextEncoder()) {\n  return bytesToBase64(encoder.encode(str));\n}\n\nexport function base64decode(str: string, decoder: { decode: (bytes: Uint8Array) => string } = new TextDecoder()) {\n  return decoder.decode(base64ToBytes(str));\n}", "export * from './AngularWipeStep';\nexport * from './BarWipeStep';\nexport * from './BillinearWipeStep';\nexport * from './BossSplashStep';\nexport * from './ClearEffectsStep';\nexport * from './ClockWipeStep';\nexport * from './DiamondWipeStep';\nexport * from './FadeStep';\nexport * from './FireDissolveStep';\nexport * from './FlashStep';\nexport * from './HueShiftStep';\nexport * from './InvertStep';\nexport * from './LinearWipeStep';\nexport * from './LoadingTipStep';\nexport * from './MacroStep';\nexport * from './MeltStep';\nexport * from './ParallelStep';\nexport * from './PixelateStep';\nexport * from './RadialWipeStep';\nexport * from './RemoveOverlayStep';\nexport * from './RepeatStep';\nexport * from './RestoreOverlayStep';\nexport * from './ReverseStep';\nexport * from './SceneChangeStep';\nexport * from './SoundStep';\nexport * from './SpiralShutterStep';\nexport * from './SpiralWipeStep';\nexport * from './SpotlightWipeStep';\nexport * from './StartPlaylistStep';\nexport * from './TextureSwapStep';\nexport * from './TransitionStep';\nexport * from './TwistStep';\nexport * from './VideoStep';\nexport * from './WaitStep';\nexport * from './WaveWipeStep';\nexport * from './ZoomBlurStep';\nexport * from './ZoomStep';\nexport * from './types';\n", "import { NotImplementedError } from \"../errors\";\nimport { CustomFilter } from \"../filters\";\nimport { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { AnimatedTransition, TransitionConfiguration } from \"./types\";\n\nexport abstract class TransitionStep<t extends TransitionConfiguration = TransitionConfiguration> {\n  // #region Properties (6)\n\n  public static DefaultSettings: TransitionConfiguration = {\n    id: \"\",\n    type: \"UNKNOWN\",\n    version: \"1.1.0\"\n  };\n  public static hidden: boolean = true;\n  public static key: string = \"unknown\";\n  public static name: string = \"UNNAMED\";\n  public static skipConfig: boolean = false;\n  public static template: string = \"\";\n  public static icon: string = \"\";\n  public static category: string = \"\";\n\n  public static reversible = false;\n\n  public reverse(): Promise<void> | void {\n    throw new NotImplementedError();\n  }\n\n  // #endregion Properties (6)\n\n  // #region Constructors (1)\n\n  constructor(public readonly config: Partial<t>) {\n    if (!config.id) this.config.id = foundry.utils.randomID();\n  }\n\n  // #endregion Constructors (1)\n\n  // #region Public Static Methods (7)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/require-await\n  public static async RenderTemplate(config?: TransitionConfiguration, oldScene?: Scene, newScene?: Scene): Promise<string> {\n    throw new NotImplementedError();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static Upgrade(config: unknown): TransitionConfiguration { throw new NotImplementedError(); }\n\n  public static from(config: TransitionConfiguration): TransitionStep\n  public static from(form: HTMLFormElement): TransitionStep\n  public static from(form: JQuery<HTMLFormElement>): TransitionStep\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static from(arg: unknown): TransitionStep {\n    throw new NotImplementedError();\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static validate(config: TransitionConfiguration, sequence: TransitionConfiguration[]): Promise<TransitionConfiguration | Error> | TransitionConfiguration | Error {\n    return config;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static validateForm(elem: HTMLElement | JQuery<HTMLElement>): boolean { return true; }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (5)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static addEventListeners(element: HTMLElement | JQuery<HTMLElement>, config?: TransitionConfiguration): void { }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static editDialogClosed(element: HTMLElement | JQuery<HTMLElement>): void { }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public prepare(sequence?: TransitionSequence): Promise<void> | void { }\n\n  public serialize(): Promise<t> | t {\n    return this.config as t;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public teardown(container: PIXI.Container): Promise<void> | void { }\n\n  // #endregion Public Methods (5)\n\n  // #region Public Abstract Methods (1)\n\n  public abstract execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> | void;\n\n  // #endregion Public Abstract Methods (1)\n\n  // #region Protected Methods (4)\n\n  protected addFilter(container: PIXI.Container, filter: CustomFilter<any> | PIXI.Filter) {\n    if (Array.isArray(container.filters)) container.filters.push(filter);\n    else container.filters = [filter];\n  }\n\n  protected getConfigTemplateParams(): object {\n    return {\n      ...this.config\n    } as object;\n  }\n\n  protected removeFilter(container: PIXI.Container, filter: CustomFilter<any>) {\n    const index = container.filters?.indexOf(filter) ?? -1;\n    if (index !== -1) container.filters?.splice(index, 1);\n  }\n\n  protected async simpleReverse(filter: CustomFilter<any>): Promise<void> {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    await TweenMax.to(filter.uniforms, { progress: 0, duration: (this.config as unknown as AnimatedTransition).duration / 1000, ease: (this.config as unknown as AnimatedTransition).easing || \"none\" });\n  }\n\n  protected async simpleTween(filter: CustomFilter<any>): Promise<void> {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    await TweenMax.to(filter.uniforms, { progress: 1, duration: (this.config as unknown as AnimatedTransition).duration / 1000, ease: (this.config as unknown as AnimatedTransition).easing || \"none\" });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static getDuration(config: TransitionConfiguration, sequence: TransitionConfiguration[]): number | Promise<number> { return 0; }\n\n  // #endregion Protected Methods (4)\n}\n", "#version 300 es\n\nprecision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nvoid main() {\n    color = texture(uSampler, vTextureCoord);\n}", "#version 300 es\n\nin vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nout vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition(void) {\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord(void) {\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void) {\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n", "import frag from \"./default.frag\";\nimport vert from \"./default.vert\"\n\nexport class CustomFilter<u extends { [x: string]: unknown }> extends PIXI.Filter {\n  constructor(vertex?: string, fragment?: string, uniforms?: u) {\n\n    super(vertex || vert, fragment || frag, uniforms);\n\n    // Enable GLSL 3.00\n    if (!this.program.fragmentSrc.includes(\"#version 300 es\"))\n      this.program.fragmentSrc = this.#addGLESVersion(300, this.program.fragmentSrc);\n    // this.program.fragmentSrc = \"#version 300 es \\n\" + this.program.fragmentSrc;\n\n    if (!this.program.vertexSrc.includes(\"#version 300 es\"))\n      this.program.vertexSrc = this.#addGLESVersion(300, this.program.vertexSrc);\n    // this.program.vertexSrc = \"#version 300 es\\n\" + this.program.vertexSrc;\n  }\n\n  #addGLESVersion(version: number, shader: string) {\n    const lines = shader.split(\"\\n\");\n    const versionIndex = lines.findIndex(line => line.startsWith(\"#version\"));\n    if (versionIndex !== -1) {\n      const version = lines.splice(versionIndex, 1);\n      lines.unshift(...version);\n    } else {\n      lines.unshift(\"#version 300 es\");\n    }\n\n    return lines.join(\"\\n\");\n  }\n}\n", "#version 300 es\n\nprecision highp float;\n\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform sampler2D uSampler;\nuniform sampler2D noise_texture;\nuniform sampler2D burn_texture;\n\nuniform float progress;\nuniform float burn_size;\n\nfloat inverse_lerp(float a, float b, float v) {\n    return (v - a) / (b - a);\n}\n\nvoid main() {\n    float integrity = 1.0 - progress;\n    float noise = texture(noise_texture, vTextureCoord).r * vTextureCoord.y;\n    vec4 base_color = texture(uSampler, vTextureCoord) * step(noise, integrity);\n    vec2 burn_uv = vec2(inverse_lerp(integrity, integrity * burn_size, noise), 0.0);\n    vec4 burn_color = texture(burn_texture, burn_uv) * step(noise, integrity * burn_size);\n\n    color = mix(burn_color, base_color, base_color.a);\n}", "import { createGradient1DTexture, createNoiseTexture } from \"../../utils\";\nimport { CustomFilter } from \"../CustomFilter\";\nimport fragment from \"./firedissolve.frag\";\n// import { createGradient1DTexture, createNoiseTexture } from \"../../utils\"\n\ntype FireDissolveUniforms = {\n  noise_texture: PIXI.Texture;\n  burn_texture: PIXI.Texture;\n  progress: number;\n  burn_size: number;\n}\n\nexport const defaultBurnTexture = createGradient1DTexture(1024, new PIXI.Color(\"#ff0400\"), new PIXI.Color(\"#ffff01\"));\n\nexport class FireDissolveFilter extends CustomFilter<FireDissolveUniforms> {\n\n  constructor(burnSize: number = 1.3) {\n    const noise_texture = createNoiseTexture();\n    const uniforms = {\n      noise_texture,\n      progress: 0,\n      burn_size: burnSize,\n      burn_texture: defaultBurnTexture\n    };\n\n    super(undefined, fragment, uniforms);\n  }\n\n}", "precision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform float progress;\nuniform float size;\nuniform vec2 screen_size;\nuniform sampler2D bgSampler;\n\nvoid main() {\n    vec2 screenCoord = screen_size * vTextureCoord;\n    \n    float x = abs(fract(screenCoord.x / size) - 0.5);\n    float y = abs(fract(screenCoord.y / size) - 0.5);\n    \n    if (x + y + vTextureCoord.x > progress * 2.0) {\n        color = texture(uSampler, vTextureCoord);\n    } else {\n        color = texture(bgSampler, vTextureCoord);\n    }\n}", "import frag from \"./diamondtransition.frag\";\nimport { CustomFilter } from '../CustomFilter';\nimport { coerceTexture } from \"../../coercion\";\nimport { createColorTexture } from \"../../utils\";\n\ntype DiamondTransitionUniforms = {\n  progress: number;\n  size: number;\n  screen_size: { x: number; y: number },\n  bgSampler: PIXI.Texture\n}\n\nexport class DiamondTransitionFilter extends CustomFilter<DiamondTransitionUniforms> {\n\n  constructor(size: number, bg: PIXI.TextureSource | PIXI.ColorSource = \"transparent\") {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n    super(undefined, frag, {\n      progress: 0,\n      size,\n      bgSampler: bgTexture,\n      screen_size: { x: window.innerWidth, y: window.innerHeight }\n    })\n  }\n}\n\n// export class DiamondTransitionFilter extends CustomFilter<DiamondTransitionUniforms> {\n//   constructor(uniforms?: Partial<DiamondTransitionUniforms>) {\n//     const actual: DiamondTransitionUniforms = {\n//       progress: 0,\n//       size: 40,\n//       fill: true,\n//       screen_size: {\n//         x: window.innerWidth,\n//         y: window.innerHeight\n//       },\n//       ...uniforms\n//     };\n\n//     super(undefined, frag, actual);\n//   }\n// }", "#version 300 es\n\nprecision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform float progress;\nuniform sampler2D wipeSampler;\nuniform sampler2D bgSampler;\n\nvoid main() {\n    vec4 wipe = texture(wipeSampler, vTextureCoord);\n\n    if (wipe.b <= progress) {\n        color = texture(bgSampler, vTextureCoord);\n    } else {\n        color = texture(uSampler, vTextureCoord);\n    }\n}", "import frag from \"./texturewipe.frag\";\nimport { CustomFilter } from '../CustomFilter';\nimport { createColorTexture } from '../../utils';\n\ntype TextureWipeUniforms = {\n  progress: number;\n  wipeSampler: PIXI.Texture;\n  bgSampler: PIXI.Texture;\n}\n\n\nconst transparentTexture = createColorTexture(new PIXI.Color(\"#00000000\"));\n\nexport class TextureWipeFilter extends CustomFilter<TextureWipeUniforms> {\n\n  constructor(wipeSampler: PIXI.Texture, bgSampler?: PIXI.Texture) {\n    const uniforms: TextureWipeUniforms = {\n      progress: 0,\n      wipeSampler,\n      bgSampler: bgSampler ?? transparentTexture\n    }\n\n    super(undefined, frag, uniforms);\n  }\n}", "#version 300 es\nprecision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform float progress;\nuniform sampler2D bgColor;\n\nvoid main() {\n    color = mix(texture(uSampler, vTextureCoord), texture(bgColor, vTextureCoord), progress);\n}", "import frag from \"./fadetransition.frag\";\nimport { CustomFilter } from '../CustomFilter';\nimport { createColorTexture } from '../../utils';\nimport { coerceTexture } from \"../../coercion\";\n\ntype FadeTransitionUniforms = {\n  progress: number;\n  bgColor: PIXI.Texture;\n}\n\n\nexport class FadeTransitionFilter extends CustomFilter<FadeTransitionUniforms> {\n\n  constructor(bg: PIXI.ColorSource | PIXI.TextureSource = \"transparent\") {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n    super(undefined, frag, {\n      bgColor: bgTexture,\n      progress: 0\n    });\n  }\n}", "import { coerceTexture } from '../../coercion';\nimport { InvalidDirectionError } from '../../errors';\nimport { BilinearDirection, RadialDirection } from '../../types';\nimport { createColorTexture, createGradientTexture } from '../../utils';\nimport { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\n\n\n//#region Texture Generation\nfunction verticalInside(): PIXI.Texture {\n  return createGradientTexture(window.innerWidth, 1, 0, 0, window.innerWidth, 0, [\n    { point: 0, color: \"white\" },\n    { point: .5, color: \"black\" },\n    { point: 1, color: \"white\" }\n  ])\n}\n\nfunction verticalOutside(): PIXI.Texture {\n  return createGradientTexture(window.innerWidth, 1, 0, 0, window.innerWidth, 0, [\n    { point: 0, color: \"black\" },\n    { point: .5, color: \"white\" },\n    { point: 1, color: \"black\" }\n  ])\n}\n\nfunction topLeftInside(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth,\n    window.innerHeight,\n    0, 0,\n    window.innerWidth,\n    window.innerHeight,\n    [\n      { point: 0, color: \"white\" },\n      { point: .5, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction topRightInside(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth,\n    window.innerHeight,\n    window.innerWidth,\n    0,\n    0,\n    window.innerHeight,\n    [\n      { point: 0, color: \"white\" },\n      { point: .5, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction topLeftOutside(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth,\n    window.innerHeight,\n    0, 0,\n    window.innerWidth,\n    window.innerHeight,\n    [\n      { point: 0, color: \"black\" },\n      { point: .5, color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\nfunction topRightOutside(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth,\n    window.innerHeight,\n    window.innerWidth,\n    0,\n    0,\n    window.innerHeight,\n    [\n      { point: 0, color: \"black\" },\n      { point: .5, color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\nfunction horizontalInside(): PIXI.Texture {\n  return createGradientTexture(\n    1, window.innerHeight,\n    0, 0,\n    0, window.innerHeight,\n    [\n      { point: 0, color: \"white\" },\n      { point: .5, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction horizontalOutside(): PIXI.Texture {\n  return createGradientTexture(\n    1, window.innerHeight,\n    0, 0,\n    0, window.innerHeight,\n    [\n      { point: 0, color: \"black\" },\n      { point: .5, color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\n//#endregion\n\nfunction generateTexture(direction: BilinearDirection, radial: RadialDirection): PIXI.Texture {\n  if (direction === \"horizontal\" && radial === \"inside\") return horizontalInside();\n  else if (direction === \"horizontal\" && radial === \"outside\") return horizontalOutside();\n  else if (direction === \"vertical\" && radial === \"inside\") return verticalInside();\n  else if (direction === \"vertical\" && radial === \"outside\") return verticalOutside();\n  else if (direction === \"topleft\" && radial === \"inside\") return topLeftInside();\n  else if (direction === \"topleft\" && radial === \"outside\") return topLeftOutside();\n  else if (direction === \"topright\" && radial === \"inside\") return topRightInside();\n  else if (direction === \"topright\" && radial === \"outside\") return topRightOutside();\n  else if (direction === \"bottomleft\" && radial === \"inside\") return topRightInside();\n  else if (direction === \"bottomleft\" && radial === \"outside\") return topRightOutside();\n  else if (direction === \"bottomright\" && radial === \"inside\") return topLeftInside();\n  else if (direction === \"bottomright\" && radial === \"outside\") return topLeftOutside();\n\n  throw new InvalidDirectionError(`${direction}-${radial}`);\n}\n\nexport class BilinearWipeFilter extends TextureWipeFilter {\n\n  constructor(direction: BilinearDirection, radial: RadialDirection, bg: PIXI.TextureSource | PIXI.ColorSource) {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n\n    const wipeTexture = generateTexture(direction, radial);\n    if (!wipeTexture) throw new InvalidDirectionError(`${direction}-${radial}`);\n    super(wipeTexture, bgTexture);\n  }\n}", "import { coerceTexture } from '../../coercion';\nimport { InvalidDirectionError } from '../../errors';\nimport { WipeDirection } from '../../types';\nimport { createColorTexture, createGradientTexture } from '../../utils';\nimport { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\n\n//#region Texture Generation\nfunction left(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth, 1,\n    0, 0,\n    window.innerWidth, 0,\n    [\n      { point: 0, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction right(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth, 1,\n    0, 0,\n    window.innerWidth, 0,\n    [\n      { point: 0, color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\nfunction top(): PIXI.Texture {\n  return createGradientTexture(\n    1, window.innerHeight,\n    0, 0,\n    0, window.innerHeight,\n    [\n      { point: 0, color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\nfunction bottom(): PIXI.Texture {\n  return createGradientTexture(\n    1, window.innerHeight,\n    0, 0,\n    0, window.innerHeight,\n    [\n      { point: 0, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction bottomRight(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth, window.innerHeight,\n    0, 0,\n    window.innerWidth, window.innerHeight,\n    [\n      { point: 0, color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\nfunction bottomLeft(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth, window.innerHeight,\n    window.innerWidth, 0,\n    0, window.innerHeight,\n    [\n      { point: 0, color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\nfunction topRight(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth, window.innerHeight,\n    window.innerWidth, 0,\n    0, window.innerHeight,\n    [\n      { point: 0, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction topLeft(): PIXI.Texture {\n  return createGradientTexture(\n    window.innerWidth, window.innerHeight,\n    0, 0,\n    window.innerWidth, window.innerHeight,\n    [\n      { point: 0, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\n//#endregion\n\nfunction generateTexture(direction: WipeDirection): PIXI.Texture {\n  if (direction === \"left\") return left();\n  else if (direction === \"right\") return right();\n  else if (direction === \"top\") return top();\n  else if (direction === \"bottom\") return bottom();\n  else if (direction === \"topleft\") return topLeft();\n  else if (direction === \"topright\") return topRight();\n  else if (direction === \"bottomleft\") return bottomLeft();\n  else if (direction === \"bottomright\") return bottomRight();\n\n  throw new InvalidDirectionError(direction);\n\n}\n\n\nexport class LinearWipeFilter extends TextureWipeFilter {\n\n  constructor(direction: WipeDirection, bg: PIXI.TextureSource | PIXI.ColorSource) {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n    const wipeTexture = generateTexture(direction);\n    super(wipeTexture, bgTexture);\n  }\n}", "import { coerceTexture } from \"../../coercion\";\nimport { CanvasNotFoundError } from \"../../errors\";\nimport { ClockDirection, WipeDirection } from \"../../types\";\nimport { angleBetween, createColorTexture } from \"../../utils\";\nimport { TextureWipeFilter } from \"../TextureWipe/TextureWipeFilter\";\n\n\nfunction clockWipe(angle: number, direction: ClockDirection): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CanvasNotFoundError();\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n  const gradient = ctx.createConicGradient(angle, canvas.width / 2, canvas.height / 2);\n\n  gradient.addColorStop(0, direction === \"clockwise\" ? \"black\" : \"white\");\n  gradient.addColorStop(1, direction === \"clockwise\" ? \"white\" : \"black\");\n\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  return PIXI.Texture.from(canvas);\n}\n\nfunction generateTexture(direction: WipeDirection, clockDirection: ClockDirection): PIXI.Texture {\n  const x = window.innerWidth / 2;\n  const y = window.innerHeight / 2;\n\n  switch (direction) {\n    case \"right\": return clockWipe(0, clockDirection);\n    case \"left\": return clockWipe(Math.PI, clockDirection);\n    case \"top\": return clockWipe(Math.PI * 2 * .75, clockDirection);\n    case \"bottom\": return clockWipe(Math.PI * .5, clockDirection);\n    case \"topleft\": return clockWipe(angleBetween(x, y, 0, 0), clockDirection);\n    case \"topright\": return clockWipe(angleBetween(x, y, window.innerWidth, 0), clockDirection);\n    case \"bottomleft\": return clockWipe(angleBetween(x, y, 0, window.innerHeight), clockDirection);\n    case \"bottomright\": return clockWipe(angleBetween(x, y, window.innerWidth, window.innerHeight), clockDirection);\n  }\n}\n\nexport class ClockWipeFilter extends TextureWipeFilter {\n\n  constructor(clockDirection: ClockDirection, direction: WipeDirection, bg: PIXI.ColorSource | PIXI.TextureSource) {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n    const wipeTexture = generateTexture(direction, clockDirection);\n\n    super(wipeTexture, bgTexture);\n  }\n}\n", "import { RadialDirection, WipeDirection } from '../../types';\nimport { angleBetween, createColorTexture, createConicGradientTexture } from '../../utils';\nimport { coerceTexture } from \"../../coercion\";\nimport { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\nimport { InvalidDirectionError } from '../../errors';\n\n//#region Texture Generation\n\nfunction topOutside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight,\n    0,\n    window.innerWidth / 2, 0,\n    [\n      { point: 0, color: \"black\" },\n      { point: 0.25, color: \"white\" },\n      { point: 0.5, color: \"black\" }\n    ]\n  )\n}\n\nfunction topInside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight,\n    0,\n    window.innerWidth / 2, 0,\n    [\n      { point: 0, color: \"white\" },\n      { point: 0.25, color: \"black\" },\n      { point: 0.5, color: \"white\" }\n    ]\n  )\n}\n\nfunction bottomOutside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight,\n    Math.PI,\n    window.innerWidth / 2, window.innerHeight,\n    [\n      { point: 0, color: \"white\" },\n      { point: 0.25, color: \"black\" },\n      { point: 0.5, color: \"white\" }\n    ]\n  )\n}\n\nfunction bottomInside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight,\n    Math.PI,\n    window.innerWidth / 2, window.innerHeight,\n    [\n      { point: 0, color: \"black\" },\n      { point: 0.25, color: \"white\" },\n      { point: 0.5, color: \"black\" }\n    ]\n  )\n}\n\nfunction leftInside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight,\n    Math.PI * 2 * .75,\n    0, window.innerHeight / 2,\n    [\n      { point: 0, color: \"white\" },\n      { point: 0.25, color: \"black\" },\n      { point: 0.5, color: \"white\" }\n    ]\n  )\n}\n\nfunction leftOutside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight,\n    Math.PI * 2 * .75,\n    0, window.innerHeight / 2,\n    [\n      { point: 0, color: \"black\" },\n      { point: 0.25, color: \"white\" },\n      { point: 0.5, color: \"black\" }\n    ]\n  )\n}\n\nfunction rightInside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, Math.PI * .5,\n    window.innerWidth, window.innerHeight / 2,\n    [\n      { point: 0, color: \"white\" },\n      { point: 0.25, color: \"black\" },\n      { point: 0.5, color: \"white\" }\n    ]\n  )\n}\n\nfunction rightOutside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, Math.PI * .5,\n    window.innerWidth, window.innerHeight / 2,\n    [\n      { point: 0, color: \"black\" },\n      { point: 0.25, color: \"white\" },\n      { point: 0.5, color: \"black\" }\n    ]\n  )\n}\n\nfunction topLeftOutside(): PIXI.Texture {\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight,\n    angleBetween(0, 0, window.innerWidth, window.innerHeight),\n    0, 0,\n    [\n      { point: 0, color: \"white\" },\n      { point: .25, color: \"black\" },\n      { point: .85, color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction topLeftInside(): PIXI.Texture {\n  const angle = angleBetween(0, 0, window.innerWidth, window.innerHeight);\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, 0,\n    0, 0,\n    [\n      { point: 0, color: \"white\" },\n      { point: angle / (Math.PI * 2), color: \"black\" },\n      { point: .25, color: \"white\" }\n    ]\n  )\n}\n\nfunction topRightInside(): PIXI.Texture {\n  const angle = angleBetween(window.innerWidth, 0, 0, window.innerHeight);\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, 0,\n    window.innerWidth, 0,\n    [\n      { point: .25, color: \"white\" },\n      { point: angle / (2 * Math.PI), color: \"black\" },\n      { point: .5, color: \"white\" }\n    ]\n  )\n}\n\nfunction topRightOutside(): PIXI.Texture {\n  const angle = angleBetween(window.innerWidth, 0, 0, window.innerHeight);\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, 0,\n    window.innerWidth, 0,\n    [\n      { point: .25, color: \"black\" },\n      { point: angle / (2 * Math.PI), color: \"white\" },\n      { point: .5, color: \"black\" }\n    ]\n  )\n}\n\nfunction bottomLeftOutside(): PIXI.Texture {\n  const angle = angleBetween(0, window.innerHeight, window.innerWidth, 0);\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, 0,\n    0, window.innerHeight,\n    [\n      { point: .75, color: \"black\" },\n      { point: 1 - Math.abs(angle) / (2 * Math.PI), color: \"white\" },\n      { point: 1, color: \"black\" }\n    ]\n  )\n}\n\nfunction bottomLeftInside(): PIXI.Texture {\n  const angle = angleBetween(0, window.innerHeight, window.innerWidth, 0);\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, 0,\n    0, window.innerHeight,\n    [\n      { point: .75, color: \"white\" },\n      { point: 1 - Math.abs(angle) / (2 * Math.PI), color: \"black\" },\n      { point: 1, color: \"white\" }\n    ]\n  )\n}\n\nfunction bottomRightOutside(): PIXI.Texture {\n  const angle = angleBetween(window.innerWidth, window.innerHeight, 0, 0);\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, 0,\n    window.innerWidth, window.innerHeight,\n    [\n      { point: .5, color: \"black\" },\n      { point: 1 - (Math.abs(angle) / (2 * Math.PI)), color: \"white\" },\n      { point: .75, color: \"black\" }\n    ]\n  )\n}\nfunction bottomRightInside(): PIXI.Texture {\n  const angle = angleBetween(window.innerWidth, window.innerHeight, 0, 0);\n  return createConicGradientTexture(\n    window.innerWidth, window.innerHeight, 0,\n    window.innerWidth, window.innerHeight,\n    [\n      { point: .5, color: \"white\" },\n      { point: 1 - (Math.abs(angle) / (2 * Math.PI)), color: \"black\" },\n      { point: .75, color: \"white\" }\n    ]\n  )\n}\n\n//#endregion\n\nconst generators = {\n  topinside: topInside,\n  topoutside: topOutside,\n  rightinside: rightInside,\n  rightoutside: rightOutside,\n  bottominside: bottomInside,\n  bottomoutside: bottomOutside,\n  leftinside: leftInside,\n  leftoutside: leftOutside,\n  topleftinside: topLeftInside,\n  topleftoutside: topLeftOutside,\n  toprightinside: topRightInside,\n  toprightoutside: topRightOutside,\n  bottomleftinside: bottomLeftInside,\n  bottomleftoutside: bottomLeftOutside,\n  bottomrightinside: bottomRightInside,\n  bottomrightoutside: bottomRightOutside\n}\n\nfunction generateTexture(direction: WipeDirection, radial: RadialDirection): PIXI.Texture {\n  const func = generators[`${direction}${radial}`];\n  if (!func) throw new InvalidDirectionError(`${direction}-${radial}`);\n  return func();\n}\n\nexport class SpotlightWipeFilter extends TextureWipeFilter {\n  constructor(direction: WipeDirection, radial: RadialDirection, bg: PIXI.TextureSource | PIXI.ColorSource = \"transparent\") {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n    const wipeTexture = generateTexture(direction, radial);\n    super(wipeTexture, bgTexture);\n  }\n}", "import { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\nimport { RadialDirection } from \"../../types\";\nimport { coerceTexture } from \"../../coercion\";\nimport { createColorTexture } from \"../../utils\";\nimport { CanvasNotFoundError } from '../../errors';\n\nfunction inside(x: number, y: number): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CanvasNotFoundError();\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n  const gradient = ctx.createRadialGradient(\n    x, y, 0,\n    x, y, Math.max(canvas.width, canvas.height)\n  );\n\n  gradient.addColorStop(0, \"black\");\n  gradient.addColorStop(1, \"white\");\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n  return PIXI.Texture.from(canvas);\n}\n\nfunction outside(x: number, y: number): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CanvasNotFoundError();\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n  const gradient = ctx.createRadialGradient(\n    x, y, 0,\n    x, y, Math.max(canvas.width, canvas.height)\n  );\n\n  gradient.addColorStop(0, \"white\");\n  gradient.addColorStop(1, \"black\");\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n  return PIXI.Texture.from(canvas);\n}\n\n\nexport class RadialWipeFilter extends TextureWipeFilter {\n  constructor(direction: RadialDirection, x: number, y: number, bg: PIXI.TextureSource | PIXI.ColorSource) {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n    const wipeTexture = direction === \"inside\" ? inside(window.innerWidth * x, window.innerHeight * y) : outside(window.innerWidth * x, window.innerHeight * y);\n    super(wipeTexture, bgTexture);\n  }\n}\n", "precision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform vec4 chromaKey;\nuniform vec2 maskRange;\nuniform sampler2D bgSampler;\nuniform vec2 iResolution;\n\nmat4 RGBtoYUV = mat4(0.257,  0.439, -0.148, 0.0,\n                     0.504, -0.368, -0.291, 0.0,\n                     0.098, -0.071,  0.439, 0.0,\n                     0.0625, 0.500,  0.500, 1.0 );\n\n\n//compute color distance in the UV (CbCr, PbPr) plane\nfloat colorClose(vec3 yuv, vec3 keyYuv, vec2 tol)\n{\n    float tmp = sqrt(pow(keyYuv.g - yuv.g, 2.0) + pow(keyYuv.b - yuv.b, 2.0));\n    if (tmp < tol.x)\n      return 0.0;\n   \telse if (tmp < tol.y)\n      return (tmp - tol.x)/(tol.y - tol.x);\n   \telse\n      return 1.0;\n}\n\nvoid main() {\n  vec2 fragPos = vTextureCoord.xy / iResolution.xy;\n  vec4 texColor0 = texture(uSampler, fragPos);\n  vec4 texColor1 = texture(bgSampler, fragPos);\n\n  vec4 keyYUV = RGBtoYUV * chromaKey;\n  vec4 yuv = RGBtoYUV * texColor0;\n\n  float mask = 1.0 - colorClose(yuv.rgb, keyYUV.rgb, maskRange);\n  color = max(texColor0 - mask * chromaKey, 0.0) + texColor1 * mask;\n}\n\n// precision highp float;\n\n// uniform sampler2D uSampler;\n// in vec2 vTextureCoord;\n// out vec4 color;\n\n// uniform vec4 keyRGBA;\n// uniform vec2 keyCC;\n// uniform vec2 range;\n// uniform vec2 iResolution;\n// uniform sampler2D bgSampler;\n\n// vec2 RGBToCC(vec4 rgba) {\n//     float Y = 0.299 * rgba.r + 0.587 * rgba.g + 0.114 * rgba.b;\n//     return vec2((rgba.b - Y) * 0.565, (rgba.r - Y) * 0.713);\n// }\n\n// void main() {\n//     vec4 src1Color = texture(uSampler, vTextureCoord);\n//     vec2 CC = RGBToCC(src1Color);\n//     float mask = sqrt(pow(keyCC.x - CC.x, 2.0) + pow(keyCC.y - CC.y, 2.0));\n//     mask = smoothstep(range.x, range.y, mask);\n//     if (mask == 0.0) {\n//         color = texture(bgSampler, vTextureCoord);\n//     }\n//     else if (mask == 1.0) {\n//         color = src1Color;\n//     }\n//     else {\n//         color = max(src1Color - (1.0 - mask) * keyRGBA, 0.0);\n//     }\n// }\n", "import { coerceTexture } from '../../coercion';\nimport { createColorTexture } from '../../utils';\nimport { CustomFilter } from '../CustomFilter';\nimport frag from \"./chromakey.frag\";\n\n// type ChromaKeyUniforms = {\n//   keyRGBA: [number, number, number, number],\n//   keyCC: [number, number],\n//   range: [number, number],\n//   iResolution: [number, number],\n//   bgSampler: PIXI.Texture\n// }\n\n/*\nuniform vec4 chromaKey;\nuniform vec2 maskRange;\nuniform sampler2D bgSampler;\nuniform vec2 iResolution;\n*/\n\ntype ChromaKeyUniforms = {\n  chromaKey: [number, number, number, number];\n  maskRange: [number, number];\n  bgSampler: PIXI.Texture;\n  iResolution: [number, number];\n}\n\n\nfunction RGBAToCC(r: number, g: number, b: number): [number, number] {\n  const y = 0.299 * r + 0.587 * g + 0.114 * b;\n  return [(b - y) * 0.565, (r - y) * 0.713];\n}\n\n\n\nexport class ChromaKeyFilter extends CustomFilter<ChromaKeyUniforms> {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  constructor(keyColor: PIXI.ColorSource = [0.05, 0.63, 0.14, 1], bg: PIXI.TextureSource | PIXI.ColorSource = \"transparent\") {\n    const color = new PIXI.Color(keyColor);\n    const bgSampler = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n\n    const uniforms: ChromaKeyUniforms = {\n      // chromaKey: [color.red, color.green, color.blue, 1],\n      chromaKey: [color.red, color.green, color.blue, 1],\n      bgSampler,\n      maskRange: [.005, .26],\n      iResolution: [1, 1]\n    };\n\n    // const uniforms: ChromaKeyUniforms = {\n    //   // range: [0.11, 0.22],\n    //   range: [.11, .15],\n    //   keyRGBA: [color.red, color.green, color.blue, 1],\n    //   keyCC: RGBAToCC(color.red, color.green, color.blue),\n    //   iResolution: [window.innerWidth, window.innerHeight],\n    //   bgSampler\n    // };\n\n    super(undefined, frag, uniforms);\n  }\n}", "precision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform sampler2D uTexture;\n\nvoid main() {\n    color = texture(uTexture, vTextureCoord);\n}", "import { CustomFilter } from \"../CustomFilter\";\nimport { coerceTexture } from '../../coercion';\nimport { InvalidTextureError } from \"../../errors\";\nimport frag from \"./textureswap.frag\";\n\ntype TextureSwapUniforms = {\n  uTexture: PIXI.Texture\n};\n\n\nexport class TextureSwapFilter extends CustomFilter<TextureSwapUniforms> {\n  constructor(texture: PIXI.TextureSource | PIXI.ColorSource) {\n    const actual = coerceTexture(texture);\n    if (!actual) throw new InvalidTextureError();\n\n    super(undefined, frag, {\n      uTexture: actual\n    });\n  }\n}", "#version 300 es\n\nprecision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform float progress;\nuniform float[512] offsets;\nuniform sampler2D uBackground;\n\nvoid main() {\n    vec2 tex_uv = vTextureCoord;\n\n    float index = tex_uv.x * float(offsets.length());\n    tex_uv.y -= progress * offsets[int(index)];\n\n    // float index = tex_uv.x * float(offsets.length());\n    // tex_uv.y -= progress * offsets[int(index)];\n\n    color = texture(uSampler, tex_uv);\n    if (tex_uv.y < 0.0 || tex_uv.y > 1.0) color = texture(uBackground, vTextureCoord); // texture(uBackground, vTextureCoord);\n}\n", "import frag from \"./melt.frag\";\nimport { CustomFilter } from '../CustomFilter';\nimport { coerceTexture } from \"../../coercion\";\nimport { InvalidTextureError } from \"../../errors\";\n\n\ntype MeltUniforms = {\n  progress: number;\n  offsets: number[];\n  uBackground: PIXI.Texture;\n}\n\nexport class MeltFilter extends CustomFilter<MeltUniforms> {\n  constructor(background: PIXI.TextureSource | PIXI.ColorSource) {\n    const texture = coerceTexture(background);\n    if (!(texture instanceof PIXI.Texture)) throw new InvalidTextureError();\n    super(undefined, frag, {\n      progress: 0,\n      offsets: new Array(512).fill(0).map(() => Math.random() + 1),\n      uBackground: texture\n    });\n  }\n}", "import { coerceTexture } from '../../coercion';\nimport { InvalidTextureError } from '../../errors';\nimport { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\n\nexport class AngularWipeFilter extends TextureWipeFilter {\n  constructor(background: PIXI.TextureSource | PIXI.ColorSource) {\n    const bg = coerceTexture(background);\n    if (!(bg instanceof PIXI.Texture)) throw new InvalidTextureError();\n\n    const wipeTexture = PIXI.Texture.from(`/modules/${__MODULE_ID__}/assets/wipes/angular.webp`);\n    super(wipeTexture, bg);\n  }\n}\n", "import { coerceTexture } from '../../coercion';\nimport { InvalidTextureError } from '../../errors';\nimport { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\nimport { RadialDirection } from '../../types';\n\nexport class WaveWipeFilter extends TextureWipeFilter {\n  constructor(direction: RadialDirection, background: PIXI.TextureSource | PIXI.ColorSource) {\n    const bg = coerceTexture(background);\n    if (!(bg instanceof PIXI.Texture)) throw new InvalidTextureError();\n\n    const wipeTexture = PIXI.Texture.from(`/modules/${__MODULE_ID__}/assets/wipes/wave-${direction === \"inside\" ? \"inside\" : \"outside\"}.webp`);\n    super(wipeTexture, bg);\n  }\n}\n", "#version 300 es\n\nprecision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nvoid main() {\n    color = 1.0 - texture(uSampler, vTextureCoord);\n    color.a = 1.0;\n}", "import frag from \"./invert.frag\";\nimport { CustomFilter } from \"../CustomFilter\"\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\ntype InvertUniforms = {}\n\nexport class InvertFilter extends CustomFilter<InvertUniforms> {\n  constructor() {\n    super(undefined, frag, {});\n  }\n}", "import { coerceTexture } from '../../coercion';\nimport { InvalidDirectionError, InvalidTextureError } from '../../errors';\nimport { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\nimport { RadialDirection, ClockDirection } from '../../types';\n\nconst textures = {\n  clockwise: {\n    inside: \"spiral-radial-clockwise-inside\",\n    outside: \"spiral-radial-clockwise-outside\"\n  },\n  counterclockwise: {\n    inside: \"spiral-radial-counterclockwise-inside\",\n    outside: \"spiral-radial-counterclockwise-outside\"\n  }\n}\n\nexport class SpiralShutterFilter extends TextureWipeFilter {\n  constructor(direction: ClockDirection, radial: RadialDirection, background: PIXI.TextureSource | PIXI.ColorSource) {\n    const bg = coerceTexture(background);\n\n    if (!(bg instanceof PIXI.Texture)) throw new InvalidTextureError();\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n    const wipe = (textures as any)[direction]?.[radial];\n\n    if (!wipe) throw new InvalidDirectionError(`${direction}-${radial}`);\n\n    const wipeTexture = PIXI.Texture.from(`/modules/${__MODULE_ID__}/assets/wipes/${wipe}.webp`);\n    super(wipeTexture, bg);\n  }\n}\n", "import { coerceTexture } from \"../../coercion\";\nimport { InvalidTextureError } from \"../../errors\";\nimport { ClockDirection, RadialDirection, TextureLike, WipeDirection } from \"../../types\";\nimport { TextureWipeFilter } from \"../TextureWipe/TextureWipeFilter\";\n\n\nexport class SpiralWipeFilter extends TextureWipeFilter {\n  constructor(clock: ClockDirection, radial: RadialDirection, direction: WipeDirection, background: TextureLike) {\n    const bg = coerceTexture(background);\n    if (!(bg instanceof PIXI.Texture)) throw new InvalidTextureError();\n    const wipeTexture = PIXI.Texture.from(`/modules/${__MODULE_ID__}/assets/wipes/spiral-linear-${clock}-${direction}-${radial}.webp`);\n    if (!(wipeTexture instanceof PIXI.Texture)) throw new InvalidTextureError();\n\n    super(wipeTexture, bg);\n  }\n}\n\n\n//     if (!wipe) throw new InvalidDirectionError(`${direction}-${radial}`);\n\n//     const wipeTexture = PIXI.Texture.from(`/modules/${__MODULE_ID__}/assets/wipes/${wipe}.webp`);\n//     super(wipeTexture, bg);\n//   }\n// }\n", "#version 300 es\n\nprecision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform float shift;\n\nvoid main() {\n    vec4 texture_color = texture(uSampler, vTextureCoord);\n    vec3 input_color = texture_color.rgb;\n\n    vec3 color_hsv; {\n        vec3 c = input_color;\n        vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n        vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n        vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n        float d = q.x - min(q.w, q.y);\n        float e = 1.0e-10;\n        color_hsv=vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n    }\n\n    color_hsv.x = mod((color_hsv.x + shift), 1.0f);\n\n    vec3 color_rgb; {\n        vec3 c = color_hsv;\n        vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n        vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n        color_rgb=c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n\n    color = vec4(color_rgb.rgb, texture_color.a);\n}", "import frag from \"./hueshift.frag\";\nimport { CustomFilter } from '../CustomFilter';\n\ntype HueShiftUniforms = {\n  shift: number;\n}\n\nexport class HueShiftFilter extends CustomFilter<HueShiftUniforms> {\n  constructor(shift: number) {\n    super(undefined, frag, { shift });\n  }\n}", "import { coerceTexture } from '../../coercion';\nimport { CanvasNotFoundError, InvalidDirectionError } from '../../errors';\nimport { TextureLike } from '../../types';\nimport { createColorTexture } from '../../utils';\nimport { TextureWipeFilter } from '../TextureWipe/TextureWipeFilter';\n\n\nfunction createHorizontalTexture(bars: number): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CanvasNotFoundError();\n\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n  const left = ctx.createLinearGradient(0, 0, canvas.width, 0);\n  const right = ctx.createLinearGradient(0, 0, canvas.width, 0);\n\n  left.addColorStop(0, \"black\");\n  left.addColorStop(1, \"white\");\n  right.addColorStop(0, \"white\");\n  right.addColorStop(1, \"black\");\n\n  const barHeight = canvas.height / bars;\n\n  for (let i = 0; i < bars; i++) {\n    ctx.fillStyle = (i % 2 === 0) ? left : right;\n    ctx.fillRect(0, barHeight * i, canvas.width, barHeight + (barHeight * i));\n  }\n  return PIXI.Texture.from(canvas);\n}\n\nfunction createVerticalTexture(bars: number): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CanvasNotFoundError();\n\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n\n  const top = ctx.createLinearGradient(0, 0, 0, canvas.height);\n  const bottom = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\n  top.addColorStop(0, \"black\");\n  top.addColorStop(1, \"white\");\n  bottom.addColorStop(0, \"white\");\n  bottom.addColorStop(1, \"black\");\n\n  const barWidth = canvas.width / bars;\n\n  for (let i = 0; i < bars; i++) {\n    ctx.fillStyle = (i % 2 === 0) ? top : bottom;\n    ctx.fillRect(barWidth * i, 0, barWidth + (barWidth * i), canvas.height);\n  }\n\n  return PIXI.Texture.from(canvas);\n}\n\nexport class BarWipeFilter extends TextureWipeFilter {\n  constructor(direction: \"horizontal\" | \"vertical\", bars: number, bg: TextureLike) {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n    if (!(direction === \"horizontal\" || direction === \"vertical\")) throw new InvalidDirectionError(direction);\n\n    const wipeTexture = (direction === \"horizontal\") ? createHorizontalTexture(bars) : createVerticalTexture(bars);\n    super(wipeTexture, bgTexture);\n  }\n}\n", "#version 300 es\n\nprecision highp float;\n\nuniform sampler2D uSampler;\nin vec2 vTextureCoord;\nout vec4 color;\n\nuniform vec2 center;\nuniform float amount;\n\nuniform bool clampBounds;\nuniform sampler2D bgSampler;\n\nvoid main() {\n    // color = texture(uSampler, vTextureCoord);\n\n    vec2 zoomed_uv = (vTextureCoord - center) * amount + center;\n    // Clamp to boundaries\n    if (clampBounds) {\n        zoomed_uv = clamp(zoomed_uv, vec2(0.0), vec2(1.0));\n    }\n\n    if (zoomed_uv.x < 0.0 || zoomed_uv.x > 1.0 || zoomed_uv.y < 0.0 || zoomed_uv.y > 1.0) {\n        color = texture(bgSampler, zoomed_uv);\n    } else {\n        // vec2 tex_uv = vec2(zoomed_uv.x, 1.0 - zoomed_uv.y)\n        color = texture(uSampler, zoomed_uv);\n    }\n}", "import frag from \"./zoom.frag\";\nimport { CustomFilter } from '../CustomFilter';\nimport { coerceTexture } from \"../../coercion\";\nimport { createColorTexture } from \"../../utils\";\n\ntype ZoomUniforms = {\n  center: [number, number],\n  clampBounds: boolean,\n  amount: number,\n  bgSampler: PIXI.Texture\n}\n\nexport class ZoomFilter extends CustomFilter<ZoomUniforms> {\n  constructor(center: [number, number], amount: number = 0, clampBounds: boolean = false, bg: PIXI.TextureSource | PIXI.ColorSource = \"transparent\") {\n    const bgTexture = coerceTexture(bg) ?? createColorTexture(\"transparent\");\n\n    super(undefined, frag, {\n      center,\n      amount,\n      clampBounds,\n      bgSampler: bgTexture\n    });\n  }\n}", "import { CustomFilter } from './CustomFilter';\nimport { FireDissolveFilter } from './FireDissolve/FireDissolveFilter';\nimport { DiamondTransitionFilter } from './DiamondTransition/DiamondTransitionFilter';\nimport { TextureWipeFilter } from './TextureWipe/TextureWipeFilter';\nimport { FadeTransitionFilter } from './FadeTransition/FadeTransitionFilter';\nimport { BilinearWipeFilter } from './BilinearWipe/BilinearWipeFilter';\nimport { LinearWipeFilter } from \"./LinearWipe/LinearWipeFilter\";\nimport { ClockWipeFilter } from './ClockWipe/ClockWipeFilter';\nimport { SpotlightWipeFilter } from './SpotlightWipe/SpotlightWipeFilter';\nimport { RadialWipeFilter } from './RadialWipe/RadialWipeFilter';\nimport { ChromaKeyFilter } from './ChromaKey/ChromaKeyFilter';\nimport { TextureSwapFilter } from './TextureSwap/TextureSwapFilter';\nimport { MeltFilter } from \"./Melt/MeltFilter\";\nimport { AngularWipeFilter } from './AngularWipe/AngularWipeFilter';\nimport { WaveWipeFilter } from './WaveWipe/WaveWipeFilter';\nimport { InvertFilter } from \"./Invert/InvertFilter\";\nimport { SpiralShutterFilter } from './SpiralShutter/SpiralShutterFilter';\nimport { SpiralWipeFilter } from './SpiralWipe/SpiralWipeFilter';\nimport { HueShiftFilter } from './HueShift/HueShiftFilter';\nimport { BarWipeFilter } from \"./BarWipe/BarWipeFilter\";\nimport { ZoomFilter } from './Zoom/ZoomFilter';\n\n\nexport {\n  CustomFilter,\n  FireDissolveFilter,\n  DiamondTransitionFilter,\n  TextureWipeFilter,\n  FadeTransitionFilter,\n  BilinearWipeFilter,\n  LinearWipeFilter,\n  ClockWipeFilter,\n  SpotlightWipeFilter,\n  RadialWipeFilter,\n  ChromaKeyFilter,\n  TextureSwapFilter,\n  MeltFilter,\n  AngularWipeFilter,\n  WaveWipeFilter,\n  SpiralShutterFilter,\n  InvertFilter,\n  SpiralWipeFilter,\n  HueShiftFilter,\n  BarWipeFilter,\n  ZoomFilter\n}\n\nexport const filters = {\n  CustomFilter,\n  FireDissolveFilter,\n  DiamondTransitionFilter,\n  TextureWipeFilter,\n  FadeTransitionFilter,\n\n  LinearWipeFilter,\n  BilinearWipeFilter,\n  ClockWipeFilter,\n  SpotlightWipeFilter,\n  RadialWipeFilter,\n  ChromaKeyFilter,\n  TextureSwapFilter,\n  MeltFilter,\n  AngularWipeFilter,\n  WaveWipeFilter,\n  InvertFilter,\n  SpiralWipeFilter,\n  SpiralShutterFilter,\n  HueShiftFilter,\n  BarWipeFilter,\n  ZoomFilter\n};\n", "import { localize } from \"../utils\";\n\n// #region Functions (13)\n\nfunction drawingType(drawing: DrawingDocument) {\n  switch (drawing.shape.type) {\n    case \"r\":\n      return \"RECTANGLE\";\n    case \"c\":\n      return \"CIRCLE\";\n    case \"p\":\n      return \"POLYGON\";\n    case \"e\":\n      return \"ELLIPSE\";\n    default:\n      return \"UNKNOWN\";\n  }\n}\n\nexport function generateBilinearDirectionSelectOptions(): { [x: string]: string } {\n  return {\n    \"horizontal\": \"BATTLETRANSITIONS.DIRECTIONS.HORIZONTAL\",\n    \"vertical\": \"BATTLETRANSITIONS.DIRECTIONS.VERTICAL\",\n    \"topleft\": \"BATTLETRANSITIONS.DIRECTIONS.TOPLEFT\",\n    \"topright\": \"BATTLETRANSITIONS.DIRECTIONS.TOPRIGHT\"\n  }\n}\n\nexport function generateClockDirectionSelectOptions(): { [x: string]: string } {\n  return {\n    \"clockwise\": \"BATTLETRANSITIONS.DIRECTIONS.CLOCKWISE\",\n    \"counterclockwise\": \"BATTLETRANSITIONS.DIRECTIONS.COUNTERCLOCKWISE\"\n  }\n}\n\nexport function generateDrawingSelectOptions(scene: Scene): { [x: string]: string } {\n  return scene ? Object.fromEntries(scene.drawings.contents.map(drawing => [drawing.uuid, localize(`BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.DRAWING.SHAPES.${drawingType(drawing)}`)])) : {};\n}\n\nexport function generateDualStyleSelectOptions(): { [x: string]: string } {\n  return {\n    \"overlay\": `BATTLETRANSITIONS.SCENECONFIG.COMMON.DUALSTYLE.OVERLAY`,\n    \"scene\": `BATTLETRANSITIONS.SCENECONFIG.COMMON.DUALSTYLE.SCENE`,\n    \"both\": `BATTLETRANSITIONS.SCENECONFIG.COMMON.DUALSTYLE.BOTH`\n  }\n}\n\nexport function generateEasingSelectOptions(): { [x: string]: string } {\n  return {\n    \"none\": \"BATTLETRANSITIONS.EASINGS.NONE\",\n    \"power1in\": \"BATTLETRANSITIONS.EASINGS.POWER1IN\",\n    \"power1out\": \"BATTLETRANSITIONS.EASINGS.POWER1OUT\",\n    \"power1inout\": \"BATTLETRANSITIONS.EASINGS.POWER1INOUT\",\n    \"power2in\": \"BATTLETRANSITIONS.EASINGS.POWER2IN\",\n    \"power2out\": \"BATTLETRANSITIONS.EASINGS.POWER2OUT\",\n    \"power2inout\": \"BATTLETRANSITIONS.EASINGS.POWER2INOUT\",\n    \"power3in\": \"BATTLETRANSITIONS.EASINGS.POWER3IN\",\n    \"power3out\": \"BATTLETRANSITIONS.EASINGS.POWER3OUT\",\n    \"power3inout\": \"BATTLETRANSITIONS.EASINGS.POWER3INOUT\",\n    \"power4in\": \"BATTLETRANSITIONS.EASINGS.POWER4IN\",\n    \"power4out\": \"BATTLETRANSITIONS.EASINGS.POWER4OUT\",\n    \"power4inout\": \"BATTLETRANSITIONS.EASINGS.POWER4INOUT\",\n    \"backin\": \"BATTLETRANSITIONS.EASINGS.BACKIN\",\n    \"backout\": \"BATTLETRANSITIONS.EASINGS.BACKOUT\",\n    \"backinout\": \"BATTLETRANSITIONS.EASINGS.BACKINOUT\",\n    \"bouncein\": \"BATTLETRANSITIONS.EASINGS.BOUNCEIN\",\n    \"bounceout\": \"BATTLETRANSITIONS.EASINGS.BOUNCEOUT\",\n    \"bounceinout\": \"BATTLETRANSITIONS.EASINGS.BOUNCEINOUT\",\n    \"circin\": \"BATTLETRANSITIONS.EASINGS.CIRCIN\",\n    \"circout\": \"BATTLETRANSITIONS.EASINGS.CIRCOUT\",\n    \"circinout\": \"BATTLETRANSITIONS.EASINGS.CIRCINOUT\",\n    \"elasticin\": \"BATTLETRANSITIONS.EASINGS.ELASTICIN\",\n    \"elasticout\": \"BATTLETRANSITIONS.EASINGS.ELASTICOUT\",\n    \"elasticinout\": \"BATTLETRANSITIONS.EASINGS.ELASTICINOUT\",\n    \"expoin\": \"BATTLETRANSITIONS.EASINGS.EXPOIN\",\n    \"expoout\": \"BATTLETRANSITIONS.EASINGS.EXPOOUT\",\n    \"expoinout\": \"BATTLETRANSITIONS.EASINGS.EXPOINOUT\",\n    \"sinein\": \"BATTLETRANSITIONS.EASINGS.SINEIN\",\n    \"sineout\": \"BATTLETRANSITIONS.EASINGS.SINEOUT\",\n    \"sineinout\": \"BATTLETRANSITIONS.EASINGS.SINEINOUT\"\n  }\n}\n\nexport function generateFontSelectOptions(): { [x: string]: string } {\n  return Object.fromEntries(FontConfig.getAvailableFonts().map(font => [font, font]));\n}\n\nexport function generateLinearDirectionSelectOptions(): { [x: string]: string } {\n  return {\n    \"top\": \"BATTLETRANSITIONS.DIRECTIONS.TOP\",\n    \"left\": \"BATTLETRANSITIONS.DIRECTIONS.LEFT\",\n    \"right\": \"BATTLETRANSITIONS.DIRECTIONS.RIGHT\",\n    \"bottom\": \"BATTLETRANSITIONS.DIRECTIONS.BOTTOM\",\n    \"topleft\": \"BATTLETRANSITIONS.DIRECTIONS.TOPLEFT\",\n    \"topright\": \"BATTLETRANSITIONS.DIRECTIONS.TOPRIGHT\",\n    \"bottomleft\": \"BATTLETRANSITIONS.DIRECTIONS.BOTTOMLEFT\",\n    \"bottomright\": \"BATTLETRANSITIONS.DIRECTIONS.BOTTOMRIGHT\"\n  }\n}\n\nexport function generateNoteSelectOptions(scene: Scene): { [x: string]: string } {\n  return scene ? Object.fromEntries(scene.notes.contents.map(note => [note.uuid, note.entry?.name ?? \"\"])) : {};\n}\n\nexport function generateRadialDirectionSelectOptions(): { [x: string]: string } {\n  return {\n    \"inside\": \"BATTLETRANSITIONS.DIRECTIONS.INSIDE\",\n    \"outside\": \"BATTLETRANSITIONS.DIRECTIONS.OUTSIDE\"\n  }\n}\n\nexport function generateTargetTypeSelectOptions(oldScene?: Scene, newScene?: Scene) {\n\n  const oldHasTokens = !!oldScene?.tokens.contents.length;\n  const oldHasTiles = !!oldScene?.tiles.contents.length;\n  const oldHasNotes = !!oldScene?.notes.contents.length;\n  const oldHasDrawings = !!oldScene?.drawings.contents.length;\n\n  const newHasTokens = !!newScene?.tokens.contents.length;\n  const newHasTiles = !!newScene?.tiles.contents.length;\n  const newHasNotes = !!newScene?.notes.contents.length;\n  const newHasDrawings = !!newScene?.drawings.contents.length;\n\n  return {\n    targetTypeSelect: {\n      point: \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.POINT.LABEL\",\n      ...(oldScene ? {} : { prompt: \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.PROMPT.LABEL\" }),\n      ...(oldHasTokens ? { oldtoken: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TOKEN.CURRENTSCENE.LABEL\", { scene: oldScene.name }) } : {}),\n      ...(oldHasTiles ? { oldtile: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TILE.CURRENTSCENE.LABEL\", { scene: oldScene.name }) } : {}),\n      ...(oldHasNotes ? { oldnote: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.NOTE.CURRENTSCENE.LABEL\", { scene: oldScene.name }) } : {}),\n      ...(oldHasDrawings ? { olddrawing: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.DRAWING.CURRENTSCENE.LABEL\", { scene: oldScene.name }) } : {}),\n      ...(newHasTokens ? { newtoken: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TOKEN.NEWSCENE.LABEL\", { scene: newScene.name }) } : {}),\n      ...(newHasTiles ? { newtile: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TILE.NEWSCENE.LABEL\", { scene: newScene.name }) } : {}),\n      ...(newHasNotes ? { newnote: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.NOTE.NEWSCENE.LABEL\", { scene: newScene.name }) } : {}),\n      ...(newHasDrawings ? { newdrawing: localize(\"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.DRAWING.NEWSCENE.LABEL\", { scene: newScene.name }) } : {})\n    },\n    oldTokenSelect: oldScene ? generateTokenSelectOptions(oldScene) : {},\n    oldTileSelect: oldScene ? generateTileSelectOptions(oldScene) : {},\n    oldNoteSelect: oldScene ? generateNoteSelectOptions(oldScene) : {},\n    oldDrawingSelect: oldScene ? generateDrawingSelectOptions(oldScene) : {},\n    newTokenSelect: newScene ? generateTokenSelectOptions(newScene) : {},\n    newTileSelect: newScene ? generateTileSelectOptions(newScene) : {},\n    newNoteSelect: newScene ? generateNoteSelectOptions(newScene) : {},\n    newDrawingSelect: newScene ? generateDrawingSelectOptions(newScene) : {},\n    oldHasTokens, oldHasTiles, oldHasNotes, oldHasDrawings,\n    newHasTokens, newHasTiles, newHasNotes, newHasDrawings\n  }\n}\n\n\nexport function generateTileSelectOptions(scene: Scene): { [x: string]: string } {\n  return scene ? Object.fromEntries(scene.tiles.contents.map(tile => [tile.uuid, tile.texture.src as string])) : {};\n}\n\nexport function generateTokenSelectOptions(scene: Scene): { [x: string]: string } {\n  return scene ? Object.fromEntries(scene.tokens.contents.map(token => [token.uuid, token.name])) : {};\n}\n\n// #endregion Functions (13)\n", "import { AngularWipeConfiguration } from './types';\nimport { TransitionStep } from './TransitionStep';\nimport { createColorTexture, parseConfigurationFormElements } from '../utils';\nimport { AngularWipeFilter } from '../filters';\nimport { generateEasingSelectOptions } from './selectOptions';\n\nexport class AngularWipeStep extends TransitionStep<AngularWipeConfiguration> {\n  // #region Properties (9)\n\n  #filter: AngularWipeFilter | null = null;\n\n  public static DefaultSettings: AngularWipeConfiguration = {\n    id: \"\",\n    type: \"angularwipe\",\n    duration: 1000,\n    easing: \"none\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon angular-wipe fa-fw fas'></i>\"\n  public static key = \"angularwipe\";\n  public static name = \"ANGULARWIPE\";\n  public static reversible = true;\n  public static template = \"angularwipe-config\";\n\n  // #endregion Properties (9)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: AngularWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${AngularWipeStep.template}.hbs`, {\n      ...AngularWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions()\n    });\n  }\n\n  public static from(config: AngularWipeConfiguration): AngularWipeStep\n  public static from(form: HTMLFormElement): AngularWipeStep\n  public static from(form: JQuery<HTMLFormElement>): AngularWipeStep\n  public static from(arg: unknown): AngularWipeStep {\n    if (arg instanceof HTMLFormElement) return AngularWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return AngularWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    return new AngularWipeStep(arg as AngularWipeConfiguration);\n  }\n\n  public static fromFormElement(formElement: HTMLFormElement): AngularWipeStep {\n    const backgroundImage = $(formElement).find(\"#backgroundImage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements($(formElement) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"easing\", \"backgroundType\", \"backgroundColor\", \"label\");\n    return new AngularWipeStep({\n      ...AngularWipeStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    });\n  }\n\n  public static getDuration(config: AngularWipeConfiguration): number { return { ...AngularWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (2)\n\n  public async execute(container: PIXI.Container): Promise<void> {\n    const config = {\n      ...AngularWipeStep.DefaultSettings,\n      ...this.config\n    }\n    const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new AngularWipeFilter(background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n\n    await this.simpleTween(filter);\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof AngularWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (2)\n}\n", "import { BarWipeFilter } from \"../filters\";\nimport { PreparedTransitionHash, TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { BarWipeConfiguration } from \"./types\";\nimport { generateEasingSelectOptions } from './selectOptions';\n\nexport class BarWipeStep extends TransitionStep<BarWipeConfiguration> {\n  // #region Properties (9)\n\n  #filter: BarWipeFilter | null = null;\n\n  public static DefaultSettings: BarWipeConfiguration = {\n    id: \"\",\n    type: \"barwipe\",\n    duration: 1000,\n    easing: \"none\",\n    direction: \"horizontal\",\n    version: \"1.1.0\",\n    backgroundType: \"color\",\n    backgroundColor: \"#00000000\",\n    backgroundImage: \"\",\n    bgSizingMode: \"stretch\",\n    bars: 4\n  }\n\n  public static category: string = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon: string = `<i class=\"fas fa-fw fa-bars\"></i>`;\n  public static key: string = \"barwipe\";\n  public static name: string = \"BARWIPE\";\n  public static reversible: boolean = true;\n  public static template: string = \"barwipe-config\";\n\n  // #endregion Properties (9)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: BarWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${BarWipeStep.template}.hbs`, {\n      ...BarWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      directionSelect: {\n        horizontal: \"BATTLETRANSITIONS.DIRECTIONS.HORIZONTAL\",\n        vertical: \"BATTLETRANSITIONS.DIRECTIONS.VERTICAL\"\n      }\n    })\n  }\n\n  public static from(config: BarWipeConfiguration): BarWipeStep\n  public static from(form: HTMLFormElement): BarWipeStep\n  public static from(form: JQuery<HTMLFormElement>): BarWipeStep\n  public static from(arg: unknown): BarWipeStep {\n    if (arg instanceof HTMLFormElement) return BarWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if ((arg as any)[0] instanceof HTMLFormElement) return BarWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new BarWipeStep(arg as BarWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): BarWipeStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const backgroundImage = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n    return new BarWipeStep({\n      ...BarWipeStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"bars\", \"direction\", \"easing\", \"backgroundType\", \"backgroundColor\", \"label\"),\n      serializedTexture: backgroundImage\n    })\n  }\n\n  public static getDuration(config: BarWipeConfiguration): number { return { ...BarWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (2)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, preparedSequence: PreparedTransitionHash): Promise<void> {\n    const config: BarWipeConfiguration = {\n      ...BarWipeStep.DefaultSettings,\n      ...this.config\n    }\n\n    const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n\n    const filter = new BarWipeFilter(config.direction, config.bars, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof BarWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (2)\n}", "import { BilinearWipeFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { BilinearWipeConfiguration } from \"./types\";\nimport { generateBilinearDirectionSelectOptions, generateEasingSelectOptions, generateRadialDirectionSelectOptions } from './selectOptions';\n\nexport class BilinearWipeStep extends TransitionStep<BilinearWipeConfiguration> {\n  // #region Properties (9)\n\n  #filter: BilinearWipeFilter | null = null;\n\n  public static DefaultSettings: BilinearWipeConfiguration = {\n    id: \"\",\n    type: \"bilinearwipe\",\n    duration: 1000,\n    easing: \"none\",\n    radial: \"inside\",\n    direction: \"vertical\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = `<i class=\"fas fa-fw fa-arrows-left-right-to-line\"></i>`\n  public static key = \"bilinearwipe\";\n  public static name = \"BILINEARWIPE\";\n  public static reversible: boolean = true;\n  public static template = \"bilinearwipe-config\";\n\n  // #endregion Properties (9)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: BilinearWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${BilinearWipeStep.template}.hbs`, {\n      ...BilinearWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      directionSelect: generateBilinearDirectionSelectOptions(),\n      radialSelect: generateRadialDirectionSelectOptions()\n    });\n  }\n\n  public static from(config: BilinearWipeConfiguration): BilinearWipeStep\n  public static from(form: JQuery<HTMLFormElement>): BilinearWipeStep\n  public static from(form: HTMLFormElement): BilinearWipeStep\n  public static from(arg: unknown): BilinearWipeStep {\n    if (arg instanceof HTMLFormElement) return BilinearWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return BilinearWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new BilinearWipeStep(arg as BilinearWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): BilinearWipeStep {\n    const backgroundImage = $(form).find(\"#backgroundImage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements<BilinearWipeConfiguration>($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"radial\", \"easing\", \"backgroundType\", \"backgroundColor\", \"label\")\n    return new BilinearWipeStep({\n      ...BilinearWipeStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    });\n  }\n\n  public static getDuration(config: BilinearWipeConfiguration): number { return { ...BilinearWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (2)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, _sequence: TransitionSequence): Promise<void> {\n    const config: BilinearWipeConfiguration = {\n      ...BilinearWipeStep.DefaultSettings,\n      ...this.config\n    }\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new BilinearWipeFilter(config.direction, config.radial, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter)\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof BilinearWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (2)\n}", "import { TransitionSequence } from '../interfaces';\nimport { getActors, getCompendiumFromUUID, isValidFontSize, parseConfigurationFormElements, parseFontSize, wait } from '../utils';\nimport { generateFontSelectOptions } from './selectOptions';\nimport { TransitionStep } from './TransitionStep';\nimport { BossSplashConfiguration } from './types';\n\ntype InputEvent = JQuery.TriggeredEvent<HTMLElement, undefined, HTMLElement, HTMLElement>;\n\nfunction getSplashSetting<t>(key: string): t {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  return (game.settings as any)?.get(\"boss-splash\", key) as t;\n}\n\nexport class BossSplashStep extends TransitionStep<BossSplashConfiguration> {\n\n  public static get DefaultSettings(): BossSplashConfiguration {\n    return {\n      id: \"\",\n      type: \"bosssplash\",\n      version: \"1.1.0\",\n      duration: 5000,\n      actor: \"\",\n\n      // Get defaults for Boss Splash Screen global settings\n      topColor: getSplashSetting<string>(\"colorFirst\"),\n      midColor: getSplashSetting<string>(\"colorSecond\"),\n      botColor: getSplashSetting<string>(\"colorThird\"),\n\n      fontColor: getSplashSetting<string>(\"colorFont\"),\n      fontShadow: getSplashSetting<string>(\"colorShadow\"),\n      subColor: getSplashSetting<string>(\"subColorFont\"),\n      subShadow: getSplashSetting<string>(\"subColorShadow\"),\n      sound: getSplashSetting<string>(\"bossSound\"),\n      font: getSplashSetting<string>(\"fontFamily\"),\n      fontSize: getSplashSetting<string>(\"fontSize\"),\n\n      subSize: getSplashSetting<string>(\"subFontSize\"),\n      message: getSplashSetting<string>(\"splashMessage\") === \"{{actor.name}}\" ? \"\" : getSplashSetting<string>(\"splashMessage\"),\n      subText: getSplashSetting<string>(\"subText\"),\n      animationDelay: getSplashSetting<number>(\"animationDelay\") * 1000,\n      animationDuration: getSplashSetting<number>(\"animationDuration\") * 1000,\n    };\n  }\n\n\n  public static get hidden(): boolean { return !(game.modules?.get(\"boss-splash\")?.active); }\n  public static key = \"bosssplash\";\n  public static name = \"BOSSSPLASH\";\n  public static template = \"bosssplash-config\";\n  public static category = \"effect\";\n  public static icon = \"<i class='bt-icon boss-splash fa-fw fas'></i>\"\n\n\n  public static RenderTemplate(config?: BossSplashConfiguration): Promise<string> {\n    const actors = getActors().sort(sortActors).map(actor => ({\n      ...formatActor(actor),\n      selected: config?.actor === actor.uuid\n    }));\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${BossSplashStep.template}.hbs`, {\n      ...BossSplashStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n\n      fontSelect: generateFontSelectOptions(),\n      actors\n    });\n  }\n\n  public static from(config: BossSplashConfiguration): BossSplashStep\n  public static from(form: HTMLFormElement): BossSplashStep\n  public static from(form: JQuery<HTMLFormElement>): BossSplashStep\n  public static from(arg: unknown): BossSplashStep {\n    if (arg instanceof HTMLFormElement) return BossSplashStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-unsafe-member-access\n    else if ((arg as any)[0] instanceof HTMLElement) return BossSplashStep.fromFormElement((arg as any)[0]);\n    else return new BossSplashStep({\n      ...BossSplashStep.DefaultSettings,\n      ...(arg as BossSplashConfiguration)\n    });\n  }\n\n\n  // public static validateForm(elem: HTMLElement | JQuery<HTMLElement>): boolean { return true; }\n  public static validateForm(elem: HTMLElement | JQuery<HTMLElement>): boolean {\n    const html = $(elem);\n    if (!isValidFontSize(html.find(\"#fontSize\").val() as string)) return false;\n    if (!isValidFontSize(html.find(\"#subSize\").val() as string)) return false;\n    return true;\n  }\n\n\n  public static addEventListeners(element: HTMLElement | JQuery<HTMLElement>): void {\n    const html = $(element);\n\n    html.find(\"#fontSize\").on(\"input\", foundry.utils.debounce((e: InputEvent) => {\n      $(e.currentTarget).val(parseFontSize($(e.currentTarget).val() as string || \"\"));\n    }, 250));\n\n    html.find(\"#subSize\").on(\"input\", foundry.utils.debounce((e: InputEvent) => {\n      $(e.currentTarget).val(parseFontSize($(e.currentTarget).val() as string || \"\"));\n    }, 250));\n\n    // Set font faces\n    html.find(\"#font option\").each((index, element) => {\n      const val = $(element).val() as string;\n      $(element).css(\"font-family\", val);\n    });\n\n    html.find(\"#font\").on(\"input\", e => {\n      $(e.currentTarget).css(\"font-family\", $(e.currentTarget).val() as string);\n    })\n\n  }\n\n  public static fromFormElement(form: HTMLFormElement): BossSplashStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const sound = elem.find(\"#sound\").val() as string ?? \"\";\n\n    const fontSize = parseFontSize(elem.find(\"#fontSize\").val() as string);\n    const subSize = parseFontSize(elem.find(\"#subSize\").val() as string);\n\n    return new BossSplashStep({\n      ...BossSplashStep.DefaultSettings,\n      sound,\n      ...parseConfigurationFormElements(elem, \"id\", \"actor\", \"message\", \"subText\", \"duration\", \"animationDelay\", \"animationDuration\", \"topColor\", \"midColor\", \"botColor\", \"fontColor\", \"fontShadow\", \"subColor\", \"subShadow\", \"font\", \"label\"),\n      fontSize: isValidFontSize(fontSize) ? fontSize : BossSplashStep.DefaultSettings.fontSize,\n      subSize: isValidFontSize(subSize) ? subSize : BossSplashStep.DefaultSettings.subSize\n    });\n  }\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: BossSplashConfiguration = {\n      ...BossSplashStep.DefaultSettings,\n      ...this.config\n    };\n\n    // If we triggered the transition, trigger the splash\n    if (sequence.caller === game.user?.id) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      void (game as any).bossSplash.splashBoss(coerceConfig(config));\n    }\n\n    await wait(config.duration + config.animationDelay);\n  }\n}\n\n\nfunction coerceConfig(config: BossSplashConfiguration): { [x: string]: unknown } {\n\n  const actor = fromUuidSync(config.actor) as Actor | null;\n\n  return {\n    sound: config.sound,\n    colorFirst: config.topColor,\n    colorSecond: config.midColor,\n    colorThird: config.botColor,\n    colorFont: config.fontColor,\n    subColorFont: config.subColor,\n    colorShadow: config.fontShadow,\n    subColorShadow: config.subShadow,\n    message: config.message ? config.message : actor?.name ?? \"\",\n    subText: config.subText,\n    fontFamily: config.font,\n    fontSize: config.fontSize,\n    subFontSize: config.subSize,\n    timer: config.duration,\n    duration: config.duration,\n    animationDelay: config.animationDelay,\n    actorImg: actor?.img ?? \"\"\n  }\n}\n\n\nfunction formatActor(actor: Actor): { name: string, uuid: string, pack: string, type: string, selected: boolean } {\n  const retVal = {\n    name: actor.name,\n    uuid: actor.uuid,\n    pack: \"\",\n    type: actor.type,\n    selected: false\n  };\n\n  if (game.packs) {\n    const parsed = actor.uuid.split(\".\");\n    if (parsed[0] === \"Compendium\") {\n      const packId = parsed.slice(1, 3).join(\".\");\n      const pack = game.packs.get(packId);\n      if (pack?.documentName === \"Actor\")\n        retVal.pack = pack.title\n    }\n  }\n  return retVal;\n}\n\nfunction sortActors(first: Actor, second: Actor): number {\n  const firstPack = getCompendiumFromUUID(first.uuid);\n  const secondPack = getCompendiumFromUUID(second.uuid);\n\n  if (firstPack !== secondPack) return firstPack.localeCompare(secondPack);\n  return first.name.localeCompare(second.name);\n}\n", "import { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { removeFilterFromScene } from '../transitionUtils';\nimport { TransitionStep } from './TransitionStep';\nimport { ClearEffectsConfiguration } from './types';\n\nexport class ClearEffectsStep extends TransitionStep<ClearEffectsConfiguration> {\n  public static DefaultSettings: ClearEffectsConfiguration = {\n    id: \"\",\n    type: \"cleareffects\",\n    version: \"1.1.0\",\n    applyToOverlay: true,\n    applyToScene: false\n  }\n\n  public static hidden: boolean = false;\n  public static key = \"cleareffects\";\n  public static name = \"CLEAREFFECTS\";\n  public static skipConfig = true;\n  public static icon = `<i class=\"fas fa-fw fa-eraser\"></i>`;\n  public static category = \"technical\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static from(arg: unknown) {\n    return new ClearEffectsStep({\n      ...ClearEffectsStep.DefaultSettings,\n      id: foundry.utils.randomID()\n    });\n  }\n\n  #sceneFilter: PIXI.Filter | null = null;\n\n  public teardown(): void {\n    if (this.#sceneFilter) {\n      if (Array.isArray(canvas?.stage?.filters) && canvas.stage.filters.includes(this.#sceneFilter)) canvas.stage.filters.splice(canvas.stage.filters.indexOf(this.#sceneFilter), 1);\n      this.#sceneFilter.destroy();\n      this.#sceneFilter = null;\n    }\n  }\n\n  public execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): void {\n\n    const config: ClearEffectsConfiguration = {\n      ...ClearEffectsStep.DefaultSettings,\n      ...this.config\n    }\n\n    // Apply to overlay\n    if (config.applyToOverlay) {\n      const overlayChildren = [...prepared.overlay];\n      for (const child of overlayChildren) {\n        if (Array.isArray(child.filters)) {\n          for (const filter of child.filters) {\n            if (child.filters.includes(filter)) child.filters.splice(child.filters.indexOf(filter), 1);\n            filter.destroy();\n          }\n        }\n      }\n    }\n\n    // Apply to scene\n    if (config.applyToScene && canvas?.environment) {\n      const filters = prepared.prepared.sceneFilters;\n      for (const filter of filters) {\n        removeFilterFromScene(filter);\n      }\n    }\n  }\n}", "import { ClockWipeFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { Easing } from \"../types\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { ClockWipeConfiguration } from \"./types\";\nimport { generateClockDirectionSelectOptions, generateEasingSelectOptions } from './selectOptions';\n\nexport class ClockWipeStep extends TransitionStep<ClockWipeConfiguration> {\n  // #region Properties (9)\n\n  #filter: ClockWipeFilter | null = null;\n\n  public static DefaultSettings: ClockWipeConfiguration = {\n    id: \"\",\n    type: \"clockwipe\",\n    duration: 1000,\n    easing: \"none\" as Easing,\n    clockDirection: \"clockwise\",\n    direction: \"top\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon clock-wipe fa-fw fas'></i>\"\n  public static key = \"clockwipe\"\n  public static name = \"CLOCKWIPE\";\n  public static reversible: boolean = true;\n  public static template = \"clockwipe-config\";\n\n  // #endregion Properties (9)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: ClockWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${ClockWipeStep.template}.hbs`, {\n      ...ClockWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      clockDirectionSelect: generateClockDirectionSelectOptions(),\n      directionSelect: {\n        top: \"BATTLETRANSITIONS.DIRECTIONS.TOP\",\n        left: \"BATTLETRANSITIONS.DIRECTIONS.LEFT\",\n        right: \"BATTLETRANSITIONS.DIRECTIONS.RIGHT\",\n        bottom: \"BATTLETRANSITIONS.DIRECTIONS.BOTTOM\"\n      }\n    });\n  }\n\n  public static from(config: ClockWipeConfiguration): ClockWipeStep\n  public static from(form: HTMLFormElement): ClockWipeStep\n  public static from(form: JQuery<HTMLFormElement>): ClockWipeStep\n  public static from(arg: unknown): ClockWipeStep {\n    if (arg instanceof HTMLFormElement) return ClockWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return ClockWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new ClockWipeStep(arg as ClockWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): ClockWipeStep {\n    const backgroundImage = $(form).find(\"#backgroundImage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"direction\", \"clockdirection\", \"easing\", \"backgroundType\", \"backgroundColor\", \"label\");\n\n    return new ClockWipeStep({\n      ...ClockWipeStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    })\n  }\n\n  public static getDuration(config: ClockWipeConfiguration): number { return { ...ClockWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (2)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: ClockWipeConfiguration = {\n      ...ClockWipeStep.DefaultSettings,\n      ...this.config\n    }\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new ClockWipeFilter(config.clockDirection, config.direction, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof ClockWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (2)\n}\n", "import { DiamondTransitionFilter } from \"../filters\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { DiamondWipeConfiguration } from \"./types\";\nimport { generateEasingSelectOptions } from './selectOptions';\n\nexport class DiamondWipeStep extends TransitionStep<DiamondWipeConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: DiamondWipeConfiguration = {\n    id: \"\",\n    type: \"diamondwipe\",\n    size: 40,\n    duration: 1000,\n    easing: \"none\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon diamond-wipe fa-fw fas'></i>\"\n  public static key = \"diamondwipe\";\n  public static name = \"DIAMONDWIPE\";\n  public static template = \"diamondwipe-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: DiamondWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${DiamondWipeStep.template}.hbs`, {\n      ...DiamondWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions()\n    });\n  }\n\n  public static from(config: DiamondWipeConfiguration): DiamondWipeStep\n  public static from(form: JQuery<HTMLFormElement>): DiamondWipeStep\n  public static from(form: HTMLFormElement): DiamondWipeStep\n  public static from(arg: unknown): DiamondWipeStep {\n    if (arg instanceof HTMLFormElement) return DiamondWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return DiamondWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new DiamondWipeStep(arg as DiamondWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): DiamondWipeStep {\n    const backgroundImage = $(form).find(\"#backgroundImage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements<DiamondWipeConfiguration>($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"easing\", \"backgroundType\", \"backgroundColor\", \"label\");\n    return new DiamondWipeStep({\n      ...DiamondWipeStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    })\n  }\n\n  public static getDuration(config: DiamondWipeConfiguration): number { return { ...DiamondWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  #filter: DiamondTransitionFilter | null = null;\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof DiamondTransitionFilter) await this.simpleReverse(this.#filter);\n  }\n\n  public async execute(container: PIXI.Container): Promise<void> {\n    const config: DiamondWipeConfiguration = {\n      ...DiamondWipeStep.DefaultSettings,\n      ...this.config\n    }\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new DiamondTransitionFilter(config.size, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { FadeTransitionFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { FadeConfiguration } from \"./types\";\nimport { generateEasingSelectOptions } from './selectOptions';\n\nexport class FadeStep extends TransitionStep<FadeConfiguration> {\n  // #region Properties (9)\n\n  #filter: FadeTransitionFilter | null = null;\n\n  public static DefaultSettings: FadeConfiguration = {\n    id: \"\",\n    type: \"fade\",\n    duration: 1000,\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundColor: \"#00000000\",\n    easing: \"none\"\n  }\n\n  public static category = \"effect\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon fade fa-fw fas'></i>\"\n  public static key = \"fade\";\n  public static name = \"FADE\";\n  public static reversible: boolean = true;\n  public static template = \"fade-config\";\n\n  // #endregion Properties (9)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: FadeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${FadeStep.template}.hbs`, {\n      ...FadeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions()\n    });\n  }\n\n  public static from(config: FadeConfiguration): FadeStep\n  public static from(form: HTMLFormElement): FadeStep\n  public static from(form: JQuery<HTMLFormElement>): FadeStep\n  public static from(arg: unknown): FadeStep {\n    if (arg instanceof HTMLFormElement) return FadeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return FadeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new FadeStep(arg as FadeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): FadeStep {\n    const backgroundImage = $(form).find(\"#backgroundImage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"backgroundType\", \"backgroundColor\", \"easing\", \"label\");\n    return new FadeStep({\n      ...FadeStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    })\n  }\n\n  public static getDuration(config: FadeConfiguration): number { return { ...FadeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (2)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: FadeConfiguration = {\n      ...FadeStep.DefaultSettings,\n      ...this.config\n    }\n    const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new FadeTransitionFilter(background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof FadeTransitionFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (2)\n}", "import { FireDissolveFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { FireDissolveConfiguration } from \"./types\";\nimport { generateEasingSelectOptions } from './selectOptions';\n\nexport class FireDissolveStep extends TransitionStep<FireDissolveConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: FireDissolveConfiguration = {\n    id: \"\",\n    type: \"firedissolve\",\n    duration: 1000,\n    easing: \"none\",\n    burnSize: 1.3,\n    version: \"1.1.0\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon fire-dissolve fa-fw fas'></i>\"\n  public static key = \"firedissolve\";\n  public static name = \"FIREDISSOLVE\";\n  public static template = \"firedissolve-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: FireDissolveConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${FireDissolveStep.template}.hbs`, {\n      ...FireDissolveStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions()\n    });\n  }\n\n  public static from(config: FireDissolveConfiguration): FireDissolveStep\n  public static from(form: JQuery<HTMLFormElement>): FireDissolveStep\n  public static from(form: HTMLFormElement): FireDissolveStep\n  public static from(arg: unknown): FireDissolveStep {\n    if (arg instanceof HTMLFormElement) return FireDissolveStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return FireDissolveStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new FireDissolveStep(arg as FireDissolveConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): FireDissolveStep {\n    const elem = parseConfigurationFormElements<FireDissolveConfiguration>($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"easing\", \"burnSize\", \"label\");\n    return new FireDissolveStep({\n      ...FireDissolveStep.DefaultSettings,\n      ...elem,\n    });\n  }\n\n  public static getDuration(config: FireDissolveConfiguration): number { return { ...FireDissolveStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  #filter: FireDissolveFilter | null = null;\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof FireDissolveFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const filter = new FireDissolveFilter(this.config.burnSize);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { TextureSwapFilter } from \"../filters\";\nimport { PreparedTransitionHash, TransitionSequence } from \"../interfaces\";\nimport { addFilterToScene, removeFilterFromScene } from \"../transitionUtils\";\nimport { createColorTexture, parseConfigurationFormElements, wait } from '../utils';\nimport { generateDualStyleSelectOptions } from \"./selectOptions\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { FlashConfiguration } from \"./types\";\n\nexport class FlashStep extends TransitionStep<FlashConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: FlashConfiguration = {\n    id: \"\",\n    type: \"flash\",\n    duration: 250,\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\",\n    applyToOverlay: true,\n    applyToScene: false\n  }\n\n  public static category = \"effect\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon flash fa-fw fas'></i>\"\n  public static key = \"flash\";\n  public static name = \"FLASH\";\n  public static template = \"flash-config\";\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: FlashConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${FlashStep.template}.hbs`, {\n      ...FlashStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    })\n  }\n\n  public static from(config: FlashConfiguration): FlashStep\n  public static from(form: JQuery<HTMLFormElement>): FlashStep\n  public static from(form: HTMLFormElement): FlashStep\n  public static from(arg: unknown): FlashStep {\n    if (arg instanceof HTMLFormElement) return FlashStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return FlashStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    return new FlashStep(arg as FlashConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): FlashStep {\n    const backgroundImage = $(form).find(\"#backgroundImage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"backgroundType\", \"backgroundColor\", \"label\");\n    return new FlashStep({\n      ...FlashStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    })\n  }\n\n  public static getDuration(config: FlashConfiguration): number { return { ...FlashStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    const config: FlashConfiguration = {\n      ...FlashStep.DefaultSettings,\n      ...this.config\n    };\n    const background = this.config.deserializedTexture ?? createColorTexture(\"tranparent\");\n\n    const promises: Promise<void>[] = [];\n\n    if (config.applyToOverlay) {\n      const filter = new TextureSwapFilter(background.baseTexture);\n      this.addFilter(container, filter);\n      promises.push(wait(config.duration).then(() => { this.removeFilter(container, filter); filter.destroy() }));\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      const filter = new TextureSwapFilter(background.baseTexture);\n      addFilterToScene(filter, prepared.prepared);\n      promises.push(wait(config.duration).then(() => {\n        removeFilterFromScene(filter);\n      }));\n    }\n\n    await Promise.all(promises);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { HueShiftConfiguration } from './types';\nimport { TransitionStep } from './TransitionStep';\nimport { HueShiftFilter } from '../filters';\nimport { parseConfigurationFormElements } from '../utils';\nimport { addFilterToScene, removeFilterFromScene } from '../transitionUtils';\nimport { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { generateDualStyleSelectOptions, generateEasingSelectOptions } from './selectOptions';\n\nexport class HueShiftStep extends TransitionStep<HueShiftConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: HueShiftConfiguration = {\n    id: \"\",\n    type: \"hueshift\",\n    duration: 0,\n    version: \"1.1.0\",\n    maxShift: 0,\n    easing: \"none\",\n    applyToOverlay: true,\n    applyToScene: false\n  };\n  public static category: string = \"effect\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon hue-shift fa-fw fas'></i>\"\n  public static key: string = \"hueshift\";\n  public static name: string = \"HUESHIFT\";\n  public static template: string = \"hueshift-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: HueShiftConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${HueShiftStep.template}.hbs`, {\n      ...HueShiftStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    });\n  }\n\n  public static from(config: HueShiftConfiguration): HueShiftStep\n  public static from(form: JQuery<HTMLFormElement>): HueShiftStep\n  public static from(form: HTMLFormElement): HueShiftStep\n  public static from(arg: unknown): HueShiftStep {\n    if (arg instanceof HTMLFormElement) return HueShiftStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return HueShiftStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    return new HueShiftStep(arg as HueShiftConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): HueShiftStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const maxShift = elem.find(\"#maxShift input[type='number']\").val() as number;\n    const dualStyle = elem.find(\"#dualStyle\").val() as string;\n\n    return new HueShiftStep({\n      ...HueShiftStep.DefaultSettings,\n      maxShift,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"easing\", \"label\"),\n      applyToOverlay: dualStyle === \"overlay\" || dualStyle === \"both\",\n      applyToScene: dualStyle === \"scene\" || dualStyle === \"both\"\n    })\n  }\n\n  public static getDuration(config: HueShiftConfiguration): number { return { ...HueShiftStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  #sceneFilter: PIXI.Filter | null = null;\n\n  public teardown(): Promise<void> | void {\n    if (this.#sceneFilter) removeFilterFromScene(this.#sceneFilter);\n    this.#sceneFilter = null;\n  }\n\n  #filters: HueShiftFilter[] = [];\n  public async reverse(): Promise<void> {\n    const config: HueShiftConfiguration = {\n      ...HueShiftStep.DefaultSettings,\n      ...this.config\n    };\n    await Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      this.#filters.map(filter => TweenMax.to(filter.uniforms, { shift: 0, duration: config.duration / 1000, ease: config.easing }))\n    );\n  }\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    const config: HueShiftConfiguration = {\n      ...HueShiftStep.DefaultSettings,\n      ...this.config\n    };\n\n    const filters: HueShiftFilter[] = [];\n\n    if (config.applyToOverlay) {\n      const filter = new HueShiftFilter(0);\n      this.addFilter(container, filter);\n      filters.push(filter);\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      const filter = new HueShiftFilter(0);\n      addFilterToScene(filter, prepared.prepared);\n      this.#sceneFilter = filter;\n      filters.push(filter);\n\n    }\n\n\n    this.#filters = [...filters];\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n    await Promise.all(filters.map(filter => TweenMax.to(filter.uniforms, { shift: config.maxShift, duration: config.duration / 1000, ease: config.easing ?? \"none\" })));\n  }\n\n  // #endregion Public Methods (1)\n}", "import { InvertFilter } from \"../filters\";\nimport { PreparedTransitionHash, TransitionSequence } from \"../interfaces\";\nimport { addFilterToScene, removeFilterFromScene } from \"../transitionUtils\";\nimport { parseConfigurationFormElements } from \"../utils\";\nimport { generateDualStyleSelectOptions } from \"./selectOptions\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { InvertConfiguration } from \"./types\";\n\nexport class InvertStep extends TransitionStep<InvertConfiguration> {\n  // #region Properties (6)\n\n  public static DefaultSettings: InvertConfiguration = {\n    id: \"\",\n    type: \"invert\",\n    version: \"1.1.0\",\n    applyToOverlay: true,\n    applyToScene: false\n  }\n\n  public static hidden: boolean = false;\n  public static key = \"invert\";\n  public static name = \"INVERT\";\n  public static template = \"invert-config\";\n  public static category = \"effect\";\n  public static icon = \"<i class='bt-icon invert fa-fw fas'></i>\"\n\n  // #endregion Properties (6)\n\n  // #region Public Static Methods (6)\n\n  public static RenderTemplate(config?: InvertConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${InvertStep.template}.hbs`, {\n      ...InvertStep.DefaultSettings,\n      ...(config ? config : {}),\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    })\n  }\n\n  public static from(config: InvertConfiguration): InvertStep\n  public static from(form: JQuery<HTMLFormElement>): InvertStep\n  public static from(form: HTMLFormElement): InvertStep\n  public static from(arg: unknown): InvertStep {\n    if (arg instanceof HTMLFormElement) return InvertStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return InvertStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new InvertStep(arg as InvertConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): InvertStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n\n    const dualStyle = elem.find(\"#dualStyle\").val() as string;\n    return new InvertStep({\n      ...InvertStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...parseConfigurationFormElements(elem, \"id\"),\n      applyToOverlay: dualStyle === \"overlay\" || dualStyle === \"both\",\n      applyToScene: dualStyle === \"scene\" || dualStyle === \"both\"\n    })\n  }\n\n  // #endregion Public Static Methods (6)\n\n  // #region Public Methods (1)\n\n  #sceneFilter: PIXI.Filter | null = null;\n\n  public teardown(): Promise<void> | void {\n    if (this.#sceneFilter) removeFilterFromScene(this.#sceneFilter);\n    this.#sceneFilter = null;\n  }\n\n  public execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): void {\n    const config = {\n      ...InvertStep.DefaultSettings,\n      ...this.config\n    };\n\n    if (config.applyToOverlay) {\n      const filter = new InvertFilter();\n      this.addFilter(container, filter);\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      const filter = new InvertFilter();\n      addFilterToScene(filter, prepared.prepared);\n      this.#sceneFilter = filter;\n    }\n\n\n  }\n\n  // #endregion Public Methods (1)\n}", "import { LinearWipeFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { LinearWipeConfiguration } from \"./types\";\nimport { generateEasingSelectOptions, generateLinearDirectionSelectOptions } from './selectOptions';\n\nexport class LinearWipeStep extends TransitionStep<LinearWipeConfiguration> {\n  // #region Properties (10)\n\n  #filter: LinearWipeFilter | null = null;\n\n  public readonly defaultSettings: Partial<LinearWipeConfiguration> = {\n    duration: 1000\n  }\n\n  public static DefaultSettings: LinearWipeConfiguration = {\n    id: \"\",\n    type: \"linearwipe\",\n    duration: 1000,\n    easing: \"none\",\n    direction: \"left\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = `<i class=\"fas fa-fw fa-arrow-right\"></i>`\n  public static key = \"linearwipe\";\n  public static name = \"LINEARWIPE\";\n  public static reversible: boolean = true;\n  public static template = \"linearwipe-config\";\n\n  // #endregion Properties (10)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: LinearWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${LinearWipeStep.template}.hbs`, {\n      ...LinearWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      directionSelect: generateLinearDirectionSelectOptions()\n    });\n  }\n\n  public static from(config: LinearWipeConfiguration): LinearWipeStep\n  public static from(form: JQuery<HTMLFormElement>): LinearWipeStep\n  public static from(form: HTMLFormElement): LinearWipeStep\n  public static from(arg: unknown): LinearWipeStep {\n    if (arg instanceof HTMLFormElement) return LinearWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return LinearWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new LinearWipeStep(arg as LinearWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): LinearWipeStep {\n    const backgroundImage = $(form).find(\"#backgroundImage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"direction\", \"easing\", \"backgroundType\", \"backgroundColor\", \"label\");\n    return new LinearWipeStep({\n      ...LinearWipeStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    });\n  }\n\n  public static getDuration(config: LinearWipeConfiguration): number { return { ...LinearWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (2)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence) {\n    const config: LinearWipeConfiguration = {\n      ...LinearWipeStep.DefaultSettings,\n      ...this.config\n    }\n    const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new LinearWipeFilter(config.direction, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof LinearWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (2)\n}", "import { TransitionStep } from './TransitionStep';\nimport { LoadingTipConfiguration, LoadingTipSource } from './types';\nimport { deepCopy, parseConfigurationFormElements } from '../utils';\nimport { InvalidRollTableError, InvalidTipLocationError } from '../errors';\nimport { generateFontSelectOptions } from './selectOptions';\n\nlet ACTIVE_TEXT_ELEMENT: PIXI.HTMLText | null = null;\n\nexport class LoadingTipStep extends TransitionStep<LoadingTipConfiguration> {\n  public static DefaultSettings: LoadingTipConfiguration = {\n    id: \"\",\n    type: \"loadingtip\",\n    version: \"1.1.0\",\n    duration: 0,\n    source: \"string\",\n    message: \"Loading\",\n    location: \"bottomcenter\",\n    style: {\n      ...(JSON.parse(JSON.stringify(PIXI.HTMLTextStyle.defaultStyle)) as object),\n      fill: \"#FFFFFF\",\n      dropShadow: true,\n      fontSize: 64\n    }\n  };\n\n\n\n  public static category = \"effect\";\n  public static hidden: boolean = false;\n  public static icon = `<i class=\"fas fa-spinner\"></i>`\n  public static key = \"loadingtip\";\n  public static name = \"LOADINGTIP\";\n  public static template = \"loadingtip-config\";\n\n  public static async RenderTemplate(config?: LoadingTipConfiguration): Promise<string> {\n    const style = styleFromJSON({\n      ...LoadingTipStep.DefaultSettings,\n      ...(config ? config : {})\n    }.style);\n\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${LoadingTipStep.template}.hbs`, {\n      ...LoadingTipStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      sourceSelect: {\n        \"string\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.SOURCETYPE.STRING.LABEL\",\n        \"rolltable\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.SOURCETYPE.ROLLTABLE.LABEL\"\n      },\n      locationSelect: {\n        \"topleft\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.LOCATION.TOPLEFT\",\n        \"topcenter\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.LOCATION.TOPCENTER\",\n        \"topright\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.LOCATION.TOPRIGHT\",\n        \"center\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.LOCATION.CENTER\",\n        \"bottomleft\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.LOCATION.BOTTOMLEFT\",\n        \"bottomcenter\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.LOCATION.BOTTOMCENTER\",\n        \"bottomright\": \"BATTLETRANSITIONS.SCENECONFIG.LOADINGTIP.LOCATION.BOTTOMRIGHT\"\n      },\n      tableSelect: Object.fromEntries(getRollTables().map(table => [table.uuid, table.name])),\n      fontSelect: generateFontSelectOptions(),\n      fontFamily: style.fontFamily,\n      fontSize: style.fontSize,\n      fontColor: style.fill\n    });\n  }\n\n  public static getDuration(config: LoadingTipConfiguration): number {\n    const actual: LoadingTipConfiguration = {\n      ...LoadingTipStep.DefaultSettings,\n      ...config\n    };\n    return actual.duration;\n  }\n\n  public static from(config: LoadingTipConfiguration): LoadingTipStep\n  public static from(form: HTMLFormElement): LoadingTipStep\n  public static from(form: JQuery<HTMLFormElement>): LoadingTipStep\n  public static from(arg: unknown): LoadingTipStep {\n    if (arg instanceof HTMLFormElement) return LoadingTipStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if ((arg as any)[0] instanceof HTMLFormElement) return LoadingTipStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new LoadingTipStep(arg as LoadingTipConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): LoadingTipStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n\n    const source = elem.find(\"#sourceType\").val() as LoadingTipSource;\n    let message: string = \"\";\n    let table: string = \"\";\n    if (source === \"string\") message = elem.find(\"#message\").val() as string;\n    else if (source === \"rolltable\") table = elem.find(\"#table\").val() as string;\n\n    const style = JSON.parse(JSON.stringify(styleFromJSON({\n      ...LoadingTipStep.DefaultSettings.style,\n      fontFamily: elem.find(\"#fontFamily\").val() as string,\n      fontSize: elem.find(\"#fontSize\").val() as number,\n      fill: elem.find(\"#fontColor\").val() as string\n    }))) as object;\n\n\n\n    return new LoadingTipStep({\n      ...LoadingTipStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"location\"),\n      source, message, table,\n      style\n    });\n  }\n\n\n  public execute(container: PIXI.Container): void | Promise<void> {\n    const config: LoadingTipConfiguration = {\n      ...LoadingTipStep.DefaultSettings,\n      ...this.config\n    };\n\n    const style = styleFromJSON(config.style);\n\n    if (!ACTIVE_TEXT_ELEMENT) {\n      ACTIVE_TEXT_ELEMENT = new PIXI.HTMLText(config.message ?? \"\");\n      container.parent.addChild(ACTIVE_TEXT_ELEMENT);\n    }\n    ACTIVE_TEXT_ELEMENT.text = messageFromConfig(config);\n    ACTIVE_TEXT_ELEMENT.style = style;\n\n    const [x, y] = positionFromConfig(config);\n    const anchor = anchorFromConfig(config);\n\n\n    ACTIVE_TEXT_ELEMENT.anchor.x = anchor[0];\n    ACTIVE_TEXT_ELEMENT.anchor.y = anchor[1];\n    ACTIVE_TEXT_ELEMENT.x = x;\n    ACTIVE_TEXT_ELEMENT.y = y;\n\n    if (config.duration) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          this.teardown();\n          resolve();\n        }, config.duration);\n      })\n    }\n\n  }\n\n  // public static addEventListeners(element: HTMLElement | JQuery<HTMLElement>, config?: TransitionConfiguration): void { }\n  public static addEventListeners(element: HTMLElement | JQuery<HTMLElement>): void {\n    const elem = $(element);\n    setMessageSource(elem, elem.find(\"#sourceType\").val() as LoadingTipSource);\n    elem.find(\"#sourceType\").on(\"input\", () => {\n      const source = elem.find(\"#sourceType\").val() as LoadingTipSource;\n      setMessageSource(elem, source);\n      if (source === \"string\") elem.find(\"#table\").removeAttr(\"required\");\n      else if (source === \"rolltable\") elem.find(\"#table\").attr(\"required\", \"true\");\n    });\n  }\n\n  public teardown(): void {\n    if (ACTIVE_TEXT_ELEMENT) {\n      ACTIVE_TEXT_ELEMENT.destroy();\n      ACTIVE_TEXT_ELEMENT = null;\n    }\n  }\n}\n\nfunction styleFromJSON(json: object): PIXI.HTMLTextStyle {\n  const style = new PIXI.HTMLTextStyle();\n  deepCopy(style, json);\n  return style;\n}\n\n\nfunction messageFromConfig(config: LoadingTipConfiguration): string {\n  // Check for UUID\n  if (config.source === \"rolltable\") {\n    if (!config.table) throw new InvalidRollTableError(config.table);\n    const table = fromUuidSync(config.table)\n    if (!(table instanceof RollTable)) throw new InvalidRollTableError(config.table);\n    return table.results.contents[Math.floor(Math.random() * table.results.contents.length)].text;\n  } else {\n    return config.message ?? \"\";\n  }\n}\n\nfunction getVisualRectangle(): Rectangle {\n  return {\n    x: elementRight(\"#controls\"),\n    y: elementBottom(\"#ui-top\"),\n    width: ($(\"#sidebar\").offset() ?? { top: 0, left: 0 }).left - elementRight(\"#controls\"),\n    height: ($(\"#ui-bottom\").offset() ?? { top: 0, left: 0 }).top - elementBottom(\"#ui-top\") - 25\n  }\n}\n\nfunction anchorFromConfig(config: LoadingTipConfiguration): [number, number] {\n  switch (config.location) {\n    case \"topleft\":\n      return [0, 0];\n    case \"topcenter\":\n      return [0.5, 0];\n    case \"topright\":\n      return [1, 0];\n    case \"center\":\n      return [0.5, 0.5];\n    case \"bottomleft\":\n      return [0, 1];\n    case \"bottomcenter\":\n      return [0.5, 1];\n    case \"bottomright\":\n      return [1, 1];\n    default:\n      throw new InvalidTipLocationError(config.location);\n  }\n}\n\nfunction positionFromConfig(config: LoadingTipConfiguration): [number, number] {\n  const viewBox = getVisualRectangle();\n  switch (config.location) {\n    case \"topleft\":\n      return [viewBox.x, viewBox.y];\n    case \"topcenter\":\n      return [window.innerWidth / 2, viewBox.y];\n    case \"topright\":\n      return [viewBox.x + viewBox.width, viewBox.y];\n    case \"bottomleft\":\n      return [viewBox.x, viewBox.y + viewBox.height];\n    case \"bottomcenter\":\n      return [window.innerWidth / 2, viewBox.y + viewBox.height];\n    case \"bottomright\":\n      return [viewBox.x + viewBox.width, viewBox.height + viewBox.y];\n    case \"center\":\n      return [window.innerWidth / 2, window.innerHeight / 2];\n    default:\n      throw new InvalidTipLocationError(config.location);\n  }\n}\n\nfunction elementRight(selector: string): number {\n  return (($(selector).offset() ?? { top: 0, left: 0 }).left ?? 0) + ($(selector).width() as number ?? 0);\n}\n\nfunction elementBottom(selector: string): number {\n  return (($(selector).offset() ?? { top: 0, left: 0 }).top ?? 0) + ($(selector).height() as number ?? 0);\n}\n\nfunction getRollTables(): RollTable[] {\n  return [\n    ...(game?.tables?.contents ?? [])\n  ]\n}\n\nfunction setMessageSource(html: JQuery<HTMLElement>, source: LoadingTipSource) {\n  html.find(\"[data-source-type]\").css(\"display\", \"none\");\n  html.find(`[data-source-type=\"${source}\"]`).css(\"display\", \"block\");\n}", "import { InvalidMacroError } from \"../errors\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { getCompendiumFromUUID, getMacros, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { MacroConfiguration } from \"./types\";\n\nexport class MacroStep extends TransitionStep<MacroConfiguration> {\n  // #region Properties (5)\n\n  public static DefaultSettings: MacroConfiguration = {\n    id: \"\",\n    type: \"macro\",\n    macro: \"\",\n    version: \"1.1.0\"\n  }\n\n  public static hidden: boolean = false;\n  public static key = \"macro\";\n  public static name = \"MACRO\";\n  public static template = \"macro-config\";\n  public static icon = \"<i class='bt-icon macro fa-fw fas'></i>\"\n  public static category = \"technical\";\n\n  // #endregion Properties (5)\n\n  // #region Public Static Methods (6)\n\n  public static RenderTemplate(config?: MacroConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${MacroStep.template}.hbs`, {\n      ...MacroStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      macros: getMacros().sort(sortMacro).map(formatMacro)\n    });\n  }\n\n  public static from(config: MacroConfiguration): MacroStep\n  public static from(form: JQuery<HTMLFormElement>): MacroStep\n  public static from(form: HTMLFormElement): MacroStep\n  public static from(arg: unknown): MacroStep {\n    if (arg instanceof HTMLFormElement) return MacroStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return MacroStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n\n    return new MacroStep(arg as MacroConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): MacroStep {\n    const elem = parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"macro\", \"label\");\n    return new MacroStep({\n      ...MacroStep.DefaultSettings,\n      ...elem\n    });\n  }\n\n  // #endregion Public Static Methods (6)\n\n  // #region Public Methods (1)\n\n  // public readonly defaultSettings: Partial<MacroConfiguration> = {};\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> | void {\n    const config: MacroConfiguration = {\n      ...MacroStep.DefaultSettings,\n      ...this.config\n    }\n    const macro = fromUuidSync(config.macro);\n    if (!(macro instanceof Macro)) throw new InvalidMacroError(config.macro);\n    return macro.execute() as void | Promise<void>\n  }\n\n  // #endregion Public Methods (1)\n}\n\ntype MacroLike = { name: string, uuid: string };\n\nfunction sortMacro(first: MacroLike, second: MacroLike): number {\n  const firstPack = getCompendiumFromUUID(first.uuid);\n  const secondPack = getCompendiumFromUUID(second.uuid);\n\n  if (firstPack !== secondPack) return firstPack.localeCompare(secondPack);\n  return first.name.localeCompare(second.name);\n}\n\nfunction formatMacro(macro: MacroLike): { name: string, uuid: string, pack: string } {\n  const retVal = {\n    name: macro.name,\n    uuid: macro.uuid,\n    pack: \"\"\n  }\n  if (game.packs) {\n    const parsed = macro.uuid.split(\".\");\n    if (parsed[0] === \"Compendium\") {\n      const packId = parsed.slice(1, 3).join(\".\");\n      const pack = game.packs.get(packId);\n      if (pack?.documentName === \"Macro\")\n        retVal.pack = pack.title\n    }\n  }\n  return retVal;\n}", "import { MeltFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { MeltConfiguration } from \"./types\";\nimport { generateEasingSelectOptions } from './selectOptions';\n\nexport class MeltStep extends TransitionStep<MeltConfiguration> {\n  // #region Properties (9)\n\n  #filter: MeltFilter | null = null;\n\n  public static DefaultSettings: MeltConfiguration = {\n    id: \"\",\n    type: \"melt\",\n    duration: 1000,\n    version: \"1.1.0\",\n    easing: \"none\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"warp\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon melt fa-fw fas'></i>\"\n  public static key = \"melt\";\n  public static name = \"MELT\";\n  public static reversible: boolean = true;\n  public static template = \"melt-config\";\n\n  // #endregion Properties (9)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: MeltConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${MeltStep.template}.hbs`, {\n      ...MeltStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions()\n    });\n  }\n\n  public static from(config: MeltConfiguration): MeltStep\n  public static from(form: JQuery<HTMLFormElement>): MeltStep\n  public static from(form: HTMLFormElement): MeltStep\n  public static from(arg: unknown): MeltStep {\n    if (arg instanceof HTMLFormElement) return MeltStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return MeltStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new MeltStep(arg as MeltConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLElement): MeltStep {\n    const backgroundImage = $(form).find(\"#backgroudnimage\").val() as string ?? \"\";\n    const elem = parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"duration\", \"easing\", \"backgroundType\", \"backgroundColor\", \"label\");\n    return new MeltStep({\n      ...MeltStep.DefaultSettings,\n      ...elem,\n      serializedTexture: backgroundImage\n    });\n  }\n\n  public static getDuration(config: MeltConfiguration): number { return { ...MeltStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (2)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new MeltFilter(background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof MeltFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (2)\n}", "/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\nimport { BattleTransition } from \"./BattleTransition\";\nimport { TransitionSequence } from \"./interfaces\";\nimport { StartPlaylistConfiguration, StartPlaylistStep, TransitionConfiguration } from \"./steps\";\nimport { sequenceDuration } from \"./transitionUtils\";\nimport { localize, log, wait } from \"./utils\";\n\nconst TIMEOUT_PERIOD = 3000;\n\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nclass SocketHandler {\n  #socket: any;\n\n  async #execute(id: string) {\n    await BattleTransition.executePreparedSequence(id);\n  }\n\n  async #prepare(sequence: TransitionSequence) {\n    await BattleTransition.prepareSequence(sequence);\n  }\n\n  public async execute(sequence: TransitionConfiguration[]): Promise<void> {\n    try {\n      const id = foundry.utils.randomID();\n\n      const validated = await BattleTransition.validateSequence(sequence);\n      if (validated instanceof Error) throw validated;\n\n      const actual: TransitionSequence = {\n        caller: game.user?.id ?? \"\",\n        id,\n        sequence: validated.map(step => typeof step.id === \"undefined\" ? ({ ...step, id: foundry.utils.randomID() }) : step)\n      };\n\n      // Ensure we have a StartPlaylist step in our sequence\n      if (!sequence.some(step => step.type === \"startplaylist\")) {\n        const step: StartPlaylistConfiguration = {\n          ...StartPlaylistStep.DefaultSettings,\n          ...(new StartPlaylistStep({}).config)\n        }\n        actual.sequence.push(step);\n      }\n\n      const expectedDuration = await sequenceDuration(actual.sequence);\n\n      const users = (game.users?.contents.filter(user => user.active) as User[]) ?? []\n\n      const usersPrepared: User[] = [];\n\n      // Prepare\n      await Promise.any([\n        Promise.all(users.map(user => (this.#socket.executeAsUser(\"transition.prep\", user.id, actual) as Promise<void>).then(() => { usersPrepared.push(user) }))),\n        wait(TIMEOUT_PERIOD)\n      ]);\n\n      if (usersPrepared.length < users.length)\n        ui.notifications?.warn(localize(\"BATTLETRANSITIONS.WARNINGS.PREPARETIMEOUT\"), { console: false });\n\n      // Execute\n      await Promise.any([\n        Promise.all(usersPrepared.map(user => this.#socket.executeAsUser(\"transition.exec\", user.id, actual.id) as Promise<void>)),\n        wait(expectedDuration + TIMEOUT_PERIOD)\n      ]);\n\n    } catch (err) {\n      ui.notifications?.error((err as Error).message, { console: false });\n      console.error(err);\n    }\n  }\n\n  public register(socket: any) {\n    log(\"Registering socket.\");\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    this.#socket = socket;\n\n    socket.register(\"transition.exec\", this.#execute.bind(this));\n    socket.register(\"transition.prep\", this.#prepare.bind(this));\n  }\n}\n\nexport default new SocketHandler();", "import { TransitionStep } from \"../steps\";\nimport { getSortedSteps, getStepClassByKey, localize } from \"../utils\";\n\n// #region Functions (9)\n\nexport function buildIndex(): lunr.Index {\n  const steps = getSortedSteps();\n\n  return lunr(function (this: lunr.Builder) {\n    this.field(\"name\");\n    this.field(\"description\");\n    this.ref(\"key\");\n\n    for (const step of steps) {\n      this.add({\n        name: localize(`BATTLETRANSITIONS.${step.name}.NAME`),\n        description: localize(`BATTLETRANSITIONS.${step.name}.DESCRIPTION`),\n        key: step.key\n      })\n    }\n  })\n}\n\nexport function clearSearchResults() {\n  DO_POSITION_SEARCH_RESULTS = false;\n\n  $(\"#step-search-results\").children().remove();\n  $(\"#step-search-results\").css(\"display\", \"none\");\n  $(\"#clear-search\").css(\"display\", \"none\");\n}\n\nfunction createResultsDiv(): JQuery<HTMLElement> {\n  const div = document.createElement(\"div\");\n  div.setAttribute(\"id\", \"step-search-results\");\n  div.classList.add(\"step-search-results\");\n  document.body.appendChild(div);\n  return $(div);\n}\n\nfunction createSearchResultDiv(step: typeof TransitionStep): HTMLDivElement {\n  const div = document.createElement(\"div\");\n  div.dataset.key = step.key;\n\n  div.innerHTML = localize(`BATTLETRANSITIONS.${step.name}.NAME`);\n  if (step.icon) div.innerHTML = `${step.icon}${div.innerHTML}`;\n  else div.style.paddingLeft = \"calc(1.25em + 12px)\";\n\n  return div;\n}\n\nexport function getSearchResults(term: string): (typeof TransitionStep)[] {\n  const index = buildIndex();\n\n  const results = index.search(term);\n\n  return results.map(res => getStepClassByKey(res.ref)).filter(res => !!res);\n}\n\nexport function handleSearchInput(input: JQuery<HTMLInputElement>, dialog: Dialog | foundry.applications.api.DialogV2, cb: (key: string) => void) {\n  const term = input.val();\n  if (!term || term.length < 3) {\n    hideSearchResults();\n    return;\n  }\n\n  let resultsDiv = $(\"#step-search-results\");\n  if (!resultsDiv || !resultsDiv.length) resultsDiv = createResultsDiv();\n\n  clearSearchResults();\n\n  $(\"#clear-search\").css(\"display\", \"block\");\n\n  const results = getSearchResults(term);\n\n  for (const step of results) {\n    const div = createSearchResultDiv(step);\n    $(div).on(\"click\", () => { cb(step.key); });\n    resultsDiv.append(div);\n  }\n  showSearchResults(input, dialog);\n}\n\nexport function hideSearchResults() {\n  DO_POSITION_SEARCH_RESULTS = false;\n  clearSearchResults();\n  $(\"#clear-search\").css(\"display\", \"none\");\n}\n\nfunction positionSearchResults(target: JQuery<HTMLElement>, dialog: Dialog | foundry.applications.api.DialogV2) {\n  if (!DO_POSITION_SEARCH_RESULTS) return;\n  const resultsDiv = $(\"#step-search-results\");\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (!resultsDiv?.length || !target.length || (dialog instanceof Dialog && dialog.closing) || (foundry.applications?.api?.DialogV2 && dialog instanceof foundry.applications.api.DialogV2 && ((dialog as any).state as number) === -2)) {\n    clearSearchResults();\n    return;\n  }\n\n  resultsDiv.css(\"top\", (target?.offset()?.top ?? 0) + (target?.height() ?? 0) + 8);\n  resultsDiv.css(\"left\", target?.offset()?.left ?? 0);\n\n  resultsDiv.css(\"width\", target?.width() ?? 150);\n\n  requestAnimationFrame(() => { positionSearchResults(target, dialog); })\n}\n\nexport function showSearchResults(target: JQuery<HTMLElement>, dialog: Dialog | foundry.applications.api.DialogV2) {\n  const div = $(\"#step-search-results\")\n  div.css(\"display\", \"block\");\n  DO_POSITION_SEARCH_RESULTS = true;\n\n  positionSearchResults(target, dialog);\n}\n\n// #endregion Functions (9)\n\n// #region Variables (1)\n\nlet DO_POSITION_SEARCH_RESULTS: boolean = false;\n\n// #endregion Variables (1)\n", "import { localize } from \"../utils\";\nimport { clearSearchResults, handleSearchInput } from \"./addStepFunctions\";\nimport { getStepsForCategory } from \"./functions\";\n\n// #region Classes (1)\n\nexport class AddStepDialogV1 {\n  // #region Public Static Methods (1)\n\n  public static async prompt(): Promise<string | null> {\n    const content = await renderTemplate(`/modules/${__MODULE_ID__}/templates/dialogs/AddStepDialogV1.hbs`, {\n      tabs: [\n        {\n          icon: \"\",\n          id: \"wipes\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.WIPES\",\n          data: getStepsForCategory(\"wipe\")\n        },\n        {\n          icon: \"\",\n          id: \"warps\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.WARPS\",\n          data: getStepsForCategory(\"warp\")\n        },\n        {\n          icon: \"\",\n          id: \"effects\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.EFFECTS\",\n          data: getStepsForCategory(\"effect\")\n        },\n        {\n          icon: \"\",\n          id: \"technical\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.TECHNICAL\",\n          data: getStepsForCategory(\"technical\")\n        }\n      ]\n    })\n\n    return new Promise<string | null>((resolve) => {\n      const dialog = new Dialog({\n        title: localize(\"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TITLE\"),\n        content,\n        buttons: {\n          cancel: {\n            icon: `<i class=\"fas fa-times\"></i>`,\n            label: localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\"),\n            callback: () => { resolve(null); }\n          }\n        },\n        close: () => { clearSearchResults(); },\n        render: (html: HTMLElement | JQuery<HTMLElement>) => {\n          addEventListeners(dialog, $(html), resolve);\n        }\n      });\n      dialog.render(true, { classes: [\"dialog\", \"bt\"], resizable: true });\n    })\n  }\n\n  // #endregion Public Static Methods (1)\n}\n\n// #endregion Classes (1)\n\n// #region Functions (1)\n\nfunction addEventListeners(dialog: Dialog, html: JQuery<HTMLElement>, resolve: (value: string | null) => void) {\n  // Set up tabs\n  const tabs = new Tabs({\n    contentSelector: \".tab-content\",\n    navSelector: `.tabs[data-group=\"primary-tabs\"]`,\n    initial: \"wipes\",\n    callback: () => { dialog.setPosition(); }\n  });\n  tabs.bind($(html)[0]);\n\n  html.find(\"#search-text\").on(\"input\", e => {\n    handleSearchInput($(e.currentTarget) as JQuery<HTMLInputElement>, dialog, (key: string) => {\n      resolve(key);\n      void dialog.close();\n    });\n  });\n\n  html.find(\"#clear-search\").on(\"click\", () => {\n    clearSearchResults();\n    html.find(\"#search-text\").val(\"\");\n  })\n  // Button clickies\n  html.find(`button[data-transition]`).on(\"click\", e => {\n    e.preventDefault();\n    const transition = e.currentTarget?.dataset?.transition ?? \"\";\n    if (transition) resolve(transition);\n    else resolve(null);\n    void dialog.close();\n  })\n}\n\n// #endregion Functions (1)\n", "import { localize } from \"../utils\";\nimport { clearSearchResults, handleSearchInput } from \"./addStepFunctions\";\nimport { getStepsForCategory } from \"./functions\";\n\nexport class AddStepDialogV2 {\n  public static async prompt(): Promise<string | null> {\n    const content = await renderTemplate(`/modules/${__MODULE_ID__}/templates/dialogs/AddStepDialogV2.hbs`, {\n      tabs: [\n        {\n          icon: \"\",\n          id: \"wipes\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.WIPES\",\n          data: getStepsForCategory(\"wipe\")\n        },\n        {\n          icon: \"\",\n          id: \"warps\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.WARPS\",\n          data: getStepsForCategory(\"warp\")\n        },\n        {\n          icon: \"\",\n          id: \"effects\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.EFFECTS\",\n          data: getStepsForCategory(\"effect\")\n        },\n        {\n          icon: \"\",\n          id: \"technical\",\n          title: \"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TABS.TECHNICAL\",\n          data: getStepsForCategory(\"technical\")\n        }\n      ]\n    });\n    return new Promise<string | null>(resolve => {\n      const dialog = new foundry.applications.api.DialogV2({\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        window: ({ title: localize(\"BATTLETRANSITIONS.DIALOGS.ADDSTEP.TITLE\") } as any),\n        content,\n        position: {\n          width: 450\n        },\n        buttons: [\n          {\n\n            label: `<i class=\"fas fa-times\"></i> ${localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\")}`,\n            action: \"cancel\",\n            callback: () => {\n              resolve(null);\n              return Promise.resolve();\n            }\n          }\n        ]\n      });\n      void dialog.render(true)\n        .then(dialog => {\n          addEventListeners(dialog, $(dialog.element), resolve);\n        });\n    })\n  }\n}\n\nfunction addEventListeners(dialog: foundry.applications.api.DialogV2, html: JQuery<HTMLElement>, resolve: (key: string | null) => void) {\n  // Set up tabs\n  const tabs = new Tabs({\n    contentSelector: \".tab-content\",\n    navSelector: \".tabs[data-group='primary-tabs']\",\n    initial: \"wipes\",\n  });\n  tabs.bind(dialog.element);\n\n  // Step buttons\n  html.find(\"button[data-transition]\").on(\"click\", e => {\n    e.preventDefault();\n    const transition = e.currentTarget.dataset.transition ?? \"\";\n    if (transition) resolve(transition);\n    else resolve(null);\n    clearSearchResults();\n    void dialog.close();\n  })\n\n\n  html.find(\"#clear-search\").on(\"click\", () => {\n    clearSearchResults();\n    html.find(\"#search-text\").val(\"\");\n  })\n\n  // Search\n  html.find(\"#search-text\").on(\"input\", e => {\n    handleSearchInput($(e.currentTarget) as JQuery<HTMLInputElement>, dialog, (key: string) => {\n      resolve(key);\n      void dialog.close();\n      clearSearchResults();\n    });\n  });\n\n}", "\nimport { InvalidTransitionError } from '../errors';\nimport { TransitionConfiguration } from '../steps/types';\nimport { getStepClassByKey, localize } from '../utils';\n\nexport class EditStepDialogV1 {\n  static async prompt(config: TransitionConfiguration, oldScene?: Scene, newScene?: Scene): Promise<TransitionConfiguration | null> {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(typeof config.type === \"string\" ? config.type : typeof config.type);\n\n    const content = await step.RenderTemplate(config, oldScene, newScene);\n\n    return new Promise<TransitionConfiguration | null>(resolve => {\n\n\n      const dialog = new Dialog({\n        title: localize(`BATTLETRANSITIONS.DIALOGS.EDITSTEP.TITLE`, { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }),\n        content,\n        buttons: {\n          ok: {\n            icon: `<i class=\"fas fa-check\"></i>`,\n            label: localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.OK\"),\n            callback: (html: HTMLElement | JQuery<HTMLElement>) => {\n              const config = step.from($(html).find(\"form\"))?.config ?? null;\n              if (config) resolve({\n                ...step.DefaultSettings,\n                ...config\n              } as TransitionConfiguration);\n              else resolve(null);\n            }\n          },\n          cancel: {\n            icon: `<i class=\"fas fa-times\"></i>`,\n            label: localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\"),\n            callback: () => { resolve(null); }\n          }\n        },\n        render: (html: HTMLElement | JQuery<HTMLElement>) => {\n          addEventListeners(dialog, $(html));\n          step.addEventListeners($(html), config);\n          const CLOSE_HOOK_ID = Hooks.on(\"closeDialog\", (closed: Dialog) => {\n            if (closed.id === dialog.id) {\n              Hooks.off(\"closeDialog\", CLOSE_HOOK_ID);\n              step.editDialogClosed(html);\n            }\n          })\n\n        }\n      });\n\n      dialog.render(true, { classes: [\"dialog\", \"bt\"], resizable: true, width: 500 });\n    })\n  }\n}\n\nfunction checkFormValidity(html: JQuery<HTMLElement>) {\n  const stepType = html.find(\"[data-transition-type]\").data(\"transition-type\") as string;\n  const step = getStepClassByKey(stepType);\n  if (!step) throw new InvalidTransitionError(stepType);\n  const valid = step.validateForm(html) && (html.find(\"form\")[0])?.checkValidity();\n\n  if (valid) html.find(\"button[data-action='ok']\").removeAttr(\"disabled\");\n  else html.find(\"button[data-action='ok']\").attr(\"disabled\", \"true\");\n}\n\nfunction addEventListeners(dialog: Dialog, html: JQuery<HTMLElement>) {\n  // Select number and text fields on focus\n  html.find(\"input[type='number'],input[type='text']\").on(\"focus\", e => { (e.currentTarget as HTMLInputElement).select(); })\n\n  // Disable ok button\n  checkFormValidity(html);\n  html.find(\"input\").on(\"input\", () => { checkFormValidity(html); });\n\n  // Font selector\n  html.find(\"[data-font-select] option\").each((index, element) => {\n    if (element instanceof HTMLOptionElement)\n      element.style.fontFamily = element.value;\n  });\n\n  html.find(\"[data-font-select]\").css(\"font-family\", html.find(\"[data-font-select]\").val() as string);\n  html.find(\"[data-font-select]\").on(\"input\", e => {\n    $(e.currentTarget).css(\"font-family\", $(e.currentTarget).val() as string);\n  });\n\n  // log(\"Background image:\", html.find(\"#backgroundImage\"));\n\n  html.find(\"#backgroundImage\").on(\"input\", () => {\n    const val = (html.find(\"#backgroundImage\").val() as string) ?? \"\";\n\n    if (val) {\n      const tag = document.createElement(\"img\");\n      const img = $(tag);\n      img.addClass(\"bg-image-preview\");\n      img.attr(\"src\", val);\n      html.find(\"#backgroundImagePreview img\").remove();\n      html.find(\"#backgroundImagePreview\").append(img);\n    } else {\n      html.find(\"#backgroundImagePreview img\").remove();\n    }\n  });\n\n  // Set up tabs\n  const tabs = new Tabs({\n    contentSelector: \".tab-content\",\n    navSelector: \".tabs[data-group='primary-tabs']\",\n    initial: \"wipes\",\n  });\n  tabs.bind(html[0]);\n\n  // Background type\n  setBackgroundType(html);\n  html.find(\"#backgroundType\").on(\"change\", () => { setBackgroundType(html) });\n\n  // Color picker\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  ColorPicker.install();\n}\n\nfunction setBackgroundType(html: JQuery<HTMLElement>) {\n  const bgType = html.find(\"#backgroundType\").val() as string;\n\n  html.find(`[data-background-type]`).css(\"display\", \"none\");\n  html.find(`[data-background-type=\"${bgType}\"]`).css(\"display\", \"block\");\n}\n", "import { InvalidTransitionError } from \"../errors\";\nimport { TransitionConfiguration } from \"../steps\";\nimport { getStepClassByKey, localize } from \"../utils\";\n\nexport class EditStepDialogV2 {\n  static async prompt(config: TransitionConfiguration, oldScene?: Scene, newScene?: Scene): Promise<TransitionConfiguration | null> {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(typeof config.type === \"string\" ? config.type : typeof config.type);\n    const content = await step.RenderTemplate(config, oldScene, newScene);\n\n    return new Promise<TransitionConfiguration | null>(resolve => {\n      const dialog = new foundry.applications.api.DialogV2({\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        window: ({ title: localize(`BATTLETRANSITIONS.DIALOGS.EDITSTEP.TITLE`, { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }) } as any),\n        content,\n        buttons: [\n          {\n            label: `<i class=\"fas fa-check\"></i> ${localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.OK\")}`,\n            default: true,\n            action: \"ok\",\n            callback: (e, button: HTMLButtonElement, html: HTMLDialogElement) => {\n              const config = step.from($(html).find(\"form\"))?.config ?? null;\n              if (config) {\n                resolve({\n                  ...step.DefaultSettings,\n                  ...config\n                });\n              } else {\n                resolve(null);\n              }\n              return Promise.resolve();\n            }\n          },\n          {\n            label: `<i class=\"fas fa-times\"></i> ${localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\")}`,\n            action: \"cancel\"\n          }\n        ]\n      })\n      void dialog.render(true)\n        .then(dialog => {\n          dialog.position.width = 500;\n          const elem = $(dialog.element);\n          addEventListeners(dialog, elem);\n          step.addEventListeners(elem, config);\n\n          const CLOSE_HOOK_ID = Hooks.on(\"closeDialogV2\", (closedDialog: foundry.applications.api.DialogV2) => {\n            if (closedDialog.id === dialog.id) {\n              Hooks.off(\"closeDialogV2\", CLOSE_HOOK_ID);\n              step.editDialogClosed(elem);\n            }\n          });\n        })\n    });\n  }\n}\n\nfunction checkFormValidity(html: JQuery<HTMLElement>) {\n  const stepType = html.find(\"[data-transition-type]\").data(\"transition-type\") as string;\n  const step = getStepClassByKey(stepType);\n  if (!step) throw new InvalidTransitionError(stepType);\n  const valid = step.validateForm(html) && (html.find(\"form\")[0])?.checkValidity();\n\n  if (valid) html.find(\"button[data-action='ok']\").removeAttr(\"disabled\");\n  else html.find(\"button[data-action='ok']\").attr(\"disabled\", \"true\");\n\n}\n\nfunction addEventListeners(dialog: foundry.applications.api.DialogV2, html: JQuery<HTMLElement>) {\n  // Select number and text fields on focus\n  html.find(\"input[type='number'],input[type='text']\").on(\"focus\", e => { (e.currentTarget as HTMLInputElement).select(); })\n\n  checkFormValidity(html);\n  html.find(\"input,select\").on(\"input\", () => { checkFormValidity(html); });\n\n  // log(\"Background image:\", html.find(\"#backgroundImage\"));\n\n  html.find(\"#backgroundImage\").on(\"input\", () => {\n    const val = (html.find(\"#backgroundImage\").val() as string) ?? \"\";\n\n    if (val) {\n      const tag = document.createElement(\"img\");\n      const img = $(tag);\n      img.addClass(\"bg-image-preview\");\n      img.attr(\"src\", val);\n      html.find(\"#backgroundImagePreview img\").remove();\n      html.find(\"#backgroundImagePreview\").append(img);\n    } else {\n      html.find(\"#backgroundImagePreview img\").remove();\n    }\n\n  });\n\n  // Font selector\n  html.find(\"[data-font-select] option\").each((index, element) => {\n    if (element instanceof HTMLOptionElement)\n      element.style.fontFamily = element.value;\n  });\n\n  html.find(\"[data-font-select]\").css(\"font-family\", html.find(\"[data-font-select]\").val() as string);\n  html.find(\"[data-font-select]\").on(\"input\", e => {\n    $(e.currentTarget).css(\"font-family\", $(e.currentTarget).val() as string);\n  });\n\n  // Set up tabs\n  const tabs = new Tabs({\n    contentSelector: \".tab-content\",\n    navSelector: \".tabs[data-group='primary-tabs']\",\n    initial: \"wipes\",\n  });\n  tabs.bind(dialog.element);\n\n  // Background type\n  setBackgroundType(html);\n  html.find(\"#backgroundType\").on(\"change\", () => { setBackgroundType(html) });\n\n  // Color picker\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  ColorPicker.install();\n}\n\nfunction setBackgroundType(html: JQuery<HTMLElement>) {\n  const bgType = html.find(\"#backgroundType\").val() as string;\n\n  html.find(`[data-background-type]`).css(\"display\", \"none\");\n  html.find(`[data-background-type=\"${bgType}\"]`).css(\"display\", \"block\");\n}", "import { SceneChangeConfiguration, TransitionConfiguration } from \"../steps\";\nimport { formatDuration, getStepClassByKey, localize, uploadJSON } from \"../utils\";\nimport { InvalidSceneError, InvalidTransitionError } from \"../errors\";\nimport { addStepDialog, editStepDialog, confirm, buildTransitionFromForm } from \"./functions\";\nimport { sequenceDuration } from \"../transitionUtils\";\n\nexport class TransitionBuilderV1 {\n  static async prompt(scene?: Scene): Promise<TransitionConfiguration[] | null> {\n\n    const content = await renderTemplate(`/modules/${__MODULE_ID__}/templates/dialogs/TransitionBuilder.hbs`, {\n      newScene: scene?.id,\n      oldScene: game.scenes?.current?.id ?? \"\",\n      scenes: game.scenes?.contents.map(scene => ({ id: scene.id, name: scene.name })) ?? []\n    });\n\n    return new Promise<TransitionConfiguration[] | null>(resolve => {\n      const dialog = new Dialog({\n        title: localize(\"BATTLETRANSITIONS.DIALOGS.TRANSITIONBUILDER.TITLE\"),\n        content,\n        render: (html) => {\n          addEventListeners(dialog, $(html));\n        },\n        default: \"ok\",\n        buttons: {\n          ok: {\n            icon: `<i class=\"fas fa-play\"></i>`,\n            label: localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.TRANSITION\"),\n            callback: (html) => {\n              const elem = $(html);\n              const sequence = buildTransitionFromForm(elem);\n\n              const sceneId = scene ? scene.id : elem.find(\"#newScene\").val() as string;\n              if (!sceneId) throw new InvalidSceneError(typeof sceneId === \"string\" ? sceneId : typeof sceneId);\n              const step = getStepClassByKey(\"scenechange\");\n              if (!step) throw new InvalidTransitionError(\"scenechange\");\n              const sceneChange: SceneChangeConfiguration = {\n                ...step.DefaultSettings,\n                scene: sceneId\n              };\n              resolve([\n                sceneChange,\n                ...sequence\n              ]);\n            }\n          },\n          cancel: {\n            icon: `<i class=\"fas fa-times\"></i>`,\n            label: localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\"),\n            callback: () => { resolve(null); }\n          }\n        }\n      });\n\n      dialog.render(true, { resizable: true });\n    })\n  }\n}\n\nfunction addEventListeners(dialog: Dialog, html: JQuery<HTMLElement>) {\n  html.find(\"button[data-action='add-step']\").on(\"click\", e => {\n    e.preventDefault();\n    void addStep(dialog, html);\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  (html.find(\"#transition-step-list\") as any).sortable({\n    handle: \".drag-handle\",\n    containment: \"parent\",\n    axis: \"y\"\n  });\n\n  html.find(`[data-action=\"import-json\"]`).on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void uploadHandler(dialog, html);\n    }\n  })\n\n  html.find(\"[data-action='clear-steps']\").on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void clearButtonhandler(html);\n    }\n  })\n  setClearDisabled(html);\n}\n\nasync function clearButtonhandler(html: JQuery<HTMLElement>) {\n  const confirmed = await confirm(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.MESSAGE\"));\n  if (!confirmed) return;\n  html.find(\"#transition-step-list\").children().remove();\n  await updateTotalDuration(html);\n  setClearDisabled(html);\n}\n\nfunction setClearDisabled(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  if (!sequence.length) html.find(\"#clear-steps\").attr(\"disabled\", \"true\");\n  else html.find(\"#clear-steps\").removeAttr(\"disabled\");\n}\n\nasync function uploadHandler(dialog: Dialog, html: JQuery<HTMLElement>) {\n  try {\n    const current = buildTransitionFromForm(html);\n    if (current.length) {\n      const confirmation = await confirm(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.MESSAGE\"));\n      if (!confirmation) return;\n    }\n    const sequence = await uploadJSON<TransitionConfiguration[]>();\n    html.find(\"#transition-step-list\").children().remove();\n    for (const step of sequence)\n      await upsertStepButton(dialog, html, step);\n  } catch (err) {\n    ui.notifications?.error((err as Error).message, { console: false });\n    console.error(err);\n  }\n}\n\n\nasync function addStep(dialog: Dialog, html: JQuery<HTMLElement>) {\n  const key = await addStepDialog();\n  if (!key) return;\n  const step = getStepClassByKey(key);\n  if (!step) throw new InvalidTransitionError(key);\n\n  let config: TransitionConfiguration | null = null;\n  if (!step.skipConfig) {\n    // Edit form\n    config = await editStepDialog(step.DefaultSettings)\n  } else {\n    config = {\n      ...step.DefaultSettings,\n      id: foundry.utils.randomID()\n    };\n  }\n  if (!config) return;\n\n  // Inject step\n  await upsertStepButton(dialog, html, config);\n\n  dialog.setPosition();\n}\n\n\nasync function updateTotalDuration(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  const totalDuration = await sequenceDuration(sequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n}\n\nasync function upsertStepButton(dialog: Dialog, html: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  const step = getStepClassByKey(config.type);\n  if (!step) throw new InvalidTransitionError(config.type);\n\n  const sequence = [...buildTransitionFromForm(html), config];\n  const durationRes = step.getDuration(config, sequence);\n  const duration = (durationRes instanceof Promise) ? (await durationRes) : durationRes;\n\n  await updateTotalDuration(html);\n\n  const buttonContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/step-item.hbs`, {\n    ...step.DefaultSettings,\n    ...config,\n    name: localize(`BATTLETRANSITIONS.${step.name}.NAME`),\n    description: localize(`BATTLETRANSITIONS.${step.name}.DESCRIPTION`),\n    type: step.key,\n    calculatedDuration: duration,\n    skipConfig: step.skipConfig,\n    flag: JSON.stringify({\n      ...step.DefaultSettings,\n      ...config\n    })\n  });\n\n  const button = $(buttonContent);\n\n  const extant = html.find(`[data-id=\"${config.id}\"]`);\n  if (extant.length) extant.replaceWith(button);\n  else html.find(\"#transition-step-list\").append(button);\n\n  addStepEventListeners(dialog, html, button, config);\n}\n\nfunction addStepEventListeners(dialog: Dialog, html: JQuery<HTMLElement>, button: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  // Remove button\n  button.find(\"[data-action='remove']\").on(\"click\", () => {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(config.type);\n    confirm(\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.TITLE\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }),\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.CONTENT\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) })\n    )\n      .then(confirm => {\n        if (confirm) {\n          button.remove();\n          dialog.setPosition();\n        }\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false });\n        console.error(err);\n      });\n  });\n\n  // Configure button\n  button.find(\"[data-action='configure']\").on(\"click\", () => {\n    const oldScene = html.find(\"#oldScene\").val() as string ?? \"\";\n    const newScene = html.find(\"#newScene\").val() as string ?? \"\";\n\n    editStepDialog(config, game.scenes?.get(oldScene), game.scenes?.get(newScene))\n      .then(newConfig => {\n        if (newConfig) {\n          // Replace button\n          return upsertStepButton(dialog, html, newConfig)\n        }\n      }).then(() => {\n\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false })\n        console.error(err);\n      })\n  });\n}\n", "import { InvalidSceneError, InvalidTransitionError } from \"../errors\";\nimport { SceneChangeConfiguration, TransitionConfiguration } from \"../steps\";\nimport { sequenceDuration } from \"../transitionUtils\";\nimport { formatDuration, getStepClassByKey, localize, uploadJSON } from \"../utils\";\nimport { addStepDialog, editStepDialog, confirm, buildTransitionFromForm } from \"./functions\";\n\nexport class TransitionBuilderV2 {\n  static async prompt(scene?: Scene): Promise<TransitionConfiguration[] | null> {\n    const content = await renderTemplate(`/modules/${__MODULE_ID__}/templates/dialogs/TransitionBuilder.hbs`, {\n      newScene: scene?.id,\n      oldScene: game.scenes?.current?.id ?? \"\",\n      scenes: game.scenes?.contents.map(scene => ({ id: scene.id, name: scene.name })) ?? []\n    });\n\n    return new Promise<TransitionConfiguration[] | null>(resolve => {\n\n      const dialog = new foundry.applications.api.DialogV2({\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        window: ({ title: localize(\"BATTLETRANSITIONS.DIALOGS.TRANSITIONBUILDER.TITLE\") } as any),\n        content,\n        buttons: [\n          {\n            label: `<i class=\"fas fa-play\"></i> ${localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.TRANSITION\")}`,\n            default: true,\n            action: \"ok\",\n            callback: (e, button, html) => {\n              const elem = $(html);\n              const sequence = buildTransitionFromForm(elem);\n\n              const sceneId = scene ? scene.id : elem.find(\"#scene\").val() as string;\n              if (!sceneId) throw new InvalidSceneError(typeof sceneId === \"string\" ? sceneId : typeof sceneId);\n              const step = getStepClassByKey(\"scenechange\");\n              if (!step) throw new InvalidTransitionError(\"scenechange\");\n              const sceneChange: SceneChangeConfiguration = {\n                ...step.DefaultSettings,\n                scene: sceneId\n              };\n              resolve([\n                sceneChange,\n                ...sequence\n              ]);\n              return Promise.resolve();\n            }\n          },\n          {\n            label: `<I class=\"fas fa-times\"></i> ${localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\")}`,\n            action: 'cancel',\n            callback: () => {\n              resolve(null);\n              return Promise.resolve();\n            }\n          }\n        ]\n      })\n      void dialog.render(true)\n        .then(dialog => {\n          addEventListeners(dialog, $(dialog.element))\n        })\n    });\n  }\n}\n\nfunction addEventListeners(dialog: foundry.applications.api.DialogV2, html: JQuery<HTMLElement>) {\n  html.find(\"button[data-action='add-step']\").on(\"click\", e => {\n    e.preventDefault();\n    void addStep(dialog, html);\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  (html.find(\"#transition-step-list\") as any).sortable({\n    handle: \".drag-handle\",\n    containment: \"parent\",\n    axis: \"y\"\n  });\n\n\n  html.find(`[data-action=\"import-json\"]`).on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void uploadHandler(dialog, html);\n    }\n  });\n\n  html.find(\"[data-action='clear-steps']\").on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void clearButtonhandler(html);\n    }\n  })\n  setClearDisabled(html);\n}\n\nasync function clearButtonhandler(html: JQuery<HTMLElement>) {\n  const confirmed = await confirm(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.MESSAGE\"));\n  if (!confirmed) return;\n  html.find(\"#transition-step-list\").children().remove();\n  await updateTotalDuration(html);\n  setClearDisabled(html);\n}\n\nfunction setClearDisabled(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  if (!sequence.length) html.find(\"#clear-steps\").attr(\"disabled\", \"true\");\n  else html.find(\"#clear-steps\").removeAttr(\"disabled\");\n}\n\nasync function uploadHandler(dialog: foundry.applications.api.DialogV2, html: JQuery<HTMLElement>) {\n  try {\n    const current = buildTransitionFromForm(html);\n    if (current.length) {\n      const confirmation = await confirm(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.MESSAGE\"));\n      if (!confirmation) return;\n    }\n    const sequence = await uploadJSON<TransitionConfiguration[]>();\n    html.find(\"#transition-step-list\").children().remove();\n    for (const step of sequence)\n      await upsertStepButton(dialog, html, step);\n  } catch (err) {\n    ui.notifications?.error((err as Error).message, { console: false });\n    console.error(err);\n  }\n}\n\nasync function addStep(dialog: foundry.applications.api.DialogV2, html: JQuery<HTMLElement>) {\n  const key = await addStepDialog();\n  if (!key) return;\n\n  const step = getStepClassByKey(key);\n  if (!step) throw new InvalidTransitionError(key);\n\n  let config: TransitionConfiguration | null = null;\n\n  const oldScene = html.find(\"#oldScene\").val() as string ?? \"\";\n  const newScene = html.find(\"#newScene\").val() as string ?? \"\";\n\n  if (!step.skipConfig) {\n    config = await editStepDialog(step.DefaultSettings, game.scenes?.get(oldScene), game.scenes?.get(newScene));\n  } else {\n    config = {\n      ...step.DefaultSettings,\n      id: foundry.utils.randomID()\n    };\n  }\n\n  if (!config) return;\n\n  await upsertStepButton(dialog, html, config);\n}\n\nasync function updateTotalDuration(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  const totalDuration = await sequenceDuration(sequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n}\n\nasync function upsertStepButton(dialog: foundry.applications.api.DialogV2, html: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  const step = getStepClassByKey(config.type);\n  if (!step) throw new InvalidTransitionError(config.type);\n\n  const sequence = [...buildTransitionFromForm(html), config];\n  const durationRes = step.getDuration(config, sequence);\n  const duration = (durationRes instanceof Promise) ? (await durationRes) : durationRes;\n\n  const totalDuration = await sequenceDuration(sequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n\n  const buttonContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/step-item.hbs`,\n    {\n      ...step.DefaultSettings,\n      ...config,\n      name: localize(`BATTLETRANSITIONS.${step.name}.NAME`),\n      description: localize(`BATTLETRANSITIONS.${step.name}.DESCRIPTION`),\n      type: step.key,\n      calculatedDuration: duration,\n      skipConfig: step.skipConfig,\n      flag: JSON.stringify({\n        ...step.DefaultSettings,\n        ...config\n      })\n    }\n  );\n\n  const button = $(buttonContent);\n\n  const extant = html.find(`[data-id=\"${config.id}\"]`);\n  if (extant.length) extant.replaceWith(button);\n  else html.find(\"#transition-step-list\").append(button);\n\n  setClearDisabled(html);\n  addStepEventListeners(dialog, html, button, config);\n}\n\nfunction addStepEventListeners(dialog: foundry.applications.api.DialogV2, html: JQuery<HTMLElement>, button: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  button.find(\"[data-action='remove']\").on(\"click\", () => {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(config.type);\n    confirm(\n      localize(`BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.TITLE`, { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }),\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.CONTENT\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) })\n    )\n      .then(confirm => {\n        if (confirm) {\n          button.remove();\n          setClearDisabled(html);\n        }\n      }).catch((err: Error) => {\n        ui.notifications?.error(err.message, { console: false });\n        console.error(err);\n      });\n  });\n\n  button.find(\"[data-action='configure']\").on(\"click\", () => {\n\n    const oldScene = html.find(\"#oldScene\").val() as string ?? \"\";\n    const newScene = html.find(\"#newScene\").val() as string ?? \"\";\n\n    editStepDialog(config, game.scenes?.get(oldScene), game.scenes?.get(newScene))\n      .then(newConfig => {\n        if (newConfig) return upsertStepButton(dialog, html, newConfig);\n      }).catch((err: Error) => {\n        ui.notifications?.error(err.message, { console: false });\n        console.error(err);\n      })\n  })\n}", "import { TransitionConfiguration } from '../steps';\nimport { getSortedSteps, localize, shouldUseAppV2 } from '../utils';\nimport { AddStepDialogV1 } from './AddStepDialogV1';\nimport { AddStepDialogV2 } from './AddStepDialogV2';\nimport { EditStepDialogV1 } from './EditStepDialogV1';\nimport { StepContext } from './types';\nimport { EditStepDialogV2 } from './EditStepDialogV2';\nimport { TransitionBuilderV1 } from './TransitionBuilderV1';\nimport { TransitionBuilderV2 } from './TransitionBuilderV2';\n\nexport async function addStepDialog(): Promise<string | null> {\n  if (shouldUseAppV2()) return AddStepDialogV2.prompt();\n  else return AddStepDialogV1.prompt();\n}\n\n\nexport function getStepsForCategory(category: string, hidden: boolean = false): StepContext[] {\n  return getSortedSteps().reduce((prev, curr) => curr.category === category && (hidden ? true : curr.hidden === false) ? [...prev, { key: curr.key, name: `BATTLETRANSITIONS.${curr.name}.NAME`, description: `BATTLETRANSITIONS.${curr.name}.DESCRIPTION`, icon: curr.icon, tooltip: \"\", hasIcon: !!curr.icon }] : prev, [] as StepContext[]);\n}\n\nexport async function editStepDialog(config: TransitionConfiguration, oldScene?: Scene, newScene?: Scene): Promise<TransitionConfiguration | null> {\n  if (shouldUseAppV2()) return EditStepDialogV2.prompt(config, oldScene, newScene);\n  else return EditStepDialogV1.prompt(config, oldScene, newScene);\n}\n\nexport async function confirm(title: string, content: string): Promise<boolean> {\n  if (shouldUseAppV2()) {\n    return foundry.applications.api.DialogV2.confirm({\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      window: ({ title } as any),\n      content\n    });\n  } else {\n    return Dialog.confirm({\n      title,\n      content\n    }).then(val => !!val);\n  }\n}\n\nexport function buildTransitionFromForm(html: JQuery<HTMLElement>) {\n  const sequence: TransitionConfiguration[] = [];\n  html.find(\"#transition-step-list [data-transition-type]\").each((index, element) => {\n    const flag = element.dataset.flag ?? \"\";\n    const step = JSON.parse(flag) as TransitionConfiguration;\n    sequence.push(step);\n  });\n  return sequence;\n}\n\nexport async function transitionBuilderDialog(scene?: Scene): Promise<TransitionConfiguration[] | null> {\n  if (shouldUseAppV2()) return TransitionBuilderV2.prompt(scene);\n  else return TransitionBuilderV1.prompt(scene);\n}\n\nexport async function customDialog(title: string, content: string, buttons: Record<string, DialogButton>, onRender?: (element: JQuery<HTMLElement>) => void, onClose?: (element: JQuery<HTMLElement>) => void): Promise<JQuery<HTMLElement>> {\n  if (shouldUseAppV2()) return customDialogV2(title, content, buttons, onRender, onClose);\n  else return customDialogV1(title, content, buttons, onRender, onClose);\n}\n\nasync function customDialogV1(title: string, content: string, buttons: Record<string, DialogButton>, onRender?: (element: JQuery<HTMLElement>) => void, onClose?: (element: JQuery<HTMLElement>) => void): Promise<JQuery<HTMLElement>> {\n  return new Promise<JQuery<HTMLElement>>((resolve) => {\n    let CLOSE_HOOK_ID: number = 0;\n    const dialog = new Dialog({\n      title: localize(title),\n      content,\n      buttons,\n      render(elem: HTMLElement | JQuery<HTMLElement>) {\n        if (onRender) onRender($(elem));\n      },\n      close(elem: HTMLElement | JQuery<HTMLElement>) {\n        const jq = $(elem);\n        resolve(jq);\n        if (onClose) onClose(jq);\n        CLOSE_HOOK_ID = Hooks.on(\"closeDialog\", (closed: Dialog) => {\n          if (closed.id === dialog.id) {\n            Hooks.off(\"closeDialog\", CLOSE_HOOK_ID);\n            if (onClose) onClose(jq);\n          }\n        })\n      },\n    });\n    dialog.render(true);\n  })\n}\n\nasync function customDialogV2(title: string, content: string, buttons: Record<string, DialogButton>, onRender?: (element: JQuery<HTMLElement>) => void, onClose?: (element: JQuery<HTMLElement>) => void): Promise<JQuery<HTMLElement>> {\n  return new Promise<JQuery<HTMLElement>>((resolve, reject) => {\n    let CLOSE_HOOK_ID: number = 0;\n    const dialog = new foundry.applications.api.DialogV2({\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      window: ({ title: localize(title) } as any),\n      content,\n      buttons: Object.entries(buttons).map(([key, value]) => ({\n        action: key,\n        label: `${value.icon ? `${value.icon} ` : \"\"}${localize(value.label)}`,\n        callback: () => {\n          if (value.callback) value.callback($(dialog.element));\n          return Promise.resolve();\n        }\n      }))\n    });\n    dialog.render(true).then(val => {\n      if (onRender) onRender($(val.element));\n      const elem = val.element;\n      CLOSE_HOOK_ID = Hooks.on(\"closeDialogV2\", (closedDialog: foundry.applications.api.DialogV2) => {\n        if (closedDialog.id === dialog.id) {\n          Hooks.off(\"closeDialogV2\", CLOSE_HOOK_ID);\n          resolve($(elem));\n\n          if (onClose) onClose($(elem));\n        }\n      })\n    }).catch(reject);\n  });\n}", "import semver from \"semver\";\nimport { InvalidVersionError, NewerVersionError, UnableToMigrateError } from \"../errors\";\n\nexport abstract class Migrator<t> {\n  // #region Properties (2)\n\n  protected abstract migrationFunctions: { [x: string]: (old: any) => t };\n\n  public abstract readonly NewestVersion: string;\n\n  // #endregion Properties (2)\n\n  // #region Public Methods (2)\n\n  public Migrate(old: unknown): t {\n    const version = this.Version(old);\n    if (semver.gt(version, this.NewestVersion)) throw new NewerVersionError(version);\n    if (!version) throw new InvalidVersionError(typeof version === \"string\" ? version : version);\n\n    if (version === this.NewestVersion) return old as t;\n\n    const hash = Object.entries(this.migrationFunctions);\n    for (const [key, func] of hash) {\n      if (semver.satisfies(version, key)) {\n        return func(old);\n      }\n    }\n    throw new UnableToMigrateError(version, this.NewestVersion);\n  }\n\n  public NeedsMigration(data: unknown): boolean {\n    const version = this.Version(data);\n    if (semver.gt(version, this.NewestVersion)) throw new NewerVersionError(version);\n    return semver.lt(version, this.NewestVersion);\n  }\n\n  // #endregion Public Methods (2)\n\n  // #region Public Abstract Methods (1)\n\n  public abstract Version(data: unknown): string;\n\n  // #endregion Public Abstract Methods (1)\n}\n", "import { SceneConfiguration } from \"../interfaces\";\nimport { Migrator } from \"./Migrator\";\nimport { InvalidTransitionError, UnableToMigrateError } from \"../errors\";\nimport { getStepClassByKey } from \"../utils\";\nimport { TransitionConfiguration } from \"../steps\";\nimport { DataMigration } from \"../DataMigration\";\n\nconst CURRENT_VERSION = \"1.1.0\";\n\nexport class SceneConfigurationMigrator extends Migrator<SceneConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => SceneConfiguration; } = {\n    \"~1.0\": v10X\n  }\n\n  public Version(data: unknown): string {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (typeof (data as any).version === \"undefined\") return \"1.0.5\";\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-member-access\n    else return (data as any).version;\n  }\n\n  public readonly NewestVersion: string = CURRENT_VERSION;\n\n}\n\ninterface V10Config {\n  autoTriggered?: boolean;\n  config?: {\n    autoTrigger?: boolean;\n  };\n  steps?: {\n    type: string,\n    [x: string]: unknown\n  }[]\n}\n\nfunction v10X(old: V10Config): SceneConfiguration {\n  const updated: SceneConfiguration = {\n    autoTrigger: old.config?.autoTrigger ?? false,\n    version: \"1.1.0\",\n    isTriggered: false,\n    sequence: []\n  };\n\n  if (Array.isArray(old.steps) && old.steps.length) {\n    updated.sequence = old.steps.map(step => {\n      const stepClass = getStepClassByKey(step.type);\n      if (!stepClass) throw new InvalidTransitionError(typeof step.type === \"string\" ? step.type : typeof step.class);\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      const migrator = (DataMigration as any).TransitionSteps[step.type] as Migrator<TransitionConfiguration>;\n      if (!migrator) throw new UnableToMigrateError(typeof undefined, __MODULE_VERSION__);\n      if (migrator.NeedsMigration(step)) return migrator.Migrate(step);\n      else return step;\n    }) as TransitionConfiguration[];\n  }\n  return updated;\n}", "import { Migrator } from '../Migrator';\nimport { AngularWipeConfiguration } from '../../steps/types';\n\nexport class AngularWipeMigrator extends Migrator<AngularWipeConfiguration> {\n\n  protected migrationFunctions: { [x: string]: (old: unknown) => AngularWipeConfiguration } = {}\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n\n}", "import { Migrator } from \"../Migrator\";\nimport { BilinearWipeConfiguration } from \"../../steps\";\nimport { BilinearDirection, Easing, RadialDirection } from \"../../types\";\nimport { migratev10XBackground } from \"../../utils\";\n\nexport class BilinearWipeMigrator extends Migrator<BilinearWipeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => BilinearWipeConfiguration; } = {\n    \"~1.0\": V10X\n  };\n  public NewestVersion: string = \"1.1.0\";\n\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface V10XConfig {\n  id?: string;\n  easing: Easing;\n  duration: number;\n  direction: BilinearDirection;\n  radial: RadialDirection;\n  background: string;\n}\n\nfunction V10X(old: V10XConfig): BilinearWipeConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    type: \"bilinearwipe\",\n    version: \"1.1.0\",\n    duration: old.duration,\n    easing: old.easing,\n    direction: old.direction,\n    radial: old.radial,\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { ClockWipeConfiguration } from \"../../steps\";\nimport { ClockDirection, Easing, WipeDirection } from \"../../types\";\nimport { migratev10XBackground } from \"../../utils\";\n\nexport class ClockWipeMigrator extends Migrator<ClockWipeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => ClockWipeConfiguration; } = {\n    \"~1.0\": V10X\n  };\n\n  public NewestVersion: string = \"1.1.0\";\n\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n\n}\n\n\ninterface V10XConfig {\n  id?: string;\n  easing: Easing;\n  duration: number;\n  background: string;\n  direction: WipeDirection;\n  clockdirection: ClockDirection;\n}\n\nfunction V10X(old: V10XConfig): ClockWipeConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    type: \"clockwipe\",\n    version: \"1.1.0\",\n    easing: old.easing,\n    duration: old.duration,\n    direction: old.direction,\n    clockDirection: old.clockdirection,\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { DiamondWipeConfiguration } from \"../../steps\";\nimport { Easing } from \"../../types\";\nimport { migratev10XBackground } from \"../../utils\";\n\nexport class DiamondWipeMigrator extends Migrator<DiamondWipeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => DiamondWipeConfiguration; } = {\n    \"~1.0\": V10X\n  };\n  public NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\n\ninterface V10XConfig {\n  id?: string;\n  easing: Easing;\n  duration: number;\n  size: number;\n  background: string;\n}\n\nfunction V10X(old: V10XConfig): DiamondWipeConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    type: \"diamondwipe\",\n    version: \"1.1.0\",\n    duration: old.duration,\n    size: old.size,\n    easing: old.easing,\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { FadeConfiguration } from \"../../steps\";\nimport { Easing } from '../../types';\nimport { migratev10XBackground } from \"../../utils\";\n\nexport class FadeMigrator extends Migrator<FadeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => FadeConfiguration; } = {\n    \"~1.0\": V10X\n  }\n  public NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface V10XConfig {\n  id?: string;\n  easing: Easing;\n  duration: number;\n  background: string;\n}\n\nfunction V10X(old: V10XConfig): FadeConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    easing: old.easing,\n    duration: old.duration,\n    type: \"fade\",\n    version: \"1.1.0\",\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { FireDissolveConfiguration } from \"../../steps\";\nimport { Easing } from \"../../types\";\n\nexport class FireDissolveMigrator extends Migrator<FireDissolveConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => FireDissolveConfiguration; } = {\n    \"~1.1.0\": v10XMigration\n  };\n  public NewestVersion: string = \"1.1.0\";\n\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n\n}\n\ninterface v10XConfig {\n  id?: string;\n  duration: number;\n  easing: Easing;\n  burnSize: number;\n}\n\nfunction v10XMigration(old: v10XConfig): FireDissolveConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    easing: old.easing,\n    duration: old.duration,\n    burnSize: old.burnSize,\n    type: \"firedissolve\",\n    version: \"1.1.0\"\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { FlashConfiguration } from \"../../steps\";\n\nexport class FlashMigrator extends Migrator<FlashConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => FlashConfiguration } = {};\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\";\nimport { InvertConfiguration } from \"../../steps\";\n\nexport class InvertMigrator extends Migrator<InvertConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => InvertConfiguration } = {};\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\";\nimport { LinearWipeConfiguration } from \"../../steps\";\nimport { Easing, WipeDirection } from \"../../types\";\nimport { migratev10XBackground } from \"../../utils\";\n\nexport class LinearWipeMigrator extends Migrator<LinearWipeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => LinearWipeConfiguration; } = {\n    \"~1.0\": v10XMigration\n  };\n\n  public NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\n\ninterface v10XConfig {\n  id?: string;\n  duration: number;\n  direction: WipeDirection;\n  easing: Easing;\n  background: string;\n}\n\nfunction v10XMigration(old: v10XConfig): LinearWipeConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    type: \"linearwipe\",\n    version: \"1.1.0\",\n    duration: old.duration,\n    direction: old.direction,\n    easing: old.easing,\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { MacroConfiguration } from \"../../steps\";\n\nexport class MacroMigrator extends Migrator<MacroConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => MacroConfiguration; } = {};\n\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\";\nimport { MeltConfiguration } from \"../../steps\";\n\nexport class MeltMigrator extends Migrator<MeltConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => MeltConfiguration } = {};\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\"\nimport { ParallelConfiguration } from \"../../steps\"\n\nexport class ParallelMigrator extends Migrator<ParallelConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => ParallelConfiguration; } = {};\n\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\";\nimport { RadialWipeConfiguration } from \"../../steps\";\nimport { Easing, RadialDirection } from \"../../types\";\nimport { migratev10XBackground } from \"../../utils\";\n\nexport class RadialWipeMigrator extends Migrator<RadialWipeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => RadialWipeConfiguration; } = {\n    \"~1.0\": v10Migration\n  };\n  public NewestVersion: string = \"1.1.0\"\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface V10Config {\n  id?: string;\n  easing?: string;\n  duration: number;\n  background: string;\n  radial: RadialDirection;\n}\n\nfunction v10Migration(old: V10Config): RadialWipeConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    easing: (old.easing ?? \"none\") as Easing,\n    version: \"1.1.0\",\n    radial: old.radial,\n    duration: old.duration,\n    type: \"radialwipe\",\n    target: [0.5, 0.5],\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { RemoveOverlayConfiguration, TransitionConfiguration } from \"../../steps\";\n\nexport class RemoveOverlayMigrator extends Migrator<RemoveOverlayConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => TransitionConfiguration; } = {\n    \"~1.0\": v10Migration\n  }\n\n  public NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface v10Config {\n  type: string;\n}\n\nfunction v10Migration(old: v10Config): RemoveOverlayConfiguration {\n  return {\n    id: foundry.utils.randomID(),\n    type: old.type,\n    version: \"1.1.0\"\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { RestoreOverlayConfiguration } from \"../../steps\";\n\nexport class RestoreOverlayMigrator extends Migrator<RestoreOverlayConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => RestoreOverlayConfiguration } = {};\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\";\nimport { SceneChangeConfiguration } from \"../../steps\";\n\nexport class SceneChangeMigrator extends Migrator<SceneChangeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => SceneChangeConfiguration } = {};\n\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\";\nimport { SoundConfiguration } from \"../../steps\";\n\n\nexport class SoundMigrator extends Migrator<SoundConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => SoundConfiguration; } = {\n    \"~1.0\": V10X\n  };\n  public NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface V10XConfig {\n  id: string;\n  file: string;\n  volume: number;\n}\n\nfunction V10X(old: V10XConfig): SoundConfiguration {\n  return {\n    id: old.id,\n    file: old.file,\n    type: \"sound\",\n    version: \"1.1.0\",\n    volume: old.volume,\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { SpiralShutterConfiguration } from '../../steps/types';\n\nexport class SpiralRadialWipeMigrator extends Migrator<SpiralShutterConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => SpiralShutterConfiguration } = {};\n\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { Migrator } from \"../Migrator\";\nimport { SpotlightWipeConfiguration } from \"../../steps\";\nimport { migratev10XBackground } from \"../../utils\";\nimport { Easing } from \"../../types\";\n\nexport class SpotlightWipeMigrator extends Migrator<SpotlightWipeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => SpotlightWipeConfiguration; } = {\n    \"~1.0\": v10X\n  };\n  public NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\n\n\ninterface V10XConfig {\n  duration: number;\n  direction: \"top\" | \"left\" | \"bottom\" | \"right\";\n  radial: \"inside\" | \"outside\";\n  background: string;\n  id?: string;\n  easing?: string;\n}\n\nfunction v10X(old: V10XConfig): SpotlightWipeConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    version: \"1.1.0\",\n    type: \"spotlightwipe\",\n    duration: old.duration,\n    easing: (old.easing ?? \"none\") as Easing,\n    direction: old.direction,\n    radial: old.radial,\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { TextureSwapConfiguration } from \"../../steps\";\nimport { isColor } from '../../utils';\n\n\nexport class TextureSwapMigrator extends Migrator<TextureSwapConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => TextureSwapConfiguration; } = {\n    \"~1.0\": v10X\n  };\n  public readonly NewestVersion: string = \"1.1\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface V10Config {\n  id?: string;\n  easing?: string;\n  texture: string;\n}\n\nfunction v10X(old: V10Config): TextureSwapConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    version: \"1.1.0\",\n    type: \"textureswap\",\n    bgSizingMode: \"stretch\",\n    backgroundImage: old.texture && !(isColor(old.texture)) ? old.texture : \"\",\n    backgroundColor: old.texture && !(isColor(old.texture)) ? \"\" : old.texture,\n    backgroundType: old.texture && !isColor(old.texture) ? \"image\" : \"color\",\n    applyToOverlay: true,\n    applyToScene: false\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { VideoConfiguration } from \"../../steps\";\nimport { migratev10XBackground } from \"../../utils\";\n\nexport class VideoMigrator extends Migrator<VideoConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => VideoConfiguration; } = {\n    \"~1.0\": v10X\n  }\n\n  public NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface v10Configuration {\n  file: string;\n  background: string;\n  volume: number;\n  clear?: boolean;\n  id?: string;\n  easing?: string;\n}\n\nfunction v10X(old: v10Configuration): VideoConfiguration {\n  return {\n    version: \"1.1.0\",\n    type: \"video\",\n    id: old.id ?? foundry.utils.randomID(),\n    file: old.file,\n    volume: old.volume,\n    clear: old.clear,\n    videoSizingMode: \"stretch\",\n    ...migratev10XBackground(old)\n  }\n}", "import { Migrator } from \"../Migrator\";\nimport { WaitConfiguration } from \"../../steps\";\n\nexport class WaitMigrator extends Migrator<WaitConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: any) => WaitConfiguration; } = {\n    \"~1.0\": v10X\n  }\n\n  public readonly NewestVersion: string = \"1.1.0\";\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}\n\ninterface V10XConfig {\n  id?: string;\n  easing?: string;\n  duration: number;\n}\n\nfunction v10X(old: V10XConfig): WaitConfiguration {\n  return {\n    id: old.id ?? foundry.utils.randomID(),\n    type: \"wait\",\n    version: \"1.1.0\",\n    duration: old.duration\n  };\n}", "import { Migrator } from \"../Migrator\";\nimport { WaveWipeConfiguration } from '../../steps/types';\n\nexport class WaveWipeMigrator extends Migrator<WaveWipeConfiguration> {\n  protected migrationFunctions: { [x: string]: (old: unknown) => WaveWipeConfiguration } = {};\n  public readonly NewestVersion: string = \"1.1.0\";\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  public Version(data: unknown): string { return ((data as any).version as string) ?? \"1.0.5\"; }\n}", "import { AngularWipeMigrator, BilinearWipeMigrator, ClockWipeMigrator, DiamondWipeMigrator, FadeMigrator, FireDissolveMigrator, FlashMigrator, InvertMigrator, LinearWipeMigrator, MacroMigrator, MeltMigrator, ParallelMigrator, RadialWipeMigrator, RemoveOverlayMigrator, RestoreOverlayMigrator, SceneChangeMigrator, SoundMigrator, SpiralRadialWipeMigrator, SpotlightWipeMigrator, TextureSwapMigrator, VideoMigrator, WaitMigrator, WaveWipeMigrator } from \"./steps\";\n\nconst TransitionSteps = {\n  angularwipe: new AngularWipeMigrator(),\n  bilinearwipe: new BilinearWipeMigrator(),\n  clockwipe: new ClockWipeMigrator(),\n  diamondwipe: new DiamondWipeMigrator(),\n  fade: new FadeMigrator(),\n  firedissolve: new FireDissolveMigrator(),\n  flash: new FlashMigrator(),\n  invert: new InvertMigrator(),\n  linearwipe: new LinearWipeMigrator(),\n  macro: new MacroMigrator(),\n  melt: new MeltMigrator(),\n  parallel: new ParallelMigrator(),\n  radialwipe: new RadialWipeMigrator(),\n  removeoverlay: new RemoveOverlayMigrator(),\n  restoreoverlay: new RestoreOverlayMigrator(),\n  scenechange: new SceneChangeMigrator(),\n  sound: new SoundMigrator(),\n  spiralradialwipe: new SpiralRadialWipeMigrator(),\n  spotlightwipe: new SpotlightWipeMigrator(),\n  textureswap: new TextureSwapMigrator(),\n  video: new VideoMigrator(),\n  wait: new WaitMigrator(),\n  wavewipe: new WaveWipeMigrator()\n}\n\nexport { TransitionSteps };\n", "import { SceneConfigurationMigrator } from \"./migration\";\nimport { TransitionSteps } from './migration/TransitionSteps';\n\nexport class DataMigration {\n  static SceneConfiguration = new SceneConfigurationMigrator();\n  static TransitionSteps = TransitionSteps;\n}\n", "import { SceneConfiguration } from \"./interfaces\";\nimport { DataMigration } from \"./DataMigration\";\nimport { SceneChangeConfiguration, SceneChangeStep, TransitionConfiguration } from \"./steps\";\nimport { SceneConfigV11, SceneConfigV12 } from \"./dialogs\";\nimport { BattleTransition } from \"./BattleTransition\";\nimport { InvalidSceneError } from \"./errors\";\n\nexport class ConfigurationHandler {\n  public static AddToNavigationBar(buttons: any[]) {\n    buttons.push(\n      {\n        name: \"BATTLETRANSITIONS.NAVIGATION.TRIGGER\",\n        icon: `<i class=\"fas bt-icon fa-fw crossed-swords\"></i>`,\n        condition: (li: JQuery<HTMLLIElement>) => {\n          try {\n            const scene = getScene(li);\n            if (!scene) return false;\n\n            if (scene.id === canvas?.scene?.id) return false;\n            const steps = this.GetSceneTransition(scene) ?? [];\n            return Array.isArray(steps) && steps.length;\n          } catch (err) {\n            ui.notifications?.error((err as Error).message, { console: false });\n            console.error(err as Error)\n          }\n        },\n        callback: (li: JQuery<HTMLLIElement>) => {\n          const scene = getScene(li);\n          if (!scene) throw new InvalidSceneError(typeof li.data(\"sceneId\") === \"string\" ? li.data(\"sceneId\") as string : typeof li.data(\"sceneId\"));\n          const sequence = this.GetSceneTransition(scene) ?? [];\n          if (!(Array.isArray(sequence) && sequence.length)) return;\n\n          const sceneChange = new SceneChangeStep({ scene: scene.id ?? \"\" });\n          const step: SceneChangeConfiguration = {\n            ...SceneChangeStep.DefaultSettings,\n            id: foundry.utils.randomID(),\n            ...sceneChange.config\n          };\n\n          void BattleTransition.executeSequence([\n            step,\n            ...sequence\n          ])\n        }\n      },\n      {\n        name: \"BATTLETRANSITIONS.NAVIGATION.CUSTOM\",\n        icon: \"<i class='fas fa-fw fa-hammer'></i>\",\n        condition: (li: JQuery<HTMLLIElement>) => {\n          const scene = getScene(li);\n          if (!scene) return false;\n          return scene.id !== canvas?.scene?.id;\n        },\n        callback: (li: JQuery<HTMLLIElement>) => {\n          const sceneId = li.data(\"sceneId\") as string;\n          const scene = game.scenes?.get(sceneId);\n          if (!(scene instanceof Scene)) throw new InvalidSceneError(typeof sceneId === \"string\" ? sceneId : typeof sceneId)\n          if (scene.canUserModify(game.user as User, \"update\"))\n            void BattleTransition.BuildTransition(scene);\n\n        }\n      }\n    )\n  }\n\n  public static SetSceneConfiguration(scene: Scene, config: SceneConfiguration): Promise<Scene | undefined> {\n    const newConfig: { [x: string]: unknown } = { ...config };\n\n    const oldFlag = scene.flags[__MODULE_ID__] as object;\n    for (const key in oldFlag) {\n      if (!Object.keys(newConfig).includes(key)) newConfig[`-=${key}`] = null;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    return (scene as any).update({\n      flags: {\n        \"battle-transitions\": newConfig\n      }\n    });\n  }\n\n  public static GetSceneConfiguration(scene: Scene): SceneConfiguration {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    const flags = scene.flags[__MODULE_ID__] as any;\n    if (!flags) {\n      return {\n        autoTrigger: false,\n        version: DataMigration.SceneConfiguration.NewestVersion,\n        sequence: []\n      }\n    }\n    // Check for data migration\n    if (DataMigration.SceneConfiguration.NeedsMigration(flags)) return DataMigration.SceneConfiguration.Migrate(flags);\n    else return flags as SceneConfiguration;\n  }\n\n  public static GetSceneTransition(scene: Scene): TransitionConfiguration[] {\n    const config = ConfigurationHandler.GetSceneConfiguration(scene);\n    return config.sequence;\n  }\n\n  public static async InjectSceneConfig(app: SceneConfig, html: JQuery<HTMLElement>, options: any) {\n    const config = ConfigurationHandler.GetSceneConfiguration(app.object);\n\n    if (game.release?.isNewer(\"12\")) await SceneConfigV12.inject(app, html, options, config);\n    else await SceneConfigV11.inject(app, html, options, ConfigurationHandler.GetSceneConfiguration(app.object));\n  }\n\n  public static BuildTransitionFromForm(html: JQuery<HTMLElement>) {\n    const sequence: TransitionConfiguration[] = [];\n    html.find(\"#transition-step-list [data-transition-type]\").each((index, element) => {\n      const flag = element.dataset.flag ?? \"\";\n      const step = JSON.parse(flag) as TransitionConfiguration;\n      sequence.push(step);\n    });\n    return sequence;\n  }\n\n}\n\n\nfunction getScene(li: JQuery<HTMLLIElement>): Scene | undefined {\n  const sceneId = li.data(\"sceneId\") as string | undefined;\n  if (!sceneId) return undefined;\n  if (!sceneId) throw new InvalidSceneError(typeof sceneId === \"string\" ? sceneId : typeof sceneId);\n  const scene = game.scenes?.get(sceneId);\n  if (!(scene instanceof Scene)) throw new InvalidSceneError(typeof sceneId === \"string\" ? sceneId : typeof sceneId);\n  return scene;\n}\n", "import { ConfigurationHandler } from \"../ConfigurationHandler\";\nimport { InvalidTransitionError } from \"../errors\";\nimport { SceneConfiguration } from \"../interfaces\";\nimport { TransitionConfiguration } from \"../steps\";\nimport { sequenceDuration } from \"../transitionUtils\";\nimport { downloadJSON, formatDuration, getStepClassByKey, importSequence, localize } from \"../utils\";\nimport { addStepDialog, buildTransitionFromForm, confirm, editStepDialog } from \"./functions\";\n\n// #region Classes (1)\n\nexport class SceneConfigV11 extends SceneConfig {\n  // #region Public Static Methods (1)\n\n  public static async inject(app: SceneConfig, html: JQuery<HTMLElement>, options: any, config: SceneConfiguration): Promise<void> {\n    const navElement = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/scene-nav-bar.hbs`, {});\n    const navBar = html.find(\"nav.sheet-tabs.tabs\");\n    navBar.append(navElement);\n\n    const navContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/scene-config.hbs`, config);\n    html.find(`button[type=\"submit\"]`).before(`<div class=\"tab\" data-tab=\"battle-transitions\">${navContent}</div>`);\n    addEventListeners(app, html);\n  }\n\n  // #endregion Public Static Methods (1)\n}\n\n// #endregion Classes (1)\n\n// #region Functions (8)\n\nfunction addEventListeners(app: SceneConfig, html: JQuery<HTMLElement>) {\n  html.find(\"button[data-action='add-step']\").on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void addStep(app, html);\n    }\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  (html.find(\"#transition-step-list\") as any).sortable({\n    handle: \".drag-handle\",\n    containment: \"parent\",\n    axis: \"y\"\n  });\n\n  // Download\n  html.find(`button[data-action=\"export-json\"]`).on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      const sequence = buildTransitionFromForm(html);\n      downloadJSON(sequence, `${app.document.name}.json`);\n    }\n  });\n\n  html.find(`button[data-action=\"import-json\"]`).on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void uploadHandler(app, html);\n    }\n  })\n\n  // Save button\n  html.find(\"button[type='submit']\").on(\"click\", () => {\n    const autoTrigger = html.find(\"#auto-trigger\").is(\":checked\") ?? false;\n    const sequence = buildTransitionFromForm(html);\n\n    void ConfigurationHandler.SetSceneConfiguration(\n      app.document,\n      {\n        version: \"1.1.0\",\n        autoTrigger,\n        isTriggered: false,\n        sequence\n      });\n  });\n\n  html.find(\"[data-action='clear-steps']\").on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void clearButtonhandler(app, html);\n    }\n  })\n  setClearDisabled(html);\n}\n\nasync function addStep(app: SceneConfig, html: JQuery<HTMLElement>) {\n  const key = await addStepDialog();\n  if (!key) return;\n\n  const step = getStepClassByKey(key);\n  if (!step) throw new InvalidTransitionError(key);\n\n  let config: TransitionConfiguration | null = null;\n  if (!step.skipConfig) {\n    config = await editStepDialog(step.DefaultSettings, undefined, app.document);\n  } else {\n    config = {\n      ...step.DefaultSettings,\n      id: foundry.utils.randomID()\n    }\n  }\n\n  if (!config) return;\n  await upsertStepButton(app, html, config);\n\n  app.setPosition();\n}\n\nfunction addStepEventListeners(app: SceneConfig, html: JQuery<HTMLElement>, button: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  // Remove button\n  button.find(\"[data-action='remove']\").on(\"click\", () => {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(config.type);\n    confirm(\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.TITLE\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }),\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.CONTENT\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) })\n    )\n      .then(confirm => {\n        if (confirm) {\n          button.remove();\n          app.setPosition();\n        }\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false });\n        console.error(err);\n      });\n  });\n\n  // Configure button\n  button.find(\"[data-action='configure']\").on(\"click\", () => {\n    editStepDialog(config, undefined, app.document)\n      .then(newConfig => {\n        if (newConfig) {\n          // Replace button\n          return upsertStepButton(app, html, newConfig)\n        }\n      }).then(() => {\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false })\n        console.error(err);\n      })\n  });\n}\n\nasync function clearButtonhandler(app: SceneConfig, html: JQuery<HTMLElement>) {\n  const confirmed = await confirm(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.MESSAGE\"));\n  if (!confirmed) return;\n  html.find(\"#transition-step-list\").children().remove();\n  await updateTotalDuration(html);\n  setClearDisabled(html);\n  app.setPosition();\n}\n\nfunction setClearDisabled(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  if (!sequence.length) html.find(\"#clear-steps\").attr(\"disabled\", \"true\");\n  else html.find(\"#clear-steps\").removeAttr(\"disabled\");\n}\n\nasync function updateTotalDuration(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  const totalDuration = await sequenceDuration(sequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n}\n\nasync function uploadHandler(app: SceneConfig, html: JQuery<HTMLElement>) {\n  try {\n    const current = buildTransitionFromForm(html);\n    if (current.length) {\n      const confirmation = await confirm(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.MESSAGE\"));\n      if (!confirmation) return;\n    }\n    const sequence = await importSequence();\n    if (!sequence) return;\n\n    html.find(\"#transition-step-list\").children().remove();\n    for (const step of sequence)\n      await upsertStepButton(app, html, step);\n  } catch (err) {\n    ui.notifications?.error((err as Error).message, { console: false });\n    console.error(err);\n  }\n}\n\nasync function upsertStepButton(app: SceneConfig, html: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  const step = getStepClassByKey(config.type);\n  if (!step) throw new InvalidTransitionError(config.type);\n\n  const sequence = [...buildTransitionFromForm(html), config];\n  const durationRes = step.getDuration(config, sequence);\n  const calculatedDuration = durationRes instanceof Promise ? await durationRes : durationRes;\n\n  await updateTotalDuration(html);\n\n  const buttonContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/step-item.hbs`, {\n    ...step.DefaultSettings,\n    ...config,\n    name: localize(`BATTLETRANSITIONS.${step.name}.NAME`),\n    description: localize(`BATTLETRANSITIONS.${step.name}.DESCRIPTION`),\n    type: step.key,\n    calculatedDuration,\n    skipConfig: step.skipConfig,\n    newScene: app.document.uuid,\n    flag: JSON.stringify({\n      ...step.DefaultSettings,\n      ...config\n    })\n  });\n\n  const button = $(buttonContent);\n\n  const extant = html.find(`[data-id=\"${config.id}\"]`);\n  if (extant.length) extant.replaceWith(button);\n  else html.find(\"#transition-step-list\").append(button);\n\n  app.setPosition();\n  setClearDisabled(html);\n  addStepEventListeners(app, html, button, config);\n}\n\n// #endregion Functions (8)\n", "import { ConfigurationHandler } from \"../ConfigurationHandler\";\nimport { InvalidTransitionError } from \"../errors\";\nimport { SceneConfiguration } from \"../interfaces\";\nimport { TransitionConfiguration } from \"../steps\";\nimport { sequenceDuration } from \"../transitionUtils\";\nimport { downloadJSON, formatDuration, getStepClassByKey, importSequence, localize } from \"../utils\";\nimport { addStepDialog, editStepDialog, confirm, buildTransitionFromForm } from \"./functions\";\n\n// #region Classes (1)\n\nexport class SceneConfigV12 extends SceneConfig {\n  // #region Public Static Methods (1)\n\n  public static async inject(app: SceneConfig, html: JQuery<HTMLElement>, options: any, config: SceneConfiguration) {\n    const navElement = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/scene-nav-bar.hbs`, {});\n    const navBar = html.find(\"nav.sheet-tabs.tabs[data-group='main']\");\n    navBar.append(navElement);\n\n    const navContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/scene-config.hbs`, config);\n    html.find(\"footer.sheet-footer\").before(`<div class=\"tab\" data-group=\"main\" data-tab=\"${__MODULE_ID__}\">${navContent}</div>`);\n\n    // Insert sequence steps\n    for (const step of config.sequence) {\n      await upsertStepButton(app, html, step);\n    }\n\n    addEventListeners(app, html);\n  }\n\n  // #endregion Public Static Methods (1)\n}\n\n// #endregion Classes (1)\n\n// #region Functions (8)\n\nfunction addEventListeners(app: SceneConfig, html: JQuery<HTMLElement>) {\n  // Add step button\n  html.find(`button[data-action=\"add-step\"]`).on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void addStep(app, html);\n    }\n  });\n\n  // Drag reorder\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  (html.find(\"#transition-step-list\") as any).sortable({\n    handle: \".drag-handle\",\n    containment: \"parent\",\n    axis: \"y\"\n  });\n\n  // Download\n  html.find(`[data-action=\"export-json\"]`).on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      const sequence = buildTransitionFromForm(html);\n      downloadJSON(sequence, `${app.document.name}.json`);\n    }\n  });\n\n  html.find(`[data-action=\"import-json\"]`).on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void uploadHandler(app, html);\n    }\n  })\n\n  // Save button\n  html.find(\".sheet-footer button[type='submit']\").on(\"click\", () => {\n    const autoTrigger = html.find(\"#auto-trigger\").is(\":checked\") ?? false;\n    const sequence = buildTransitionFromForm(html);\n\n    void ConfigurationHandler.SetSceneConfiguration(\n      app.document,\n      {\n        version: \"1.1.0\",\n        autoTrigger,\n        isTriggered: false,\n        sequence\n      });\n  });\n\n  html.find(\"[data-action='clear-steps']\").on(\"click\", e => {\n    if ($(e.currentTarget).is(\":visible\")) {\n      e.preventDefault();\n      void clearButtonhandler(app, html);\n    }\n  })\n  setClearDisabled(html);\n}\n\nasync function addStep(app: SceneConfig, html: JQuery<HTMLElement>) {\n  const key = await addStepDialog();\n  if (!key) return;\n  const step = getStepClassByKey(key);\n  if (!step) throw new InvalidTransitionError(key);\n\n  let config: TransitionConfiguration | null = null;\n  if (!step.skipConfig) {\n    // Edit form\n    config = await editStepDialog(step.DefaultSettings, undefined, app.document)\n  } else {\n    config = {\n      ...step.DefaultSettings,\n      id: foundry.utils.randomID()\n    }\n  }\n  if (!config) return;\n\n  // Inject step\n  await upsertStepButton(app, html, config);\n\n  app.setPosition();\n}\n\nfunction addStepEventListeners(app: SceneConfig, html: JQuery<HTMLElement>, button: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  // Remove button\n  button.find(\"[data-action='remove']\").on(\"click\", () => {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(config.type);\n    confirm(\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.TITLE\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }),\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.CONTENT\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) })\n    )\n      .then(confirm => {\n        if (confirm) {\n          button.remove();\n          app.setPosition();\n        }\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false });\n        console.error(err);\n      });\n  })\n\n  // Configure button\n  button.find(\"[data-action='configure']\").on(\"click\", () => {\n    editStepDialog(config, undefined, app.document)\n      .then(newConfig => {\n        if (newConfig) {\n          // Replace button\n          return upsertStepButton(app, html, newConfig)\n        }\n      }).then(() => {\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false })\n        console.error(err);\n      })\n  });\n}\n\nasync function clearButtonhandler(app: SceneConfig, html: JQuery<HTMLElement>) {\n  const confirmed = await confirm(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.MESSAGE\"));\n  if (!confirmed) return;\n  html.find(\"#transition-step-list\").children().remove();\n  await updateTotalDuration(html);\n  setClearDisabled(html);\n  app.setPosition();\n}\n\nfunction setClearDisabled(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  if (!sequence.length) html.find(\"#clear-steps\").attr(\"disabled\", \"true\");\n  else html.find(\"#clear-steps\").removeAttr(\"disabled\");\n}\n\nasync function updateTotalDuration(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  const totalDuration = await sequenceDuration(sequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n}\n\nasync function uploadHandler(app: SceneConfig, html: JQuery<HTMLElement>) {\n  try {\n    const current = buildTransitionFromForm(html);\n    if (current.length) {\n      const confirmation = await confirm(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.IMPORTCONFIRM.MESSAGE\"));\n      if (!confirmation) return;\n    }\n    const sequence = await importSequence();\n    if (!sequence) return;\n    html.find(\"#transition-step-list\").children().remove();\n    for (const step of sequence)\n      await upsertStepButton(app, html, step);\n  } catch (err) {\n    ui.notifications?.error((err as Error).message, { console: false });\n    console.error(err);\n  }\n}\n\nasync function upsertStepButton(app: SceneConfig, html: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  const step = getStepClassByKey(config.type);\n  if (!step) throw new InvalidTransitionError(config.type);\n\n  const sequence = [...buildTransitionFromForm(html), config];\n  const durationRes = step.getDuration(config, sequence);\n  const calculatedDuration = durationRes instanceof Promise ? await durationRes : durationRes;\n\n  await updateTotalDuration(html);\n\n  const buttonContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/step-item.hbs`, {\n    ...step.DefaultSettings,\n    ...config,\n    name: localize(`BATTLETRANSITIONS.${step.name}.NAME`),\n    description: localize(`BATTLETRANSITIONS.${step.name}.DESCRIPTION`),\n    type: step.key,\n    calculatedDuration,\n    skipConfig: step.skipConfig,\n    newScene: app.document.uuid,\n    flag: JSON.stringify({\n      ...step.DefaultSettings,\n      ...config\n    })\n  });\n\n  const button = $(buttonContent);\n\n  const extant = html.find(`[data-id=\"${config.id}\"]`);\n  if (extant.length) extant.replaceWith(button);\n  else html.find(\"#transition-step-list\").append(button);\n\n  app.setPosition();\n  setClearDisabled(html);\n  addStepEventListeners(app, html, button, config);\n}\n\n// #endregion Functions (8)\n", "import { coerceMacro, coerceScene } from \"./coercion\";\nimport { CUSTOM_HOOKS, PreparedSequences } from \"./constants\";\nimport { InvalidMacroError, InvalidSceneError, InvalidSoundError, InvalidTargetError, InvalidTransitionError, NoPreviousStepError, ParallelExecuteError, PermissionDeniedError, RepeatExecuteError, StepNotReversibleError, TransitionToSelfError } from \"./errors\";\nimport { PreparedTransitionSequence, TransitionSequence } from \"./interfaces\";\nimport { AngularWipeConfiguration, BackgroundTransition, BilinearWipeConfiguration, ClockWipeConfiguration, DiamondWipeConfiguration, FadeConfiguration, FireDissolveConfiguration, FlashConfiguration, InvertConfiguration, LinearWipeConfiguration, MacroConfiguration, MeltConfiguration, RadialWipeConfiguration, SceneChangeConfiguration, SoundConfiguration, SpiralWipeConfiguration, SpiralShutterConfiguration, SpotlightWipeConfiguration, TextureSwapConfiguration, TransitionConfiguration, TwistConfiguration, VideoConfiguration, WaitConfiguration, WaveWipeConfiguration, ZoomBlurConfiguration, BossSplashConfiguration, ParallelConfiguration, BarWipeConfiguration, RepeatConfiguration, ZoomConfiguration, ZoomArg, LoadingTipLocation, LoadingTipConfiguration, ReverseConfiguration } from \"./steps\";\nimport SocketHandler from \"./SocketHandler\";\nimport { cleanupTransition, hideLoadingBar, removeFiltersFromScene, setupTransition, showLoadingBar } from \"./transitionUtils\";\nimport { BilinearDirection, ClockDirection, Easing, RadialDirection, TextureLike, WipeDirection } from \"./types\";\nimport { backgroundType, deepCopy, deserializeTexture, getStepClassByKey, isColor, localize, log, serializeTexture, shouldUseAppV2 } from \"./utils\";\nimport { TransitionStep } from \"./steps/TransitionStep\";\nimport { transitionBuilderDialog } from \"./dialogs\";\nimport { filters } from \"./filters\";\n\n// #region Type aliases (1)\n\ntype TransitionSequenceCallback = (transition: BattleTransition) => BattleTransition;\n\n// #endregion Type aliases (1)\n\n// #region Classes (1)\n\n// let suppressSoundUpdates: boolean = false;\n\n/**\n * Primary class that handles queueing, synchronizing, and executing transition sequences.\n */\nexport class BattleTransition {\n  // #region Properties (3)\n\n  #sequence: TransitionConfiguration[] = [];\n\n  public static Filters = filters;\n  // // eslint-disable-next-line no-unused-private-class-members\n  // #transitionOverlay: PIXI.DisplayObject[] = [];\n  public static SuppressSoundUpdates: boolean = false;\n\n  // #endregion Properties (3)\n\n  // #region Constructors (6)\n\n  // static get SuppressSoundUpdates(): boolean { return suppressSoundUpdates; }\n  // static set SuppressSoundUpdates(val: boolean) {\n  //   log(\"Setting SuppressSoundUpdates:\", val);\n  //   suppressSoundUpdates = val;\n  // }\n  constructor()\n  constructor(scene: Scene)\n  constructor(id: string)\n  constructor(name: string)\n  constructor(uuid: string)\n  constructor(arg?: unknown) {\n    try {\n      if (arg) {\n        const scene = coerceScene(arg);\n        if (!(scene instanceof Scene)) throw new InvalidSceneError(typeof arg === \"string\" ? arg : typeof arg);\n        if (scene.id === canvas?.scene?.id) throw new TransitionToSelfError();\n        this.#sequence.push({ type: \"scenechange\", scene: scene.id } as SceneChangeConfiguration);\n      }\n    } catch (err) {\n      ui.notifications?.error((err as Error).message);\n      throw err;\n    }\n  }\n\n  // #endregion Constructors (6)\n\n  // #region Public Getters And Setters (1)\n\n  public get sequence(): TransitionConfiguration[] { return this.#sequence; }\n\n  // #endregion Public Getters And Setters (1)\n\n  // #region Public Static Methods (7)\n\n  public static async BuildTransition(scene?: Scene): Promise<void> {\n    const transition = await transitionBuilderDialog(scene);\n    if (transition) await BattleTransition.executeSequence(transition);\n  }\n\n  public static async SelectScene(omitCurrent: boolean = false): Promise<Scene | null> {\n    const content = await renderTemplate(`/modules/${__MODULE_ID__}/templates/scene-selector.hbs`, {\n      scenes: game.scenes?.contents.reduce((prev, curr) => {\n        if (omitCurrent && curr.id === game.scenes?.current?.id) return prev;\n        return [...prev, { id: curr.id, name: curr.name }]\n      }, [] as { id: string, name: string }[])\n    });\n\n    if (shouldUseAppV2()) {\n      return foundry.applications.api.DialogV2.wait({\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        window: ({ title: localize(\"BATTLETRANSITIONS.SCENESELECTOR.TITLE\") } as any),\n        content,\n        buttons: [\n          {\n            label: `<i class=\"fas fa-times\"></i> ${localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\")}`,\n            action: \"cancel\",\n            callback: () => Promise.resolve(null)\n          },\n          {\n            label: `<i class=\"fas fa-check\"></i> ${localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.OK\")}`,\n            action: \"ok\",\n            callback: (event: Event, button: HTMLButtonElement, dialog: HTMLDialogElement) => {\n              return Promise.resolve(game.scenes?.get($(dialog).find(\"#scene\").val() as string) ?? null);\n            }\n          }\n        ]\n      })\n    } else {\n      return Dialog.wait({\n        title: localize(\"BATTLETRANSITIONS.SCENESELECTOR.TITLE\"),\n        content,\n        default: \"ok\",\n        buttons: {\n          cancel: {\n            icon: `<i class=\"fas fa-times\"></i>`,\n            label: localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\"),\n            callback: () => null\n          },\n          ok: {\n            icon: `<i class=\"fas fa-check\"></i>`,\n            label: localize(\"BATTLETRANSITIONS.DIALOGS.BUTTONS.OK\"),\n            callback: (html) => game.scenes?.get($(html).find(\"#scene\").val() as string) ?? null\n          }\n        }\n      }) as Promise<Scene | null>\n    }\n  }\n\n  public static async executePreparedSequence(id: string): Promise<void> {\n    const prepared = PreparedSequences[id];\n    if (!prepared) throw new InvalidTransitionError(typeof prepared);\n\n    Hooks.callAll(CUSTOM_HOOKS.TRANSITION_START, prepared.original);\n\n    let container: PIXI.Container | null = null;\n\n    try {\n      container = await setupTransition();\n      prepared.overlay = [...container.children];\n\n      hideLoadingBar();\n\n      BattleTransition.SuppressSoundUpdates = true;\n      // Execute\n      for (const step of prepared.prepared.sequence) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        if ((step.config as any).backgroundType === \"overlay\" || (step.config as any).serializedTexture === \"overlay\") {\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n          (step.config as any).deserializedTexture = (container.children[0] as PIXI.Sprite).texture\n        }\n\n        const exec = step.execute(container, prepared.original, prepared);\n        if (exec instanceof Promise) await exec;\n      }\n\n      BattleTransition.SuppressSoundUpdates = false;\n\n      // Teardown\n      for (const step of prepared.prepared.sequence) {\n        await step.teardown(container);\n      }\n\n      removeFiltersFromScene(prepared.prepared);\n    } catch (err) {\n      ui.notifications?.error((err as Error).message, { console: false });\n      console.error(err);\n    } finally {\n      setTimeout(() => { showLoadingBar(); }, 250);\n      if (container) cleanupTransition(container);\n      if (prepared) Hooks.callAll(CUSTOM_HOOKS.TRANSITION_END, prepared.original)\n      else Hooks.callAll(CUSTOM_HOOKS.TRANSITION_END);\n      delete PreparedSequences[id];\n    }\n  }\n\n  /**\n   * Validates a transition sequence and triggers it for all connected clients\n   * @param {TransitionConfiguration[]} sequence - {@link TransitionConfiguration}[] representing steps of the sequence\n   */\n  public static async executeSequence(sequence: TransitionConfiguration[]): Promise<void> {\n    // Check for scenechange step\n    if (sequence[0].type !== \"scenechange\") throw new InvalidSceneError(typeof undefined);\n\n    // Validate the target scene\n    const scene = (game.scenes?.get((sequence[0] as SceneChangeConfiguration).scene)) as Scene;\n    if (!(scene instanceof Scene)) throw new InvalidSceneError(typeof (sequence[0] as SceneChangeConfiguration).scene === \"string\" ? (sequence[0] as SceneChangeConfiguration).scene : typeof (sequence[0] as SceneChangeConfiguration).scene);\n\n    // Make sure we have permission to activate the new scene\n    if (!scene.canUserModify(game.user as User, \"update\")) throw new PermissionDeniedError();\n\n    // Socket time baybee\n    await SocketHandler.execute(sequence);\n  }\n\n  /**\n   * Prepares a given set of transitions steps for execution, allowing them to preload media etc\n   * @param {TransitionSequence[]} sequence - {@link TransitionConfiguration}[] steps to be prepared\n   * @returns \n   */\n  public static async prepareSequence(sequence: TransitionSequence): Promise<TransitionStep[]> {\n    try {\n      const steps: TransitionStep[] = [];\n      for (const temp of sequence.sequence) {\n        const step = { ...temp };\n        const instance = getStepInstance(step);\n        if (!instance) throw new InvalidTransitionError(typeof step.type === \"string\" ? step.type : typeof step.type);\n\n        // Handle steps with backgrounds\n        if (Object.prototype.hasOwnProperty.call(step, \"backgroundType\")) {\n          const bgStep = step as unknown as BackgroundTransition;\n          if (bgStep.serializedTexture) {\n            bgStep.deserializedTexture = deserializeTexture(bgStep.serializedTexture);\n          } else {\n            switch (bgStep.backgroundType) {\n              case \"color\":\n                bgStep.deserializedTexture = deserializeTexture(bgStep.backgroundColor ?? \"transparent\");\n                break;\n              case \"image\":\n                bgStep.deserializedTexture = deserializeTexture(bgStep.backgroundImage ?? \"transparent\");\n                break;\n            }\n          }\n        }\n\n        const res = instance.prepare(sequence);\n        if (res instanceof Promise) await res;\n\n        steps.push(instance);\n      }\n\n      PreparedSequences[sequence.id] = {\n        original: sequence,\n        prepared: {\n          ...sequence,\n          sequence: steps,\n          sceneFilters: []\n        },\n        overlay: []\n      }\n\n      return steps;\n    } catch (err) {\n      ui.notifications?.error((err as Error).message, { console: false });\n      console.error(err);\n      return []\n    }\n  }\n\n  public static async teardownSequence(container: PIXI.Container, sequence: PreparedTransitionSequence) {\n    for (const step of sequence.sequence) {\n      await step.teardown(container);\n    }\n  }\n\n  public static async validateSequence(sequence: TransitionConfiguration[]): Promise<TransitionConfiguration[] | Error> {\n    try {\n      const validated: TransitionConfiguration[] = [];\n      for (const step of sequence) {\n        const handler = getStepClassByKey(step.type);\n        // const handler = BattleTransition.StepTypes[step.type];\n        if (!handler) throw new InvalidTransitionError(step.type);\n\n        const valid = await handler.validate(step, sequence);\n        if (valid instanceof Error) return valid;\n        validated.push(valid);\n      }\n      return validated;\n    } catch (err) {\n      return err as Error;\n    }\n  }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (52)\n\n  /**\n   * Adds an angular wipe, mimicking the battle with Brock in Pokemon Fire Red\n   * @param {number} [duration=1000] - Duration that the wipe should last\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike} representing the background\n   * @param {Easing} [easing=\"none\"] - {@link Easing} to use when animating this transition\n   * @returns \n   */\n  public angularWipe(duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n    this.#sequence.push({\n      type: \"angularwipe\",\n      duration,\n      serializedTexture,\n      backgroundType: backgroundType(background),\n      easing\n    } as AngularWipeConfiguration);\n\n    return this;\n  }\n\n  /**\n   * Generate a wipe of alternating bars either horizontally or vertically\n   * @param {number} bars - Number of bars into which to split the screen\n   * @param {\"horizontal\" | \"vertical\"} direction - Direction the bars should travel\n   * @param {number} [duration=1000] - Duration, in milliseconds, the wipe should take to complete\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   */\n  public barWipe(bars: number, direction: \"horizontal\" | \"vertical\", duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n\n    const step = getStepClassByKey(\"barwipe\");\n    if (!step) throw new InvalidTransitionError(\"barwipe\");\n    this.#sequence.push({\n      ...step.DefaultSettings,\n      duration,\n      bars,\n      easing,\n      direction,\n      serializedTexture\n    } as BarWipeConfiguration);\n\n    return this;\n  }\n\n  /**\n   * Adds a bilinear wipe\n   * @param {BilinearDirection} direction - {@link BilinearDirection}\n   * @param {RadialDirection} radial - {@link RadialDirection}\n   * @param {number} [duration=1000] - Duration in milliseconds that the wipe should last\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike} representing the background\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public bilinearWipe(direction: BilinearDirection, radial: RadialDirection, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n    this.#sequence.push({\n      type: \"bilinearwipe\",\n      serializedTexture,\n      backgroundType: backgroundType(background),\n      duration,\n      direction,\n      radial,\n      easing\n    } as BilinearWipeConfiguration);\n\n    return this;\n  }\n\n  /**\n   * Triggers an animation from the Boss Splash Screen module\n   * @param {BossSplashConfiguration} config - {@link BossSplashConfiguration}\n   */\n  public bossSplash(config: BossSplashConfiguration): this {\n    const step = getStepClassByKey(\"bosssplash\");\n    if (!step) throw new InvalidTransitionError(\"bosssplash\");\n    const newConfig: BossSplashConfiguration = {\n      ...step.DefaultSettings,\n      ...config\n    };\n\n    this.#sequence.push(newConfig);\n    return this;\n  }\n\n  /**\n   * Dissolves the screen with a fire sort of effect\n   * @param {number} [duration=1000] - Duration, in milliseconds, the dissolve should take to complete\n   * @param {number} [burnSize=1.3] - Relative size of the burn effect\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   */\n  public burn(duration: number = 1000, burnSize: number = 1.3, easing: Easing = \"none\"): this {\n    this.#sequence.push({\n      type: \"firedissolve\",\n      duration,\n      burnSize,\n      easing\n    } as FireDissolveConfiguration)\n    return this;\n  }\n\n  /**\n   * Removes any active transition effects from the overlay.\n   */\n  public clearEffects(): this {\n    const step = getStepClassByKey(\"cleareffects\");\n    if (!step) throw new InvalidTransitionError(\"cleareffects\");\n    this.#sequence.push({\n      ...step.DefaultSettings,\n      id: foundry.utils.randomID()\n    });\n    return this;\n  }\n\n  /**\n   * Adds a clock wipe to the queue\n   * @param {ClockDirection} clockDirection - {@link ClockDirection}\n   * @param {WipeDirection} direction - {@link WipeDirection}\n   * @param {number} [duration=1000] - Duration, in milliseconds, that the wipe should last\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public clockWipe(clockDirection: ClockDirection, direction: WipeDirection, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n    this.#sequence.push({\n      type: \"clockwipe\",\n      serializedTexture,\n      duration,\n      clockDirection: clockDirection,\n      direction,\n      backgroundType: backgroundType(background),\n      easing\n    } as ClockWipeConfiguration)\n\n    return this;\n  }\n\n  /**\n   * Adds a wipe that causes diamond-shapes to disappear over time from left to right\n   * @param {number} [size=40] - Relative size of the diamonds\n   * @param {number} [duration=1000] - Duration, in milliseconds, that the wipe should last\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public diamondWipe(size: number = 40, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n\n    this.#sequence.push({\n      type: \"diamondwipe\",\n      serializedTexture,\n      size,\n      backgroundType: backgroundType(background),\n      duration,\n      easing\n    } as DiamondWipeConfiguration)\n\n    return this;\n  }\n\n  /**\n   * Executes the transition sequence built for this {@link BattleTransition} instance.\n   * @returns {Promise} - A promise that resolves when the transition is done for all users\n   */\n  public async execute(): Promise<void> {\n    if (!(Array.isArray(this.#sequence) && this.#sequence.length)) throw new InvalidTransitionError(typeof this.#sequence);\n    await SocketHandler.execute(this.#sequence)\n  }\n\n  /**\n   * Fades the screen\n   * @param {number} [duration=1000] - Duration, in milliseconds, the fade should take to complete\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public fade(duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n    this.#sequence.push({\n      type: \"fade\",\n      serializedTexture,\n      backgroundType: backgroundType(background),\n      duration,\n      easing\n    } as FadeConfiguration)\n    return this;\n  }\n\n  /**\n   * Changes the current overlay texture to another for a specified amount of time\n   * @param {TextureLike} texture - {@link TextureLike}\n   * @param {number} [duration] - Duration, in milliseconds, for this effect to last\n   * @returns \n   */\n  public flash(texture: TextureLike, duration: number): this {\n    const step = getStepClassByKey(\"flash\");\n    if (!step) throw new InvalidTransitionError(\"flash\");\n\n    const serializedTexture = serializeTexture(texture);\n    this.#sequence.push({\n      ...step.DefaultSettings,\n      duration,\n      serializedTexture\n    } as FlashConfiguration);\n    return this;\n  }\n\n  /**\n   * Sets the transition overlay to invisible, but will still allow for playing transition effects.\n   * @returns \n   */\n  public hideOverlay(): this {\n    this.#sequence.push({ id: foundry.utils.randomID(), type: \"removeoverlay\", version: \"1.1.0\" });\n    return this;\n  }\n\n  /**\n   * \n   * @param {number} amount - Amount by which to shift the hue\n   * @param {number} [duration=0] - Duration, in milliseconds, the shift should take to complete\n   */\n  public hueShift(amount: number, duration: number = 0): this {\n    const step = getStepClassByKey(\"hueshift\");\n    if (!step) throw new InvalidTransitionError(\"hueshift\");\n    const config = {\n      ...step.DefaultSettings,\n      maxShift: amount,\n      duration\n    };\n    this.#sequence.push(config);\n    return this;\n  }\n\n  /**\n   * Inverts the current overlay texture\n   * @returns \n   */\n  public invert(): this {\n    const step = getStepClassByKey(\"invert\");\n    if (!step) throw new InvalidTransitionError(\"invert\");\n    this.#sequence.push({\n      ...step.DefaultSettings,\n      id: foundry.utils.randomID()\n    } as InvertConfiguration);\n    return this;\n  }\n\n  /**\n   * Adds a linear wipe to the queue\n   * @param {WipeDirection} direction - The side of the screen from which the wipe should start\n   * @param {number} [duration=1000] - Duration, in milliseconds, for this wipe to take to complete\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public linearWipe(direction: WipeDirection, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n\n    this.#sequence.push({\n      type: \"linearwipe\",\n      serializedTexture,\n      direction,\n      duration,\n      backgroundType: backgroundType(background),\n      easing\n    } as LinearWipeConfiguration)\n    return this;\n  }\n\n  public loadingTip(message: string, location?: LoadingTipLocation, duration?: number, style?: PIXI.HTMLTextStyle): this\n  public loadingTip(rollTable: string, location?: LoadingTipLocation, style?: PIXI.HTMLTextStyle): this\n  public loadingTip(source: string, location: LoadingTipLocation = \"bottomcenter\", ...others: unknown[]): this {\n    const step = getStepClassByKey(\"loadingtip\");\n    if (!step) throw new InvalidTransitionError(\"loadingtip\");\n\n    // Parse arguments\n    const duration: number = typeof others[0] === \"number\" ? others[0] : 0;\n\n    let style: PIXI.HTMLTextStyle | null = null;\n    if (others[1] instanceof PIXI.HTMLTextStyle) {\n      style = others[1];\n    } else if (others[0] instanceof PIXI.HTMLTextStyle) {\n      style = others[0];\n    } else {\n      style = new PIXI.HTMLTextStyle();\n      deepCopy(style, PIXI.HTMLTextStyle.defaultStyle);\n      deepCopy(style, (step.DefaultSettings as LoadingTipConfiguration).style);\n    }\n\n    // Check for UUID\n    const parsed = typeof foundry.utils.parseUuid === \"function\" ? foundry.utils.parseUuid(source) : parseUuid(source);\n\n    const config: LoadingTipConfiguration = {\n      ...step.DefaultSettings as LoadingTipConfiguration,\n      duration,\n      location\n    }\n\n    if (parsed && parsed.type === RollTable.documentName) {\n      const table: RollTable | undefined = fromUuidSync(source) as RollTable | undefined;\n      if (table instanceof RollTable) {\n        config.source = \"rolltable\";\n        config.table = table.uuid;\n      }\n    } else {\n      config.source = \"string\";\n      config.message = source;\n    }\n    config.style = JSON.parse(JSON.stringify(style)) as object;\n\n    this.#sequence.push(config);\n\n    return this;\n  }\n\n  /**\n   * Queues up a macro execution\n   * @param {string | Macro} macro - The {@link Macro} to execute\n   * @returns \n   */\n  public macro(macro: string | Macro): this {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    const actualMacro = coerceMacro(macro as any);\n    if (!actualMacro) throw new InvalidMacroError(typeof macro === \"string\" ? macro : typeof macro);\n    this.#sequence.push({\n      type: \"macro\",\n      macro: actualMacro.uuid\n    } as MacroConfiguration);\n    return this;\n  }\n\n  /**\n   * Queues up a Doom-style screen melt\n   * @param {number} [duration=1000] - Duration, in milliseconds the melt should take to complete\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   */\n  public melt(duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n\n    this.#sequence.push({\n      type: \"melt\",\n      serializedTexture,\n      duration,\n      backgroundType: backgroundType(background),\n      easing\n    } as MeltConfiguration)\n\n    return this;\n  }\n\n  /*\n   * Queues up a set of sequences to run in parallel\n   * @param {TransitionSequenceCallback[]} callbacks - Set of {@link TransitionSequenceCallback}s to build sequences to be run in parallel.  Do NOT call `.execute` at the end of these sequences.\n   * @returns \n   */\n  public parallel(...callbacks: TransitionSequenceCallback[]): this {\n    const sequences: TransitionConfiguration[][] = [];\n    for (const callback of callbacks) {\n      const res = callback(new BattleTransition());\n      if (res instanceof Promise) throw new ParallelExecuteError();\n      sequences.push(res.sequence);\n    }\n\n    const step = getStepClassByKey(\"parallel\");\n    if (!step) throw new InvalidTransitionError(\"parallel\");\n\n    const config: ParallelConfiguration = {\n      ...step?.DefaultSettings,\n      id: foundry.utils.randomID(),\n      sequences\n    };\n\n    this.#sequence.push(config);\n\n    return this;\n  }\n\n  /**\n   * Progressively increases the relative size of displayed pixels\n   * @param {number} [maxSize=10] - Relative size of pixels\n   * @param {number} [duration=1000] - Duration, in milliseconds, to scale up the pixels\n   */\n  public pixelate(maxSize: number = 100, duration: number = 1000): this {\n    const step = getStepClassByKey(\"pixelate\");\n    if (!step) throw new InvalidTransitionError(\"pixelate\");\n    const config = {\n      ...step.DefaultSettings,\n      maxSize,\n      duration\n    };\n    this.#sequence.push(config);\n\n    return this;\n  }\n\n\n  /**\n   * Queues up a radial wipe.\n   * @param {RadialDirection} directon - {@link RadialDirection} representing where the wipe should start\n   * @param {number} [duration=1000] - Duration, in milliseconds, that the wipe should take to complete.\n   * @param {ZoomArg} [target=[0.5, 0.5]] - {@link ZoomArg} target on which to center the effect.\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   */\n  public radialWipe(direction: RadialDirection, duration?: number, target?: ZoomArg, background?: TextureLike, easing?: Easing): this\n  /**\n   * Queues up a radial wipe\n   * @param {RadialDirection} directon - {@link RadialDirection} representing where the wipe should start\n   * @param {number} [duration=1000] - Duration, in milliseconds, that the wipe should take to complete.\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   */\n  public radialWipe(direction: RadialDirection, duration?: number, background?: TextureLike, easing?: Easing): this\n  public radialWipe(direction: RadialDirection, duration: number = 1000, ...args: unknown[]): this {\n    const step = getStepClassByKey(\"radialwipe\");\n    if (!step) throw new InvalidTransitionError(\"radialwipe\");\n\n\n    let background: TextureLike = \"transparent\";\n    let easing: Easing = \"none\";\n    let target: ZoomArg = [0.5, 0.5];\n\n    if (Array.isArray(args[0])) {\n      target = args[0] as [number, number];\n      background = args[1] as TextureLike ?? \"transparent\";\n      easing = args[2] as Easing ?? \"none\";\n    } else if (typeof args[0] === \"string\" && fromUuidSync(args[0])) {\n      // It's a UUID\n      target = args[0];\n      background = args[1] as TextureLike ?? \"transparent\";\n      easing = args[2] as Easing ?? \"none\";\n    } else if (typeof args[0] === \"string\") {\n      background = args[0] as TextureLike ?? \"transparent\";\n      easing = args[1] as Easing ?? \"none\";\n    }\n\n    const serializedTexture = serializeTexture(background);\n\n    const config: RadialWipeConfiguration = {\n      ...step.DefaultSettings as RadialWipeConfiguration,\n      serializedTexture,\n      radial: direction,\n      duration,\n      easing\n    };\n\n    if (Array.isArray(target)) {\n      config.target = target;\n    } else if (typeof target === \"string\" && fromUuidSync(target)) {\n      config.target = target;\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    } else if (typeof (target as any).uuid === \"string\") {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      config.target = (target as any).uuid as string;\n    } else {\n      throw new InvalidTargetError(target);\n    }\n\n    this.#sequence.push(config);\n\n    return this;\n  }\n\n\n  /**\n   * Sets the transition overlay to invisible, but will still allow for playing transition effects.\n   * @deprecated since 1.1.0 please use {@link hideOverlay} instead.\n   * @see {@link hideOverlay}\n   */\n  public removeOverlay(): this {\n    ui.notifications?.warn(\"BATTLETRANSITIONS.WARNINGS.REMOVEOVERLAYDEPRECATION\", { localize: true });\n    return this.hideOverlay();\n  }\n\n  /**\n   * Repeats the previous transition step a specified number of times\n   * @param {number} iterations - Number of times to repeat\n   */\n  public repeat(iterations: number): this\n  /**\n   * Repeats the previous transition step a specified number of times, with a delay between each iteration\n   * \n   * This WILL delay the specified amount before the first iteration\n   * @param {number} iterations - Number of times to repeat\n   * @param {number} delay - Delay in milliseconds between each iteration\n   */\n  public repeat(iterations: number, delay: number): this\n  /**\n   * Builds a transition sequence to be repeated a specified number of times\n   * @param {number} iterations - Number of times to repeat\n   * @param {TransitionSequenceCallback} callback - {@link TransitionSequenceCallback}\n   */\n  public repeat(iterations: number, callback: TransitionSequenceCallback): this\n  /**\n   * Builds a transition sequence to be repeated a specified number of times, with a specified delay between them\n   * @param {number} iterations - Number of times to repeat\n   * @param {number} delay - Number of milliseconds to wait between each iteration\n   * @param {TransitionSequenceCallback} callback - {@link TransitionSequenceCallback}\n   */\n  public repeat(iterations: number, delay: number, callback: TransitionSequenceCallback): this\n  public repeat(iterations: number, ...args: unknown[]): this {\n    const delay = typeof args[0] === \"number\" ? args[0] : 0;\n    const callback = (typeof args[0] === \"number\" ? args[1] : args[0]) as TransitionSequenceCallback;\n\n    if ((typeof callback === \"function\") && !this.#sequence.some(step => step.type !== \"scenechange\")) throw new NoPreviousStepError();\n\n    const step = getStepClassByKey(\"repeat\");\n    if (!step) throw new InvalidTransitionError(\"repeat\");\n\n    if (callback) {\n      const transition = new BattleTransition();\n      const res = callback(transition);\n      if (res instanceof Promise) throw new RepeatExecuteError();\n\n      this.#sequence.push({\n        ...step.DefaultSettings,\n        id: foundry.utils.randomID(),\n        iterations,\n        delay,\n        style: \"sequence\",\n        sequence: res.sequence\n      } as RepeatConfiguration)\n    } else {\n      this.#sequence.push({\n        ...step.DefaultSettings,\n        iterations: iterations - 1,\n        delay,\n        style: \"previous\"\n      } as RepeatConfiguration)\n    }\n    return this;\n  }\n\n  /**\n   * Sets the transition overlay to visible again.\n   * @deprecated since version 1.1.0 please use {@link showOverlay} instead.\n   * @see {@link showOverlay}\n   */\n  public restoreOverlay(): this {\n    ui.notifications?.warn(\"BATTLETRANSITIONS.WARNINGS.RESTOREOVERLAYDEPRECATION\", { localize: true });\n    return this.showOverlay();\n  }\n\n  /**\n   * Executes the previous step, but in reverse.\n   * @param {number} [delay=0] - Duration, in milliseconds, to wait before reversing the previous step.\n   */\n  public reverse(delay: number = 0): this {\n    const step = getStepClassByKey(\"reverse\");\n    if (!step) throw new InvalidTransitionError(\"reverse\");\n\n    if (this.#sequence.length === 0) throw new InvalidTransitionError(\"reverse\");\n    const prevStep = getStepClassByKey(this.#sequence[this.#sequence.length - 1].type);\n    if (!prevStep) throw new InvalidTransitionError(\"reverse\");\n    if (!prevStep.reversible) throw new StepNotReversibleError(prevStep.key);\n\n    const config: ReverseConfiguration = {\n      ...step.DefaultSettings,\n      delay,\n      id: foundry.utils.randomID()\n    }\n\n    log(\"Adding reverse:\", config);\n    this.#sequence.push(config);\n\n    return this;\n  }\n\n  /**\n   * Sets the transition overlay to visible again.\n   */\n  public showOverlay(): this {\n    this.#sequence.push({ id: foundry.utils.randomID(), type: \"restoreoverlay\", version: \"1.1.0\" });\n    return this;\n  }\n\n  /**\n   * Plays a sound.  Will NOT wait for the sound to complete before continuing.\n   * @param {string} sound - Path to the sound\n   * @param {number} [volume=100] - Volume at which to play the sound\n   */\n  public sound(sound: string, volume?: number): this\n  /**\n   * Plays a sound.  Will NOT wait for the sound to complete before continuing.\n   * @param {Sound} sound - {@link Sound} to be played\n   * @param {number} [volume=100] - Volume at which to play the sound\n   */\n  public sound(sound: Sound, volume?: number): this\n  public sound(arg: unknown, volume: number = 100): this {\n    const sound = typeof arg === \"string\" ? arg : (arg instanceof Sound) ? arg.id : null;\n    if (!sound) throw new InvalidSoundError(typeof arg === \"string\" ? arg : typeof arg);\n    this.#sequence.push({\n      type: \"sound\",\n      volume,\n      file: sound\n    } as SoundConfiguration);\n    return this;\n  }\n\n  /**\n   * Queues up a wipe that operates much like a radial wipe, but in a spiral pattern rather than circular\n   * @param {ClockDirection} direction - {@link ClockDirection}\n   * @param {RadialDirection} radial - {@link RadialDirection}\n   * @param {number} [duration=1000] - Duration, in milliseconds, the wipe should last\n   * @param {TextureLike} [background=\"transparent\"] {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public spiralShutter(direction: ClockDirection, radial: RadialDirection, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n    this.#sequence.push({\n      type: \"spiralradialwipe\",\n      serializedTexture,\n      duration,\n      easing,\n      direction,\n      radial\n    } as SpiralShutterConfiguration)\n\n    return this;\n  }\n\n  /**\n   * A linear spiral wipe\n   * @param {ClockDirection} clock - Whether the spiral travels clockwise or counterclockwise\n   * @param {RadialDirection} radial - Whether the spiral starts from the inside or outside of the overlay\n   * @param {WipeDirection} direction - Side of the screen from which the wipe starts\n   * @param {number} [duration=1000] - Duration, in milliseconds, for the wipe to last\n   * @param {TextureLike} background - {@link TextureLike}\n   * @param {Easing} easing - {@link Easing}\n   * @returns \n   */\n  public spiralWipe(clock: ClockDirection, radial: RadialDirection, direction: WipeDirection, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n\n    const backgroundType = typeof serializedTexture === \"string\" && isColor(serializedTexture) ? \"color\" : \"image\";\n    this.#sequence.push({\n      type: \"spiralwipe\",\n      version: \"1.1.0\",\n      duration,\n      direction,\n      clockDirection: clock,\n      radial,\n      easing,\n      bgSizingMode: \"stretch\",\n      backgroundType,\n      serializedTexture\n    } as SpiralWipeConfiguration);\n\n    return this;\n  }\n\n  /**\n   * Queues up a spotlight-shaped wipe\n   * @param {WipeDirection} direction - {@link WipeDirection}\n   * @param {RadialDirection} radial - {@link RadialDirection}\n   * @param {number} [duration=1000] - Duration, in miliseconds, for the wipe to last\n   * @param {TextureLike} [background=\"transparent\"] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public spotlightWipe(direction: WipeDirection, radial: RadialDirection, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n    this.#sequence.push({\n      type: \"spotlightwipe\",\n      direction,\n      radial,\n      duration,\n      backgroundType: backgroundType(background),\n      serializedTexture,\n      easing\n    } as SpotlightWipeConfiguration)\n\n    return this;\n  }\n\n  /**\n   * Swaps the current overlay texture\n   * @param {TextureLike} texture - {@link TextureLike}\n   * @returns \n   */\n  public textureSwap(texture: TextureLike): this {\n    const serializedTexture = serializeTexture(texture);\n    this.#sequence.push({\n      type: \"textureswap\",\n      serializedTexture,\n      backgroundType: backgroundType(texture),\n    } as TextureSwapConfiguration);\n\n    return this;\n  }\n\n  public twist(duration: number = 1000, direction: ClockDirection = \"clockwise\", maxAngle: number = 10): this {\n    this.#sequence.push({\n      type: \"twist\",\n      duration,\n      direction,\n      maxAngle\n    } as TwistConfiguration);\n\n    return this;\n  }\n\n  public video(file: string): this\n  public video(file: string, volume: number): this\n  public video(file: string, background: TextureLike): this\n  public video(file: string, clear: boolean): this\n  public video(file: string, volume: number, clear: boolean): this\n  public video(file: string, background: TextureLike, clear: boolean): this\n  public video(file: string, volume: number, background: TextureLike, clear: boolean): this\n  public video(file: string, ...args: unknown[]): this {\n    const volume = args.find(arg => typeof arg === \"number\") ?? 100;\n    const clear = args.find(arg => typeof arg === \"boolean\") ?? false;\n    const background = args.find(arg => !(typeof arg === \"boolean\" || typeof arg === \"number\")) ?? \"transparent\";\n\n    const serializedTexture = serializeTexture(background);\n\n    this.#sequence.push({\n      type: \"video\",\n      volume,\n      file,\n      serializedTexture,\n      clear\n    } as VideoConfiguration);\n    return this;\n  }\n\n  /**\n   * Adds a step to simply wait a given amount of time before continuing.\n   * @param {number} duration - Amount of time, in milliseconds, to wait.\n   */\n  public wait(duration: number): this {\n    this.#sequence.push({ type: \"wait\", duration } as WaitConfiguration);\n    return this;\n  }\n\n  /**\n   * Triggers a wavey saw-like wipe\n   * @param {RadialDirection} direction - {@link RadialDirection}\n   * @param {number} [duration=1000] - Duration, in milliseconds, for the wipe to last\n   * @param {TextureLike} [background=1000] - {@link TextureLike}\n   * @param {Easing} [easing=\"none\"] - {@link Easing}\n   * @returns \n   */\n  public waveWipe(direction: RadialDirection, duration: number = 1000, background: TextureLike = \"transparent\", easing: Easing = \"none\"): this {\n    const serializedTexture = serializeTexture(background);\n    this.#sequence.push({\n      type: \"wavewipe\",\n      serializedTexture,\n      direction,\n      duration,\n      backgroundType: backgroundType(background),\n      easing\n    } as WaveWipeConfiguration)\n\n    return this;\n  }\n\n  /**\n   * Zoom into a location on the overlay\n   * \n   * @remarks This effect does not scale the overlay but instead it multiplies the UV coordinates of the overlying texture.\n   * As such, the actual values for zoom amount operates in reverse fo what you may expect.\n   * \n   * A zoom value of 1 retains the original size.  Values less than one will zoom in, and greater than 1 will zoom out.\n   * The maximum distance the overlay can zoom out before the displayed size is 0x0 is dependent on the screen resolution\n   * of the viewer, so it is recommended to choose a value that looks \"close enough\" and possibly fade it out at the end\n   * to make its disappearance smoother.\n   * @param {number} amount - Relative amount to zoom.  See remarks.\n   * @param {number} [duration=1000] - Duration, in milliseconds, that the effect should take to complete\n   * @param {ZoomArg} [arg=[0.5, 0.5]] - {@link ZoomArg} representing the location to center the zoom.\n   * @param {boolean} [clampBounds=false] - If true, will prevent the texture from leaving the boundaries of its containing sprite when zooming out.\n   * @param {TextureLike} [bg=\"transparent\"] - {@link TextureLike} for the background displayed when zooming out if clampBounds is false.\n   * @param {Easing} [easing=\"none\"] - {@link Easing} to use when animating the transition.\n   * @returns \n   */\n  public zoom(amount: number, duration: number = 1000, arg: ZoomArg = [0.5, 0.5], clampBounds: boolean = false, bg: TextureLike = \"transparent\", easing: Easing = \"none\", background: TextureLike = \"transparent\"): this {\n    const step = getStepClassByKey(\"zoom\");\n    if (!step) throw new InvalidTransitionError(\"zoom\");\n\n    const serializedTexture = serializeTexture(bg);\n    const config: ZoomConfiguration = {\n      ...(step.DefaultSettings as ZoomConfiguration),\n      amount,\n      duration,\n      clampBounds,\n      serializedTexture,\n      backgroundType: backgroundType(background),\n      easing\n    };\n\n    if (Array.isArray(arg)) {\n      config.target = arg;\n    } else if (typeof arg === \"string\" && fromUuidSync(arg)) {\n      config.target = arg;\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    } else if (typeof (arg as any).uuid === \"string\") {\n      // A UUID directly\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      config.target = (arg as any).uuid as string;\n    } else {\n      throw new InvalidTargetError(arg);\n    }\n\n    this.#sequence.push(config);\n\n    return this;\n  }\n\n  public zoomBlur(duration: number = 1000, maxStrength: number = 0.5, innerRadius: number = 0): this {\n    this.#sequence.push({\n      type: \"zoomblur\",\n      duration,\n      maxStrength,\n      innerRadius,\n    } as ZoomBlurConfiguration)\n\n    return this;\n  }\n\n  // #endregion Public Methods (52)\n}\n\n// #endregion Classes (1)\n\n// #region Functions (1)\n\nfunction getStepInstance(step: TransitionConfiguration): TransitionStep {\n  const handler = getStepClassByKey(step.type);\n  if (!handler) throw new InvalidTransitionError(step.type);\n  return handler.from(step);\n}\n\n// #endregion Functions (1)\n", "import { BattleTransition } from \"../BattleTransition\";\nimport { addStepDialog, confirm, editStepDialog } from \"../dialogs\";\nimport { InvalidTransitionError } from \"../errors\";\nimport { PreparedTransitionHash, TransitionSequence } from \"../interfaces\";\nimport { sequenceDuration } from \"../transitionUtils\";\nimport { formatDuration, getStepClassByKey, localize, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { ParallelConfiguration, TransitionConfiguration } from './types';\n\n// #region Classes (1)\n\nexport class ParallelStep extends TransitionStep<ParallelConfiguration> {\n  // #region Properties (8)\n\n  #preparedSequences: TransitionStep[][] = [];\n\n  public static DefaultSettings: ParallelConfiguration = {\n    id: \"\",\n    type: \"parallel\",\n    version: \"1.1.0\",\n    sequences: []\n  };\n  public static category = \"technical\";\n  public static hidden: boolean = false;\n  public static icon = `<i class=\"fas fa-fw fa-arrows-down-to-line\"></i>`\n  public static key = \"parallel\";\n  public static name = \"PARALLEL\";\n  public static template = \"parallel-config\";\n\n  public get preparedSequences() { return this.#preparedSequences; }\n\n  // #endregion Properties (8)\n\n  // #region Public Static Methods (6)\n\n  public static RenderTemplate(config?: ParallelConfiguration, oldScene?: Scene, newScene?: Scene): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${ParallelStep.template}.hbs`, {\n      ...ParallelStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      oldScene: oldScene?.id ?? \"\",\n      newScene: newScene?.id ?? \"\"\n    });\n  }\n\n  public static async addEventListeners(html: JQuery<HTMLElement>, config?: ParallelConfiguration) {\n    if (Array.isArray(config?.sequences) && config.sequences.length) {\n      for (const sequence of config.sequences)\n        await addSequence(html, sequence)\n    } else {\n      await addSequence(html, []);\n      await addSequence(html, []);\n    }\n    void selectSequence(html, 0);\n    html.find(`button[data-action=\"add-sequence\"]`).on(\"click\", e => {\n      e.preventDefault();\n      addSequence(html, [])\n        .then(() => {\n          const index = html.find(\"#sequence-list .sequence-item\").length - 1;\n          void selectSequence(html, index);\n        }).catch((err: Error) => {\n          ui.notifications?.error(err.message, { console: false });\n          console.error(err);\n        })\n    });\n\n    html.find(\"[data-action='add-step']\").on(\"click\", e => {\n      e.preventDefault();\n      void addStep(html);\n    });\n\n    // Step sorting\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    (html.find(\"#selected-sequence-steps\") as any).sortable({\n      handle: \".drag-handle\",\n      containment: \"parent\",\n      axis: \"y\"\n    })\n  }\n\n  public static from(form: HTMLFormElement): ParallelStep\n  public static from(form: JQuery<HTMLFormElement>): ParallelStep\n  public static from(config: ParallelConfiguration): ParallelStep\n  public static from(arg: unknown): ParallelStep {\n    if (arg instanceof HTMLFormElement) return ParallelStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return ParallelStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new ParallelStep(arg as ParallelConfiguration);\n  }\n\n  public static async getDuration(config: ParallelConfiguration): Promise<number> {\n    let highest: number = 0;\n    for (const sequence of config.sequences) {\n      const duration = await sequenceDuration(sequence);\n      if (duration > highest) highest = duration;\n    }\n    return highest;\n  }\n\n  public static fromFormElement(form: HTMLFormElement): ParallelStep {\n    const sequences: TransitionConfiguration[][] = [];\n\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    elem.find(\".sequence-item\").each((i, item) => {\n      if (!item.dataset.sequence) return;\n\n      const sequence = JSON.parse(item.dataset.sequence) as TransitionConfiguration[];\n      sequences.push(sequence);\n    });\n\n    const config: ParallelConfiguration = {\n      ...ParallelStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"label\"),\n      sequences\n    };\n\n    return new ParallelStep(config);\n  }\n\n  // #endregion Public Static Methods (6)\n\n  // #region Public Methods (2)\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    await Promise.all(this.#preparedSequences.map(seq => this.executeSequence(container, sequence, seq, prepared)));\n  }\n\n  public async prepare(sequence: TransitionSequence): Promise<void> {\n    const config: ParallelConfiguration = {\n      ...ParallelStep.DefaultSettings,\n      ...this.config\n    };\n\n    this.#preparedSequences = [];\n    for (const step of config.sequences) {\n      const prepared = await BattleTransition.prepareSequence({\n        ...sequence,\n        sequence: step\n      });\n      this.#preparedSequences.push(prepared);\n    }\n  }\n\n  // #endregion Public Methods (2)\n\n  // #region Private Methods (1)\n\n  public async teardown(container: PIXI.Container): Promise<void> {\n    for (const sequence of this.#preparedSequences) {\n      for (const step of sequence) {\n        await step.teardown(container);\n      }\n    }\n  }\n\n  private async executeSequence(container: PIXI.Container, sequence: TransitionSequence, steps: TransitionStep[], prepared: PreparedTransitionHash): Promise<void> {\n    for (const step of steps) {\n      const res = step.execute(container, sequence, prepared);\n      if (res instanceof Promise) await res;\n    }\n  }\n\n  // #endregion Private Methods (1)\n}\n\n// #endregion Classes (1)\n\n// #region Functions (8)\n\nasync function addSequence(html: JQuery<HTMLElement>, sequence: TransitionConfiguration[] = []) {\n  const index = html.find(\"#sequence-list .sequence-item\").length;\n\n  const content = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/sequence-item.hbs`, {\n    index,\n    sequence,\n    serialized: JSON.stringify(sequence),\n    name: localize(\"BATTLETRANSITIONS.SCENECONFIG.PARALLEL.SEQUENCE\", { index: index + 1 })\n  })\n\n  const item = $(content);\n  html.find(\"button[data-action='add-sequence']\").before(item);\n  addSequenceItemEventListeners(item);\n}\n\nfunction addSequenceItemEventListeners(html: JQuery<HTMLElement>) {\n  // Cpnfigure button\n  html.find(\"[data-action='configure']\").on(\"click\", () => {\n    const index = html.data(\"index\") as number;\n    void selectSequence(html.parents(\"[data-transition-type='parallel']\"), index);\n  });\n\n  // Remove button\n  html.find(\"[data-action='remove']\").on(\"click\", e => {\n    e.preventDefault();\n\n    const index = html.data(\"index\") as number;\n\n    confirm(\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.TITLE\", { name: localize(\"BATTLETRANSITIONS.SCENECONFIG.PARALLEL.SEQUENCE\", { index }) }),\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.CONTENT\", { name: localize(\"BATTLETRANSITIONS.SCENECONFIG.PARALLEL.SEQUENCE\", { index }) })\n    ).then(val => {\n      if (val) {\n        const parent = html.parents(\"#sequence-list\");\n        html.remove();\n        renumberSequences(parent);\n      }\n    }).catch((err: Error) => {\n      ui.notifications?.error(err.message, { console: false });\n      console.error(err);\n    })\n  })\n}\n\nasync function addStep(html: JQuery<HTMLElement>) {\n  const key = await addStepDialog();\n  if (!key) return;\n\n  const step = getStepClassByKey(key);\n  if (!step) throw new InvalidTransitionError(key);\n\n  const oldScene = html.find(\"#oldScene\").val() as string ?? \"\";\n  const newScene = html.find(\"#newScene\").val() as string ?? \"\";\n\n  const config = step.skipConfig ? { ...step.DefaultSettings, id: foundry.utils.randomID() } : await editStepDialog(step.DefaultSettings, game.scenes?.get(oldScene), game.scenes?.get(newScene));\n  if (!config) return;\n\n  void upsertStepButton(html, config);\n}\n\nfunction addStepEventListeners(html: JQuery<HTMLElement>, button: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  // Remove button\n  button.find(\"[data-action='remove']\").on(\"click\", () => {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(config.type);\n    confirm(\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.TITLE\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }),\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.CONTENT\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) })\n    )\n      .then(confirm => {\n        if (confirm) {\n          button.remove();\n        }\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false });\n        console.error(err);\n      });\n  });\n\n  // Configure button\n  button.find(\"[data-action='configure']\").on(\"click\", () => {\n    const oldScene = html.find(\"#oldScene\").val() as string ?? \"\";\n    const newScene = html.find(\"#newScene\").val() as string ?? \"\";\n    editStepDialog(config, game.scenes?.get(oldScene), game.scenes?.get(newScene))\n      .then(newConfig => {\n        if (newConfig) {\n          // Replace button\n          return upsertStepButton(html, newConfig)\n        }\n      }).then(() => {\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false })\n        console.error(err);\n      })\n  });\n}\n\nfunction buildTransition(html: JQuery<HTMLElement>): TransitionConfiguration[] {\n  const sequence: TransitionConfiguration[] = [];\n\n  html.find(\"#selected-sequence-steps [data-transition-type]\").each((index, element) => {\n    const flag = element.dataset.flag ?? \"\";\n    if (!flag) return;\n    const step = JSON.parse(flag) as TransitionConfiguration;\n    sequence.push(step);\n  });\n  return sequence;\n}\n\nfunction renumberSequences(html: JQuery<HTMLElement>) {\n  html.find(\"[data-sequence]\").each((i, elem) => {\n    $(elem).data(\"index\", i);\n    $(elem).find(\"[data-action='configure']\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.PARALLEL.SEQUENCE\", { index: i + 1 }));\n  })\n}\n\nasync function selectSequence(html: JQuery<HTMLElement>, index: number) {\n\n  const elem = html.find(`.sequence-item[data-index=\"${index}\"]`);\n  const serialized = elem.attr(\"data-sequence\") as string;\n  const sequence = JSON.parse(serialized) as TransitionConfiguration[];\n  // const sequence = elem.attr(\"data-sequence\") as TransitionConfiguration[];\n\n  const sequenceContainer = html.find(\"#selected-sequence\");\n\n  sequenceContainer.data(\"index\", index);\n  sequenceContainer.find(\"#sequence-name\").text(localize(`BATTLETRANSITIONS.SCENECONFIG.PARALLEL.SEQUENCE`, { index: index + 1 }));\n\n  const stepContainer = sequenceContainer.find(\"#selected-sequence-steps\");\n  stepContainer.children().remove();\n\n  for (const step of sequence) {\n    const stepClass = getStepClassByKey(step.type);\n    if (!stepClass) throw new InvalidTransitionError(typeof step.type === \"string\" ? step.type : typeof step.type);\n\n    await upsertStepButton(html, step)\n  }\n}\n\nasync function upsertStepButton(html: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  const step = getStepClassByKey(config.type);\n  if (!step) throw new InvalidTransitionError(config.type);\n\n\n  const outerSequence = [...buildTransition(html), config];\n  const durationRes = step.getDuration(config, outerSequence);\n  const calculatedDuration = (durationRes instanceof Promise) ? (await durationRes) : durationRes;\n\n  const totalDuration = await sequenceDuration(outerSequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n\n  const buttonContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/step-item.hbs`, {\n    ...step.DefaultSettings,\n    ...config,\n    name: localize(`BATTLETRANSITIONS.${step.name}.NAME`),\n    description: localize(`BATTLETRANSITIONS.${step.name}.DESCRIPTION`),\n    type: step.key,\n    calculatedDuration,\n    flag: JSON.stringify({\n      ...step.DefaultSettings,\n      ...config\n    })\n  });\n\n  const button = $(buttonContent);\n\n  const extant = html.find(`[data-id=\"${config.id}\"]`);\n  if (extant.length) extant.replaceWith(button);\n  else html.find(\"#selected-sequence-steps\").append(button);\n\n  addStepEventListeners(html, button, config);\n\n  // Update serialized version on parent\n  const index = button.parents(\"[data-index]\").data(\"index\") as number;\n\n  const sequence = buildTransition(html);\n  html.find(`#sequence-list [data-index=\"${index}\"]`).attr(\"data-sequence\", JSON.stringify(sequence));\n}\n\n// #endregion Functions (8)", "import { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { addFilterToScene, removeFilterFromScene } from '../transitionUtils';\nimport { parseConfigurationFormElements } from '../utils';\nimport { generateDualStyleSelectOptions } from './selectOptions';\nimport { TransitionStep } from './TransitionStep';\nimport { PixelateConfiguration } from './types';\n\nexport class PixelateStep extends TransitionStep<PixelateConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: PixelateConfiguration = {\n    id: \"\",\n    type: \"pixelate\",\n    version: \"1.1.0\",\n    maxSize: 100,\n    duration: 1000,\n    easing: \"none\",\n    applyToScene: false,\n    applyToOverlay: true\n  };\n  public static category: string = \"effect\";\n  public static hidden: boolean = false;\n  public static icon = `<i class=\"fas fa-fw fa-image\"></i>`\n  public static key: string = \"pixelate\";\n  public static name: string = \"PIXELATE\";\n  public static template: string = \"pixelate-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: PixelateConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${PixelateStep.template}.hbs`, {\n      ...PixelateStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    });\n  }\n\n  public static from(config: PixelateConfiguration): PixelateStep\n  public static from(form: HTMLFormElement): PixelateStep\n  public static from(form: JQuery<HTMLFormElement>): PixelateStep\n  public static from(arg: unknown): PixelateStep {\n    if (arg instanceof HTMLFormElement) return PixelateStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return PixelateStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new PixelateStep(arg as PixelateConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): PixelateStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const dualStyle = elem.find(\"#dualStyle\").val() as string;\n\n    return new PixelateStep({\n      ...PixelateStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"maxSize\", \"label\"),\n      applyToOverlay: dualStyle === \"overlay\" || dualStyle === \"both\",\n      applyToScene: dualStyle === \"scene\" || dualStyle === \"both\"\n    });\n  }\n\n  public static getDuration(config: PixelateConfiguration): number { return { ...PixelateStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  #sceneFilter: PIXI.Filter | null = null;\n\n  #filters: PIXI.Filter[] = [];\n\n  public async reverse(): Promise<void> {\n    const config: PixelateConfiguration = {\n      ...PixelateStep.DefaultSettings,\n      ...this.config\n    }\n\n    await Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      this.#filters.map(filter => TweenMax.to(filter.uniforms.size, { 0: 1, 1: 1, duration: config.duration / 1000, ease: config.easing }))\n    );\n  }\n\n  public teardown(): Promise<void> | void {\n    if (this.#sceneFilter) removeFilterFromScene(this.#sceneFilter);\n    this.#sceneFilter = null;\n  }\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    const config: PixelateConfiguration = {\n      ...PixelateStep.DefaultSettings,\n      ...this.config\n    }\n\n    const filters: PIXI.Filter[] = [];\n\n    if (config.applyToOverlay) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      const filter = new (PIXI.filters as any).PixelateFilter(1) as PIXI.Filter;\n      this.addFilter(container, filter);\n      filters.push(filter);\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      const filter = new (PIXI.filters as any).PixelateFilter(1) as PIXI.Filter;\n      addFilterToScene(filter, prepared.prepared);\n      filters.push(filter);\n      this.#sceneFilter = filter;\n    }\n\n    this.#filters = [...filters];\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    await Promise.all(filters.map(filter => TweenMax.to(filter.uniforms.size, { 0: config.maxSize, 1: config.maxSize, duration: config.duration / 1000, ease: config.easing }) as Promise<void>));\n  }\n\n  // #endregion Public Methods (1)\n}", "import { customDialog } from \"../dialogs\";\nimport { InvalidTargetError } from \"../errors\";\nimport { generateTargetTypeSelectOptions } from \"./selectOptions\";\nimport { TargetedTransition, TargetType, TransitionConfiguration } from \"./types\";\n\n// #region Functions (21)\n\nfunction clearSelectMode(html: JQuery<HTMLElement>) {\n  html.find(\"button[data-action] i.fa-spinner\").css(\"display\", \"none\");\n  const mode = html.find(\"[data-select-mode]\").data(\"select-mode\") as TargetType || \"0\";\n  const hook = parseInt(html.find(\"[data-select-hook]\").data(\"select-hook\") as string || \"0\") || 0;\n  const hint = parseInt(html.find(\"[data-select-hint]\").data(\"select-hint\") as string || \"0\") || 0;\n  // const sceneId = html.find(\"[data-select-scene]\").data(\"select-scene\") as string || \"\";\n\n  switch (mode) {\n    case \"oldtoken\":\n    case \"newtoken\":\n      if (hook) Hooks.off(\"controlToken\", hook);\n      if (hint && ui.notifications) ui.notifications.remove(hint);\n      break;\n    case \"oldtile\":\n    case \"newtile\":\n      if (hook) Hooks.off(\"controlTile\", hook);\n      if (hint && ui.notifications) ui.notifications.remove(hint);\n      break;\n    case \"oldnote\":\n    case \"newnote\":\n      if (hook) Hooks.off(\"activateNote\", hook);\n      if (hint && ui.notifications) ui.notifications.remove(hint);\n      break;\n    case \"olddrawing\":\n    case \"newdrawing\":\n      if (hook) Hooks.off(\"controlDrawing\", hook);\n      if (hint && ui.notifications) ui.notifications.remove(hint);\n      break;\n  }\n\n  html.find(\"[data-select-hook]\").data(\"select-hook\", \"\");\n  html.find(\"[data-select-hint]\").data(\"select-hint\", \"\");\n  html.find(\"[data-select-scene]\").data(\"select-scene\", \"\");\n}\n\nexport function getObjectSize(item: unknown): [number, number] {\n  if (item instanceof Token) return [item.mesh.width, item.mesh.height]\n  else if (item instanceof TokenDocument && item.object instanceof Token) return [item.object.mesh.width, item.object.mesh.height];\n  else if (item instanceof Tile) return [item.document.width, item.document.height];\n  else if (item instanceof TileDocument) return [item.width, item.height];\n  else if (item instanceof Note || item instanceof NoteDocument) return [0, 0];\n  else if (item instanceof Drawing) return [item.width, item.height];\n  else if (item instanceof DrawingDocument) return [item.object?.width ?? 0, item.object?.height ?? 0];\n  else throw new InvalidTargetError(item);\n}\n\n/**\n * Returns the effect target based on currently select options\n * @param {JQuery<HTMLElement>} html \n * @returns - {@link TargetType}\n */\nexport function getTargetFromForm(html: JQuery<HTMLElement>) {\n  const targetType = html.find(\"#targetType\").val() as TargetType ?? \"point\";\n  switch (targetType) {\n    case \"oldtoken\":\n      return html.find(\"#selectedOldToken\").val() as string;\n    case \"newtoken\":\n      return html.find(\"#selectedNewToken\").val() as string;\n    case \"oldtile\":\n      return html.find(\"#selectedOldTile\").val() as string;\n    case \"newtile\":\n      return html.find(\"#selectedNewTile\").val() as string;\n    case \"olddrawing\":\n      return html.find(\"#selectedOldDrawing\").val() as string;\n    case \"newdrawing\":\n      return html.find(\"#selectedNewDrawing\").val() as string;\n    case \"oldnote\":\n      return html.find(\"#selectedOldNote\").val() as string;\n    case \"newnote\":\n      return html.find(\"#selectedNewNote\").val() as string;\n    case \"prompt\":\n      return \"\";\n    case \"point\":\n      return [\n        parseFloat(html.find(\"#pointX\").val() as string),\n        parseFloat(html.find(\"#pointY\").val() as string)\n      ] as [number, number]\n  }\n}\n\nfunction getTargetType(html: JQuery<HTMLElement>): TargetType {\n  return html.find(\"#targetType\").val() as TargetType ?? \"point\";\n}\n\nfunction isNormalized(val: [number, number]): boolean {\n  return val[0] >= 0 && val[0] <= 1 && val[1] >= 0 && val[1] <= 1;\n}\n\nfunction isNumberNumber(val: unknown): boolean {\n  return Array.isArray(val) && val.length === 2 && typeof val[0] === \"number\" && typeof val[1] === \"number\"\n}\n\nexport function normalizePoint(x: number, y: number): [number, number] {\n  return [\n    x / window.innerWidth,\n    y / window.innerHeight\n  ];\n}\n\nexport function normalizePosition(target: unknown): [number, number] {\n  if (target instanceof Token || target instanceof Tile || target instanceof Note) {\n    const { x, y } = target.getGlobalPosition();\n    const [width, height] = getObjectSize(target);\n    return normalizePoint(x + (width / 2), y + (height / 2));\n  } else if (target instanceof TokenDocument || target instanceof TileDocument || target instanceof NoteDocument) {\n    if (!target.object) throw new InvalidTargetError(target);\n    return normalizePosition(target.object);\n  } else if (target instanceof Drawing) {\n    const { x, y } = target.getGlobalPosition();\n    const [width, height] = getObjectSize(target);\n    return normalizePoint(\n      x + (width / 2),\n      y + (height / 2)\n    );\n  } else if (target instanceof DrawingDocument) {\n    if (!target.object) throw new InvalidTargetError(target);\n    return normalizePosition(target.object);\n  } else if (target instanceof Actor) {\n    if (!target.token) throw new InvalidTargetError(target);\n    return normalizePosition(target.token);\n  }\n  throw new InvalidTargetError(target);\n}\n\nexport function onTargetSelectDialogClosed(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n}\n\nfunction selectNewDrawing(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-new-drawing'] i\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"newdrawing\");\n  const hook = Hooks.on(\"controlDrawing\", (drawing: Drawing, controlled: boolean) => {\n    if (controlled) {\n      clearSelectMode(html);\n      html.find(\"#selectedNewDrawing\").val(drawing.document.uuid);\n    }\n  });\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.DRAWING.SELECTHINT\");\n}\n\nfunction selectNewNote(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-new-note']\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"newnote\");\n  const hook = Hooks.on(\"activateNote\", (note: Note) => {\n    clearSelectMode(html);\n    html.find(\"#selectedNewNote\").val(note.document.uuid);\n  });\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.NOTE.SElECTHINT\");\n}\n\nfunction selectNewTile(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-new-tile'] i\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"newtile\");\n  const hook = Hooks.on(\"controlTile\", (tile: Tile, controlled: boolean) => {\n    if (controlled) {\n      clearSelectMode(html);\n      html.find(\"#selectedNewTile\").val(tile.document.uuid);\n    }\n  })\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TILE.SELECTHINT\");\n}\n\nfunction selectNewToken(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-new-token'] i\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"newtoken\");\n\n  const hook = Hooks.on(\"controlToken\", (token: Token, controlled: boolean) => {\n    if (controlled) {\n      clearSelectMode(html);\n      html.find(\"#selectedNewToken\").val(token.document.uuid);\n    }\n  });\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TOKEN.SELECTHINT\");\n}\n\nfunction selectOldDrawing(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-old-drawing'] i\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"olddrawing\");\n  const hook = Hooks.on(\"controlDrawing\", (drawing: Drawing, controlled: boolean) => {\n    if (controlled) {\n      clearSelectMode(html);\n      html.find(\"#selectedOldDrawing\").val(drawing.document.uuid);\n    }\n  });\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.DRAWING.SELECTHINT\");\n}\n\nfunction selectOldNote(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-old-note'] i\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"oldnote\");\n  const hook = Hooks.on(\"activateNote\", (note: Note) => {\n    clearSelectMode(html);\n    html.find(\"#selectedOldNote\").val(note.document.uuid);\n  });\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.NOTE.SELECTHINT\");\n}\n\nfunction selectOldTile(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-old-tile'] i\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"oldtile\");\n\n  const hook = Hooks.on(\"controlTile\", (tile: Tile, controlled: boolean) => {\n    if (controlled) {\n      clearSelectMode(html);\n      html.find(\"#selectedOldTile\").val(tile.document.uuid);\n    }\n  });\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TILE.SELECTHINT\");\n}\n\nfunction selectOldToken(html: JQuery<HTMLElement>) {\n  clearSelectMode(html);\n  html.find(\"[data-action='select-old-token'] i\").css(\"display\", \"block\");\n  html.find(\"[data-select-mode]\").data(\"select-mode\", \"oldtoken\");\n\n  const hook = Hooks.on(\"controlToken\", (token: Token, controlled: boolean) => {\n    if (controlled) {\n      clearSelectMode(html);\n      html.find(\"#selectedOldToken\").val(token.document.uuid);\n    }\n  });\n  html.find(\"[data-select-hook]\").data(\"select-hook\", hook);\n  setSelectHint(html, \"BATTLETRANSITIONS.SCENECONFIG.COMMON.TARGETTYPE.TOKEN.SELECTHINT\");\n}\n\nfunction setSelectHint(html: JQuery<HTMLElement>, hint: string) {\n  if (ui.notifications) {\n    const id = ui.notifications.info(hint, { console: false, localize: true, permanent: true });\n    html.find(\"[data-select-hint]\").data(\"select-hint\", id);\n  }\n}\n\nexport function setTargetSelectEventListeners(html: JQuery<HTMLElement>) {\n  swapTargetSection(html);\n\n  html.find(\"#targetType\").on(\"input\", () => { swapTargetSection(html); });\n  html.find(\"button[data-action] i.fa-spinner\").css(\"display\", \"none\");\n  html.find(\"button[data-action] i.fa-spinner\").parent().on(\"click\", e => {\n    e.preventDefault();\n    const target = $(e.currentTarget) as JQuery<HTMLButtonElement>;\n    const action = target.data(\"action\") as string || \"\";\n    switch (action) {\n      case \"select-old-token\":\n        selectOldToken(html);\n        break;\n      case \"select-new-token\":\n        selectNewToken(html);\n        break;\n      case \"select-old-tile\":\n        selectOldTile(html);\n        break;\n      case \"select-new-tile\":\n        selectNewTile(html);\n        break;\n      case \"select-old-note\":\n        selectOldNote(html);\n        break;\n      case \"select-new-note\":\n        selectNewNote(html);\n        break;\n      case \"select-old-drawing\":\n        selectOldDrawing(html);\n        break;\n      case \"select-new-drawing\":\n        selectNewDrawing(html);\n        break;\n    }\n  });\n}\n\n\nconst requiredFields = {\n  \"prompt\": \"\",\n  \"point\": \"#pointX, #pointY\",\n  \"oldtoken\": \"#selectedOldToken\",\n  \"newtoken\": \"#selectedNewToken\",\n  \"oldtile\": \"#selectedOldTile\",\n  \"newtile\": \"#selectedNewTile\",\n  \"olddrawing\": \"#selectedOldDrawing\",\n  \"newdrawing\": \"#selectedNewDrawing\",\n  \"oldnote\": \"#selectedOldNote\",\n  \"newnote\": \"#selectedNewNote\"\n}\n\n\n/**\n * Sets the correct HTML section for the current target type\n * @param {JQuery<HTMLElement>} html - JQuery<HTMLElement>\n */\nfunction swapTargetSection(html: JQuery<HTMLElement>) {\n  html.find(`section[data-target-type]`).css(\"display\", \"none\");\n  html.find(\"section[data-target-type] input, section[data-target-type] select\").removeAttr(\"required\");\n  const targetType = getTargetType(html);\n  html.find(`section[data-target-type=\"${targetType}\"]`).css(\"display\", \"block\");\n  if (requiredFields[targetType]) {\n    html.find(requiredFields[targetType]).attr(\"required\", \"true\");\n  }\n}\n\nexport async function validateTarget(config: TransitionConfiguration & TargetedTransition, oldScene?: Scene, newScene?: Scene): Promise<[number, number] | string> {\n  const { target } = config;\n  // if it's a set of screen coordinates, it's fine.\n  if (isNumberNumber(target) && isNormalized(target as [number, number])) return target as [number, number];\n\n  if (typeof target === \"string\" && target) {\n    // Non-empty string\n    const item = await fromUuid(target);\n    if (!item) throw new InvalidTargetError(target);\n\n    const parsed = foundry.utils.parseUuid(target);\n    // if it is not in a scene, we cannot focus it\n    if (parsed.primaryType !== \"Scene\") throw new InvalidTargetError(target);\n\n    if (oldScene && oldScene.id === parsed.primaryId) return target;\n    if (newScene && newScene.id === parsed.primaryId) return target;\n\n  } else if (typeof target === \"string\") {\n    // Empty string, prompt\n    const content = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/target-selector.hbs`, {\n      ...generateTargetTypeSelectOptions(oldScene, newScene),\n      pointX: 0.5,\n      pointY: 0.5\n    })\n    const form = await customDialog(\"BATTLETRANSITIONS.SCENECONFIG.TARGETTYPE.DIALOG.TITLE\", content, {\n      ok: {\n        icon: `<i class=\"fas fa-check\"></i>`,\n        label: \"BATTLETRANSITIONS.DIALOGS.BUTTONS.OK\"\n      },\n      cancel: {\n        icon: `<i class=\"fas fa-times\"></i>`,\n        label: \"BATTLETRANSITIONS.DIALOGS.BUTTONS.CANCEL\",\n        callback: () => { throw new InvalidTargetError(undefined); }\n      }\n    },\n      html => { setTargetSelectEventListeners(html); }\n    );\n    return getTargetFromForm(form);\n  }\n\n  throw new InvalidTargetError(target);\n}\n\n// #endregion Functions (21)\n", "import { RadialWipeFilter } from \"../filters\";\nimport { createColorTexture, getTargetType, parseConfigurationFormElements } from \"../utils\";\nimport { generateEasingSelectOptions, generateRadialDirectionSelectOptions, generateTargetTypeSelectOptions } from \"./selectOptions\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { RadialWipeConfiguration, SceneChangeConfiguration, TransitionConfiguration } from \"./types\";\nimport { getTargetFromForm, normalizePosition, onTargetSelectDialogClosed, setTargetSelectEventListeners, validateTarget } from \"./targetSelectFunctions\";\nimport { InvalidSceneError, InvalidTargetError } from \"../errors\";\n\nexport class RadialWipeStep extends TransitionStep<RadialWipeConfiguration> {\n  // #region Properties (10)\n\n  #filter: RadialWipeFilter | null = null;\n  #screenLocation: [number, number] = [0.5, 0.5];\n\n  public static DefaultSettings: RadialWipeConfiguration = {\n    id: \"\",\n    type: \"radialwipe\",\n    easing: \"none\",\n    radial: \"inside\",\n    duration: 1000,\n    bgSizingMode: \"stretch\",\n    version: \"1.1.0\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\",\n    target: [0.5, 0.5]\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon radial-wipe fa-fw fas'></i>\"\n  public static key = \"radialwipe\";\n  public static name = \"RADIALWIPE\";\n  public static reversible: boolean = true;\n  public static template = \"radialwipe-config\";\n\n  // #endregion Properties (10)\n\n  // #region Public Static Methods (10)\n\n  public static RenderTemplate(config?: RadialWipeConfiguration, oldScene?: Scene, newScene?: Scene): Promise<string> {\n    const targetType = getTargetType({\n      ...RadialWipeStep.DefaultSettings,\n      ...(config ? config : {})\n    }, oldScene, newScene);\n\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${RadialWipeStep.template}.hbs`, {\n      ...RadialWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      radialSelect: generateRadialDirectionSelectOptions(),\n      targetType,\n      oldScene: oldScene?.id ?? \"\",\n      newScene: newScene?.id ?? \"\",\n      selectedTarget: config ? config.target : \"\",\n      ...generateTargetTypeSelectOptions(oldScene, newScene),\n      pointX: Array.isArray(config?.target) ? config.target[0] : 0.5,\n      pointY: Array.isArray(config?.target) ? config.target[1] : 0.5,\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await, @typescript-eslint/no-unused-vars\n  public static async addEventListeners(html: JQuery<HTMLElement>, config?: RadialWipeConfiguration) {\n    setTargetSelectEventListeners(html);\n  }\n\n  public static editDialogClosed(element: HTMLElement | JQuery<HTMLElement>): void {\n    onTargetSelectDialogClosed($(element));\n  }\n\n  public static from(config: RadialWipeConfiguration): RadialWipeStep\n  public static from(form: HTMLFormElement): RadialWipeStep\n  public static from(form: JQuery<HTMLFormElement>): RadialWipeStep\n  public static from(arg: unknown): RadialWipeStep {\n    if (arg instanceof HTMLFormElement) return RadialWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return RadialWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new RadialWipeStep(arg as RadialWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): RadialWipeStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const serializedTexture = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n    const target = getTargetFromForm(elem);\n    return new RadialWipeStep({\n      ...RadialWipeStep.DefaultSettings,\n      serializedTexture,\n      target,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"radial\", \"backgroundType\", \"backgroundColor\", \"easing\", \"label\")\n    });\n  }\n\n  public static getDuration(config: RadialWipeConfiguration): number { return { ...RadialWipeStep.DefaultSettings, ...config }.duration }\n\n  public static async validate(config: RadialWipeConfiguration, sequence: TransitionConfiguration[]): Promise<RadialWipeConfiguration | Error> {\n    try {\n      const newSceneId = sequence.reduce((prev, curr) => curr.type === \"scenechange\" ? (curr as SceneChangeConfiguration).scene : prev, null as string | null);\n      if (!newSceneId) throw new InvalidSceneError(typeof newSceneId === \"string\" ? newSceneId : typeof newSceneId);\n      const newScene = game.scenes?.get(newSceneId);\n      if (!newScene) throw new InvalidSceneError(typeof newSceneId === \"string\" ? newSceneId : typeof newSceneId);\n\n      const target = await validateTarget({\n        ...RadialWipeStep.DefaultSettings,\n        ...config\n      },\n        canvas?.scene as Scene,\n        newScene\n      );\n      return {\n        ...RadialWipeStep.DefaultSettings,\n        ...config,\n        target\n      };\n    } catch (err) {\n      return err as Error;\n    }\n  }\n\n  // #endregion Public Static Methods (10)\n\n  // #region Public Methods (3)\n\n  public async execute(container: PIXI.Container): Promise<void> {\n    const config: RadialWipeConfiguration = {\n      ...RadialWipeStep.DefaultSettings,\n      ...this.config\n    }\n    // Check for our target in the current (new) scene\n    if (!Array.isArray(config.target)) {\n      const obj = await fromUuid(config.target);\n      if (!obj) throw new InvalidTargetError(config.target);\n      const parsed = foundry.utils.parseUuid(config.target);\n      if (parsed?.primaryType !== \"Scene\") throw new InvalidTargetError(config.target);\n      if (parsed.primaryId === canvas?.scene?.id) this.#screenLocation = normalizePosition(obj);\n    }\n\n    const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new RadialWipeFilter(config.radial, this.#screenLocation[0], this.#screenLocation[1], background.baseTexture);\n    this.addFilter(container, filter);\n    this.#filter = filter;\n    await this.simpleTween(filter);\n  }\n\n  public async prepare(): Promise<void> {\n    const config: RadialWipeConfiguration = {\n      ...RadialWipeStep.DefaultSettings,\n      ...this.config\n    };\n    if (Array.isArray(config.target)) {\n      this.#screenLocation = config.target;\n    } else {\n      // Check if the target is in our current (old) scene\n      const obj = await fromUuid(config.target);\n      if (!obj) throw new InvalidTargetError(config.target);\n      const parsed = foundry.utils.parseUuid(config.target);\n      if (parsed?.primaryType !== \"Scene\") throw new InvalidTargetError(config.target);\n      if (parsed.primaryId === canvas?.scene?.id) this.#screenLocation = normalizePosition(obj);\n    }\n  }\n\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof RadialWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #endregion Public Methods (3)\n}", "import { NotImplementedError } from '../errors';\nimport { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { parseConfigurationFormElements } from '../utils';\nimport { TransitionStep } from './TransitionStep';\nimport { RemoveOverlayConfiguration } from './types';\n\nexport class RemoveOverlayStep extends TransitionStep<RemoveOverlayConfiguration> {\n  // #region Properties (6)\n\n  public static DefaultSettings: RemoveOverlayConfiguration = {\n    id: \"\",\n    type: \"removeoverlay\",\n    version: \"1.1.0\"\n  };\n  public static hidden: boolean = false;\n  public static key = \"removeoverlay\";\n  public static name = \"HIDEOVERLAY\";\n  public static skipConfig = true;\n  public static template = \"\";\n  public static icon = \"<i class='bt-icon hide-overlay fa-fw fas'></i>\"\n  public static category = \"technical\";\n\n  // #endregion Properties (6)\n\n  // #region Public Static Methods (6)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static RenderTemplate(config?: RemoveOverlayConfiguration): Promise<string> {\n    throw new NotImplementedError();\n  }\n\n  public static from(config: RemoveOverlayConfiguration): RemoveOverlayStep\n  public static from(form: JQuery<HTMLFormElement>): RemoveOverlayStep\n  public static from(form: HTMLFormElement): RemoveOverlayStep\n  public static from(arg: unknown): RemoveOverlayStep {\n    if (arg instanceof HTMLFormElement) return RemoveOverlayStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return RemoveOverlayStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new RemoveOverlayStep(arg as RemoveOverlayConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): RemoveOverlayStep {\n    return new RemoveOverlayStep({\n      ...RemoveOverlayStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\")\n    });\n  }\n\n  // #endregion Public Static Methods (6)\n\n  // #region Public Methods (1)\n\n  public execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> | void {\n    prepared.overlay.forEach(child => child.alpha = 0);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { WaitConfiguration } from \"./types\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { parseConfigurationFormElements } from \"../utils\";\n\nconst CURRENT_VERSION = \"1.1.0\";\n\nexport class WaitStep extends TransitionStep<WaitConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: WaitConfiguration = {\n    id: \"\",\n    type: \"wait\",\n    duration: 0,\n    version: CURRENT_VERSION\n  }\n\n  public static category = \"technical\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon wait fa-fw fas'></i>\"\n  public static key = \"wait\";\n  public static name = \"WAIT\";\n  public static template = \"wait-config\";\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: WaitConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${WaitStep.template}.hbs`, {\n      ...WaitStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {})\n    });\n  }\n\n  public static from(config: WaitConfiguration): WaitStep\n  public static from(form: HTMLFormElement): WaitStep\n  public static from(form: JQuery<HTMLFormElement>): WaitStep\n  public static from(arg: unknown): WaitStep {\n    if (arg instanceof HTMLFormElement) return WaitStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return WaitStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new WaitStep(arg as WaitConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): WaitStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    return new WaitStep({\n      ...WaitStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"label\")\n    });\n  }\n\n  public static getDuration(config: WaitConfiguration): number | Promise<number> { return { ...WaitStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  public execute(): Promise<void> {\n    const config: WaitConfiguration = {\n      ...WaitStep.DefaultSettings,\n      ...this.config\n    }\n    return new Promise<void>(resolve => { setTimeout(resolve, config.duration); });\n  }\n\n  // #endregion Public Methods (1)\n}\n", "import { BattleTransition } from \"../BattleTransition\";\nimport { addStepDialog, editStepDialog, confirm, buildTransitionFromForm } from \"../dialogs\";\nimport { InvalidTransitionError, NoPreviousStepError } from \"../errors\";\nimport { PreparedTransitionHash, TransitionSequence } from \"../interfaces\";\nimport { sequenceDuration } from \"../transitionUtils\";\nimport { formatDuration, getStepClassByKey, localize, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { RepeatConfiguration, TransitionConfiguration, WaitConfiguration } from './types';\nimport { WaitStep } from \"./WaitStep\";\n\n// #region Classes (1)\n\nexport class RepeatStep extends TransitionStep<RepeatConfiguration> {\n  // #region Properties (8)\n\n  #preparedSequence: TransitionStep[] = [];\n\n  public static DefaultSettings: RepeatConfiguration = {\n    id: \"\",\n    type: \"repeat\",\n    version: \"1.1.0\",\n    style: \"previous\",\n    delay: 0,\n    iterations: 2\n  }\n\n  public static category = \"technical\";\n  public static hidden: boolean = false;\n  public static icon = `<i class=\"fas fa-fw fa-repeat\"></i>`\n  public static key = \"repeat\";\n  public static name = \"REPEAT\";\n  public static template = \"repeat-config\";\n\n  public get preparedSequence() { return this.#preparedSequence; }\n\n  public async teardown(container: PIXI.Container): Promise<void> {\n    for (const step of this.#preparedSequence) {\n      await step.teardown(container);\n    }\n  }\n\n  // #endregion Properties (8)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: RepeatConfiguration, oldScene?: Scene, newScene?: Scene): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${RepeatStep.template}.hbs`, {\n      ...RepeatStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      oldScene: oldScene?.id ?? \"\",\n      newScene: newScene?.id ?? \"\",\n      styleSelect: {\n        sequence: \"BATTLETRANSITIONS.SCENECONFIG.REPEAT.SEQUENCE.LABEL\",\n        previous: \"BATTLETRANSITIONS.SCENECONFIG.REPEAT.PREVIOUS.LABEL\"\n      }\n    })\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static addEventListeners(elem: HTMLElement | JQuery<HTMLElement>, config?: TransitionConfiguration): void {\n    const html = $(elem);\n    setStyle(html);\n\n    html.find(\"#style\").on(\"input\", () => {\n      setStyle(html);\n    });\n\n    html.find(\"[data-action='add-step']\").on(\"click\", e => {\n      e.preventDefault();\n      void addStep(html);\n    });\n\n\n    html.find(\"[data-action='clear-steps']\").on(\"click\", e => {\n      if ($(e.currentTarget).is(\":visible\")) {\n        e.preventDefault();\n        void clearButtonhandler(html);\n      }\n    })\n    setClearDisabled(html);\n  }\n\n\n\n\n  public static from(config: RepeatConfiguration): RepeatStep\n  public static from(form: JQuery<HTMLFormElement>): RepeatStep\n  public static from(form: HTMLFormElement): RepeatStep\n  public static from(arg: unknown): RepeatStep {\n    if (arg instanceof HTMLFormElement) return RepeatStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if ((arg as any)[0] instanceof HTMLFormElement) return RepeatStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new RepeatStep(arg as RepeatConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): RepeatStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n\n    const sequence = buildTransition(elem);\n    return new RepeatStep({\n      ...RepeatStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"iterations\", \"style\", \"delay\", \"label\"),\n      id: foundry.utils.randomID(),\n      sequence\n    })\n  }\n\n  // #endregion Public Static Methods (7)\n\n  public static async getDuration(config: RepeatConfiguration, sequence: TransitionConfiguration[]): Promise<number> {\n    if (config.style === \"previous\") {\n      const index = sequence.findIndex(item => item.id === config.id);\n      if (index === -1) throw new InvalidTransitionError(RepeatStep.key);\n      else if (index === 0) throw new NoPreviousStepError();\n\n      const prev = sequence[index - 1];\n      const step = getStepClassByKey(prev.type);\n      if (!step) throw new InvalidTransitionError(typeof prev.type === \"string\" ? prev.type : typeof prev.type);\n      const res = step.getDuration(prev, sequence);\n      const duration = res instanceof Promise ? await res : res;\n      return ((duration + config.delay) * (config.iterations - 1)) + config.delay;\n\n    } else {\n      const duration = await sequenceDuration(config.sequence ?? []);\n      return duration + (config.delay * config.iterations);\n    }\n  }\n\n\n  // #region Public Methods (2)\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    for (const step of this.#preparedSequence) {\n      const res = step.execute(container, sequence, prepared);\n      if (res instanceof Promise) await res;\n    }\n  }\n\n  public async prepare(sequence: TransitionSequence): Promise<void> {\n    const config: RepeatConfiguration = {\n      ...RepeatStep.DefaultSettings,\n      ...this.config\n    };\n\n    if (config.style === \"sequence\" && !config.sequence?.length) throw new InvalidTransitionError(RepeatStep.key);\n\n    const currentStep = sequence.sequence.findIndex(step => step.id === config.id);\n    if (currentStep === -1) throw new InvalidTransitionError(RepeatStep.key);\n    const previousStep = sequence.sequence[currentStep - 1];\n\n    if (!previousStep) throw new InvalidTransitionError(RepeatStep.key);\n\n    const waitConfig: WaitConfiguration = {\n      ...WaitStep.DefaultSettings,\n      duration: config.delay\n    };\n\n    const hydratedSequence: TransitionConfiguration[] = [];\n    if (config.delay && config.style === \"previous\") hydratedSequence.push(waitConfig);\n\n    if (config.style === \"previous\") {\n      for (let i = 0; i < (config.iterations - 1); i++) {\n        hydratedSequence.push({\n          ...previousStep,\n          id: foundry.utils.randomID()\n        });\n        if (config.delay) hydratedSequence.push(waitConfig);\n      }\n    } else if (config.style === \"sequence\") {\n      hydratedSequence.push(...config.sequence ?? []);\n      if (config.delay) hydratedSequence.push(waitConfig);\n    }\n\n    this.#preparedSequence = await BattleTransition.prepareSequence({\n      ...sequence,\n      sequence: hydratedSequence\n    });\n  }\n\n  // #endregion Public Methods (2)\n}\n\n// #endregion Classes (1)\n\n// #region Functions (5)\n\nasync function addStep(html: JQuery<HTMLElement>) {\n  const key = await addStepDialog();\n  if (!key) return;\n\n  const step = getStepClassByKey(key);\n  if (!step) throw new InvalidTransitionError(key);\n\n  const oldScene = html.find(\"#oldScene\").val() as string ?? \"\";\n  const newScene = html.find(\"#newScene\").val() as string ?? \"\";\n\n  const config = step.skipConfig ? { ...step.DefaultSettings, id: foundry.utils.randomID() } : await editStepDialog(step.DefaultSettings, game.scenes?.get(oldScene), game.scenes?.get(newScene));\n  if (!config) return;\n\n  void upsertStepButton(html, config);\n}\n\nfunction addStepEventListeners(html: JQuery<HTMLElement>, button: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  // Remove button\n  button.find(\"[data-action='remove']\").on(\"click\", () => {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(config.type);\n    confirm(\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.TITLE\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) }),\n      localize(\"BATTLETRANSITIONS.DIALOGS.REMOVECONFIRM.CONTENT\", { name: localize(`BATTLETRANSITIONS.${step.name}.NAME`) })\n    )\n      .then(confirm => {\n        if (confirm) {\n          button.remove();\n        }\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false });\n        console.error(err);\n      });\n  });\n\n  // Configure button\n  button.find(\"[data-action='configure']\").on(\"click\", () => {\n    editStepDialog(config)\n      .then(newConfig => {\n        if (newConfig) {\n          // Replace button\n          return upsertStepButton(html, newConfig)\n        }\n      }).then(() => {\n      }).catch(err => {\n        ui.notifications?.error((err as Error).message, { console: false })\n        console.error(err);\n      })\n  });\n}\n\nfunction buildTransition(html: JQuery<HTMLElement>): TransitionConfiguration[] {\n  const sequence: TransitionConfiguration[] = [];\n\n  html.find(\"#transition-step-list [data-transition-type]\").each((index, element) => {\n    const flag = element.dataset.flag ?? \"\";\n    if (!flag) return;\n    const step = JSON.parse(flag) as TransitionConfiguration;\n    sequence.push(step);\n  });\n  return sequence;\n}\n\nfunction setStyle(html: JQuery<HTMLElement>) {\n  const style = html.find(\"#style\").val() as string;\n\n  html.find(\"[data-repeat-style='previous']\").css(\"display\", style === \"previous\" ? \"block\" : \"none\");\n  html.find(\"[data-repeat-style='sequence']\").css(\"display\", style === \"sequence\" ? \"block\" : \"none\");\n  html.find(\"#sequenceContainer\").css(\"display\", style === \"sequence\" ? \"block\" : \"none\");\n}\n\nasync function upsertStepButton(html: JQuery<HTMLElement>, config: TransitionConfiguration) {\n  const step = getStepClassByKey(config.type);\n  if (!step) throw new InvalidTransitionError(config.type);\n\n  const outerSequence = [...buildTransitionFromForm(html), config];\n  const durationRes = step.getDuration(config, outerSequence);\n  const calculatedDuration = (durationRes instanceof Promise) ? (await durationRes) : durationRes;\n\n  const totalDuration = await sequenceDuration(outerSequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n\n  const buttonContent = await renderTemplate(`/modules/${__MODULE_ID__}/templates/config/step-item.hbs`, {\n    ...step.DefaultSettings,\n    ...config,\n    name: localize(`BATTLETRANSITIONS.${step.name}.NAME`),\n    description: localize(`BATTLETRANSITIONS.${step.name}.DESCRIPTION`),\n    calculatedDuration,\n    type: step.key,\n    flag: JSON.stringify({\n      ...step.DefaultSettings,\n      ...config\n    })\n  });\n\n  const button = $(buttonContent);\n\n  const extant = html.find(`[data-id=\"${config.id}\"]`);\n  if (extant.length) extant.replaceWith(button);\n  else html.find(\"#transition-step-list\").append(button);\n\n  addStepEventListeners(html, button, config);\n\n  // Update serialized version on parent\n  const index = button.parents(\"[data-index]\").data(\"index\") as number;\n\n  const sequence = buildTransition(html);\n  html.find(`#sequence-list [data-index=\"${index}\"]`).attr(\"data-sequence\", JSON.stringify(sequence));\n  setClearDisabled(html);\n}\n\n// #endregion Functions (5)\n\nasync function clearButtonhandler(html: JQuery<HTMLElement>) {\n  const confirmed = await confirm(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.TITLE\", localize(\"BATTLETRANSITIONS.DIALOGS.CLEARSTEPS.MESSAGE\"));\n  if (!confirmed) return;\n  html.find(\"#transition-step-list\").children().remove();\n  await updateTotalDuration(html);\n  setClearDisabled(html);\n}\n\nfunction setClearDisabled(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  if (!sequence.length) html.find(\"#clear-steps\").attr(\"disabled\", \"true\");\n  else html.find(\"#clear-steps\").removeAttr(\"disabled\");\n}\n\nasync function updateTotalDuration(html: JQuery<HTMLElement>) {\n  const sequence = buildTransitionFromForm(html);\n  const totalDuration = await sequenceDuration(sequence);\n  html.find(\"#total-duration\").text(localize(\"BATTLETRANSITIONS.SCENECONFIG.TOTALDURATION\", { duration: formatDuration(totalDuration) }));\n}", "import { NotImplementedError } from '../errors';\nimport { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { parseConfigurationFormElements } from '../utils';\nimport { TransitionStep } from './TransitionStep';\nimport { RestoreOverlayConfiguration } from './types';\n\nexport class RestoreOverlayStep extends TransitionStep<RestoreOverlayConfiguration> {\n  // #region Properties (6)\n\n  public static readonly template = \"\";\n\n  public static DefaultSettings: RestoreOverlayConfiguration = {\n    id: \"\",\n    type: \"restoreoverlay\",\n    version: \"1.1.0\"\n  };\n  public static hidden: boolean = false;\n  public static key = \"restoreoverlay\";\n  public static name = \"SHOWOVERLAY\";\n  public static skipConfig = true;\n  public static icon = \"<i class='bt-icon show-overlay fa-fw fas'></i>\"\n  public static category = \"technical\";\n\n  // #endregion Properties (6)\n\n  // #region Public Static Methods (6)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static RenderTemplate(config?: RestoreOverlayConfiguration): Promise<string> {\n    throw new NotImplementedError();\n  }\n\n  public static from(config: RestoreOverlayConfiguration): RestoreOverlayStep\n  public static from(form: JQuery<HTMLFormElement>): RestoreOverlayStep\n  public static from(form: HTMLFormElement): RestoreOverlayStep\n  public static from(arg: unknown): RestoreOverlayStep {\n    if (arg instanceof HTMLFormElement) return RestoreOverlayStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return RestoreOverlayStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new RestoreOverlayStep(arg as RestoreOverlayConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): RestoreOverlayStep {\n    return new RestoreOverlayStep({\n      ...RestoreOverlayStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\")\n    });\n  }\n\n  // #endregion Public Static Methods (6)\n\n  // #region Public Methods (1)\n\n  public execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> | void {\n    prepared.overlay.forEach(child => child.alpha = 1);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { ParallelStep } from \"./ParallelStep\";\nimport { RepeatStep } from \"./RepeatStep\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { ParallelConfiguration, RepeatConfiguration, TransitionConfiguration } from \"./types\";\n\nexport function getPreviousStep(id: string, sequence: TransitionConfiguration[]): TransitionConfiguration | undefined\nexport function getPreviousStep(id: string, sequence: TransitionStep[]): TransitionStep | undefined\nexport function getPreviousStep(id: string, sequence: unknown[]): TransitionStep | TransitionConfiguration | undefined {\n  if (sequence[0] instanceof TransitionStep) return getPreviousStepByStep(id, sequence as TransitionStep[]);\n  else return getPreviousStepByConfig(id, sequence as TransitionConfiguration[]);\n}\n\nfunction getPreviousStepByConfig(id: string, sequence: TransitionConfiguration[]): TransitionConfiguration | undefined {\n  for (let i = 0; i < sequence.length; i++) {\n    const step = sequence[i];\n    if (step.id === id && i > 0) return sequence[i - 1];\n    else if (step.id === id && i === 0) return undefined;\n    if (step.type === \"parallel\") {\n      const parallel = step as ParallelConfiguration;\n      for (const sub of parallel.sequences) {\n        const prev = getPreviousStepByConfig(id, sub);\n        if (prev) return prev;\n      }\n    } else if (step.type === \"repeat\") {\n      const repeat = step as RepeatConfiguration;\n      if (repeat.sequence && Array.isArray(repeat.sequence)) {\n        const prev = getPreviousStepByConfig(id, repeat.sequence);\n        if (prev) return prev;\n      }\n    }\n  }\n  return undefined;\n}\n\nfunction getPreviousStepByStep(id: string, sequence: TransitionStep[]): TransitionStep | undefined {\n  for (let i = 0; i < sequence.length; i++) {\n    const step = sequence[i];\n    if (step.config.id === id && i > 0) return sequence[i - 1];\n    else if (step.config.id === id && i === 0) return undefined;\n\n    if (step instanceof ParallelStep) {\n      for (const sequence of step.preparedSequences) {\n        const prev = getPreviousStepByStep(id, sequence);\n        if (prev) return prev;\n      }\n    } else if (step instanceof RepeatStep) {\n      const prev = getPreviousStepByStep(id, step.preparedSequence);\n      if (prev) return prev;\n    }\n  }\n  return undefined;\n}\n\n", "import { InvalidTransitionError, StepNotReversibleError } from \"../errors\";\nimport { TransitionSequence, PreparedTransitionHash } from \"../interfaces\";\nimport { getStepClassByKey, parseConfigurationFormElements, wait } from \"../utils\";\nimport { getPreviousStep } from \"./functions\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { ReverseConfiguration, TransitionConfiguration } from \"./types\";\n\nexport class ReverseStep extends TransitionStep<ReverseConfiguration> {\n  public static DefaultSettings: ReverseConfiguration = {\n    id: \"\",\n    type: \"reverse\",\n    version: \"1.1.0\",\n    delay: 0\n  }\n\n  public static category = \"technical\";\n  public static hidden: boolean = false;\n  public static icon: string = `<i class=\"fas fa-fw fa-backward\"></i>`;\n  public static key: string = \"reverse\";\n  public static name: string = \"REVERSE\";\n  public static template: string = \"reverse-config\";\n  public static skipConfig = false;\n\n  public static from(config: ReverseConfiguration): ReverseStep\n  public static from(form: HTMLFormElement): ReverseStep\n  public static from(form: JQuery<HTMLFormElement>): ReverseStep\n  public static from(arg: unknown): ReverseStep {\n    if (arg instanceof HTMLFormElement) return ReverseStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if ((arg as any)[0] instanceof HTMLFormElement) return ReverseStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new ReverseStep(arg as ReverseConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): ReverseStep {\n    return new ReverseStep({\n      ...ReverseStep.DefaultSettings,\n      ...parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"delay\")\n    });\n  }\n\n  public static RenderTemplate(config?: ReverseConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${ReverseStep.template}.hbs`, {\n      ...ReverseStep.DefaultSettings,\n      ...(config ? config : {})\n    });\n  }\n\n  public static validate(config: TransitionConfiguration, sequence: TransitionConfiguration[]): TransitionConfiguration | Error {\n    const prev = getPreviousStep(config.id, sequence);\n    if (!prev) throw new InvalidTransitionError(\"reverse\");\n\n    const step = getStepClassByKey(prev.type);\n    if (!step) throw new InvalidTransitionError(typeof prev.type === \"string\" ? prev.type : typeof prev.type);\n    if (!step.reversible) throw new StepNotReversibleError(step.key);\n    return config;\n  }\n\n  public execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> | void {\n    const config: ReverseConfiguration = {\n      ...ReverseStep.DefaultSettings,\n      ...this.config\n    }\n\n    const prev = getPreviousStep(config.id, prepared.prepared.sequence);\n    if (!prev) throw new InvalidTransitionError(\"reverse\");\n    if (config.delay) return wait(config.delay).then(() => prev.reverse());\n    else return prev.reverse();\n  }\n\n}", "import { CUSTOM_HOOKS } from \"../constants\";\nimport { InvalidSceneError, SequenceTimedOutError } from \"../errors\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { activateScene, hideTransitionCover } from \"../transitionUtils\";\nimport { awaitHook, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { SceneChangeConfiguration } from \"./types\";\n\nexport class SceneChangeStep extends TransitionStep<SceneChangeConfiguration> {\n  // #region Properties (5)\n\n  public static DefaultSettings = {\n    id: \"\",\n    type: \"scenechange\",\n    scene: \"\",\n    version: \"1.1.0\"\n  }\n\n  public static hidden: boolean = true;\n  public static key = \"scenechange\";\n  public static name = \"SCENECHANGE\";\n  public static template = \"scenechange-config\";\n  public static icon = \"<i class='bt-icon scene-change fa-fw fas'></i>\"\n  public static category = \"technical\";\n\n  // #endregion Properties (5)\n\n  // #region Public Static Methods (6)\n\n  public static RenderTemplate(config?: SceneChangeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${SceneChangeStep.template}.hbs`, {\n      ...SceneChangeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {})\n    });\n  }\n\n  public static from(config: SceneChangeConfiguration): SceneChangeStep\n  public static from(form: HTMLFormElement): SceneChangeStep\n  public static from(form: JQuery<HTMLFormElement>): SceneChangeStep\n  public static from(arg: unknown): SceneChangeStep {\n    if (arg instanceof HTMLFormElement) return SceneChangeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return SceneChangeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new SceneChangeStep(arg as SceneChangeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): SceneChangeStep {\n    const elem = parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"scene\");\n    return new SceneChangeStep({\n      ...SceneChangeStep.DefaultSettings,\n      ...elem\n    })\n  }\n\n  // #endregion Public Static Methods (6)\n\n  // #region Public Methods (2)\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    // If we'rea lready on this scene, then really we've missed the chance to properly execute this transition.\n    // Likely our preparation steps took too long.\n    if (this.config.scene === canvas?.scene?.id) {\n      throw new SequenceTimedOutError();\n    }\n\n\n\n    if (sequence.caller === (game.user as User).id) await activateScene({\n      ...SceneChangeStep.DefaultSettings,\n      ...this.config\n    }.scene);\n    else await awaitHook(CUSTOM_HOOKS.SCENE_ACTIVATED);\n\n    hideTransitionCover();\n  }\n\n  public async validate(): Promise<boolean | Error> {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    const scene = (game.scenes as any).get(this.config.scene);\n    if (!(scene instanceof Scene)) return Promise.resolve(new InvalidSceneError({\n      ...SceneChangeStep.DefaultSettings,\n      ...this.config\n    }.scene));\n    else return Promise.resolve(true);\n  }\n\n  // #endregion Public Methods (2)\n}\n", "import { TransitionStep } from \"./TransitionStep\";\nimport { SoundConfiguration } from \"./types\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { parseConfigurationFormElements } from \"../utils\";\n\nexport class SoundStep extends TransitionStep<SoundConfiguration> {\n  // #region Properties (8)\n\n  #sound: Sound | null = null;\n\n  public static DefaultSettings: SoundConfiguration = {\n    id: \"\",\n    type: \"sound\",\n    volume: 100,\n    file: \"\",\n    version: \"1.1.0\"\n  }\n\n  public static category = \"technical\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon sound fa-fw fas'></i>\"\n  public static key = \"sound\";\n  public static name = \"SOUND\";\n  public static template = \"sound-config\";\n\n  // #endregion Properties (8)\n\n  // #region Public Static Methods (8)\n\n  public static async RenderTemplate(config?: SoundConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${SoundStep.template}.hbs`, {\n      ...SoundStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {})\n    });\n  }\n\n  public static addEventListeners(element: HTMLElement | JQuery<HTMLElement>): void {\n    const html = $(element);\n    html.find(\"#file input\").attr(\"required\", \"true\");\n    html.find(\"form input\").trigger(\"input\");\n  }\n\n  public static from(config: SoundConfiguration): SoundStep\n  public static from(form: HTMLFormElement): SoundStep\n  public static from(form: JQuery<HTMLFormElement>): SoundStep\n  public static from(arg: unknown): SoundStep {\n    if (arg instanceof HTMLFormElement) return SoundStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return SoundStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new SoundStep(arg as SoundConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): SoundStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const file = elem.find(\"#file\").val() as string ?? \"\";\n    const volume = elem.find(\"#volume\").val() as number ?? 100;\n\n    return new SoundStep({\n      ...SoundStep.DefaultSettings,\n      file,\n      volume,\n      ...parseConfigurationFormElements(elem, \"id\", \"label\")\n    })\n  }\n\n  //public static getDuration(config: PixelateConfiguration): number { return { ...PixelateStep.DefaultSettings, ...config }.duration }\n  public static getDuration(config: SoundConfiguration): Promise<number> {\n    return new Promise<number>((resolve, reject) => {\n      const audio = new Audio();\n      audio.onloadedmetadata = () => { resolve(Math.round(audio.duration * 1000)); };\n      audio.onerror = (e, src, line, col, err) => {\n        if (err) reject(err);\n        // eslint-disable-next-line @typescript-eslint/no-base-to-string\n        else reject(new Error(e.toString()));\n      }\n\n      audio.src = config.file;\n    })\n  }\n\n  // #endregion Public Static Methods (8)\n\n  // #region Public Methods (3)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: SoundConfiguration = {\n      ...SoundStep.DefaultSettings,\n      ...this.config\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    const sound = await foundry.audio.AudioHelper.play({ src: this.config.file, volume: config.volume / 100, autoplay: true }, true) as Sound;\n    this.#sound = sound;\n  }\n\n  public async prepare(): Promise<void> {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    await foundry.audio.AudioHelper.preloadSound(this.config.file);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public teardown(container: PIXI.Container): void {\n    this.#sound?.stop();\n  }\n\n  // #endregion Public Methods (3)\n}\n", "import { TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { SpiralShutterConfiguration } from \"./types\";\nimport { SpiralShutterFilter } from \"../filters\";\nimport { generateClockDirectionSelectOptions, generateEasingSelectOptions, generateRadialDirectionSelectOptions } from './selectOptions';\n\n\nexport class SpiralShutterStep extends TransitionStep<SpiralShutterConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: SpiralShutterConfiguration = {\n    id: \"\",\n    type: \"spiralshutter\",\n    duration: 1000,\n    direction: \"clockwise\",\n    radial: \"inside\",\n    easing: \"none\",\n    bgSizingMode: \"stretch\",\n    version: \"1.1.0\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon spiral-shutter fa-fw fas'></i>\"\n  public static key = \"spiralshutter\";\n  public static name = \"SPIRALSHUTTER\";\n  public static template = \"spiralshutter-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: SpiralShutterConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${SpiralShutterStep.template}.hbs`, {\n      ...SpiralShutterStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      radialSelect: generateRadialDirectionSelectOptions(),\n      directionSelect: generateClockDirectionSelectOptions()\n    });\n  }\n\n  public static from(config: SpiralShutterConfiguration): SpiralShutterStep\n  public static from(form: HTMLFormElement): SpiralShutterStep\n  public static from(form: JQuery<HTMLFormElement>): SpiralShutterStep\n  public static from(arg: unknown): SpiralShutterStep {\n    if (arg instanceof HTMLFormElement) return SpiralShutterStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return SpiralShutterStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new SpiralShutterStep(arg as SpiralShutterConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): SpiralShutterStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n\n    const backgroundImage = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n    return new SpiralShutterStep({\n      ...SpiralShutterStep.DefaultSettings,\n      backgroundImage,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"easing\", \"backgroundType\", \"backgroundColor\", \"direction\", \"radial\", \"label\")\n    })\n  }\n\n  public static getDuration(config: SpiralShutterConfiguration): number { return { ...SpiralShutterStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  #filter: SpiralShutterFilter | null = null;\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof SpiralShutterFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: SpiralShutterConfiguration = {\n      ...SpiralShutterStep.DefaultSettings,\n      ...this.config\n    };\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new SpiralShutterFilter(config.direction, config.radial, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { SpiralWipeFilter } from '../filters';\nimport { createColorTexture, parseConfigurationFormElements } from '../utils';\nimport { TransitionStep } from './TransitionStep';\nimport { SpiralWipeConfiguration } from './types';\nimport { generateClockDirectionSelectOptions, generateEasingSelectOptions, generateRadialDirectionSelectOptions } from './selectOptions';\n\nexport class SpiralWipeStep extends TransitionStep<SpiralWipeConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: SpiralWipeConfiguration = {\n    id: \"\",\n    type: \"spiralwipe\",\n    duration: 1000,\n    direction: \"left\",\n    clockDirection: \"clockwise\",\n    radial: \"outside\",\n    easing: \"none\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  };\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = `<i class=\"fas fa-fw fa-arrows-spin\"></i>`\n  public static key = \"spiralwipe\";\n  public static name = \"SPIRALWIPE\";\n  public static template = \"spiralwipe-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: SpiralWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${SpiralWipeStep.template}.hbs`, {\n      ...SpiralWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      radialSelect: generateRadialDirectionSelectOptions(),\n      directionSelect: {\n        top: \"BATTLETRANSITIONS.DIRECTIONS.TOP\",\n        left: \"BATTLETRANSITIONS.DIRECTIONS.LEFT\",\n        right: \"BATTLETRANSITIONS.DIRECTIONS.RIGHT\",\n        bottom: \"BATTLETRANSITIONS.DIRECTIONS.BOTTOM\"\n      },\n      clockDirectionSelect: generateClockDirectionSelectOptions(),\n    })\n  }\n\n  public static from(config: SpiralWipeConfiguration): SpiralWipeStep\n  public static from(form: HTMLFormElement): SpiralWipeStep\n  public static from(form: JQuery<HTMLFormElement>): SpiralWipeStep\n  public static from(arg: unknown): SpiralWipeStep {\n    if (arg instanceof HTMLFormElement) return SpiralWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return SpiralWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new SpiralWipeStep(arg as SpiralWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): SpiralWipeStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const backgroundImage = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n\n    return new SpiralWipeStep({\n      ...SpiralWipeStep.DefaultSettings,\n      backgroundImage,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"backgroundType\", \"backgroundColor\", \"radial\", \"direction\", \"clockDirection\", \"easing\", \"label\")\n    })\n  }\n\n  public static getDuration(config: SpiralWipeConfiguration): number { return { ...SpiralWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  #filter: SpiralWipeFilter | null = null;\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof SpiralWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // #region Public Methods (1)\n\n  public async execute(container: PIXI.Container): Promise<void> {\n    const config: SpiralWipeConfiguration = {\n      ...SpiralWipeStep.DefaultSettings,\n      ...this.config\n    };\n\n    const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new SpiralWipeFilter(config.clockDirection, config.radial, config.direction, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { SpotlightWipeFilter } from \"../filters\";\nimport { TransitionSequence } from '../interfaces';\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { SpotlightWipeConfiguration } from \"./types\";\nimport { generateEasingSelectOptions, generateLinearDirectionSelectOptions, generateRadialDirectionSelectOptions } from './selectOptions';\n\n\nexport class SpotlightWipeStep extends TransitionStep<SpotlightWipeConfiguration> {\n  // #region Properties (8)\n\n  public readonly defaultSettings: Partial<SpotlightWipeConfiguration> = {\n    duration: 1000,\n    easing: \"none\"\n  }\n\n  public static DefaultSettings: SpotlightWipeConfiguration = {\n    id: \"\",\n    type: \"spotlightwipe\",\n    duration: 1000,\n    easing: \"none\",\n    direction: \"top\",\n    radial: \"outside\",\n    bgSizingMode: \"stretch\",\n    version: \"1.1.0\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon spotlight-wipe fa-fw fas'></i>\"\n  public static key = \"spotlightwipe\";\n  public static name = \"SPOTLIGHTWIPE\";\n  public static template = \"spotlightwipe-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (8)\n\n  // #region Public Static Methods (7)\n\n  public static RenderTemplate(config?: SpotlightWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${SpotlightWipeStep.template}.hbs`, {\n      ...SpotlightWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      directionSelect: generateLinearDirectionSelectOptions(),\n      radialSelect: generateRadialDirectionSelectOptions()\n    });\n  }\n\n  public static from(config: SpotlightWipeConfiguration): SpotlightWipeStep\n  public static from(form: HTMLFormElement): SpotlightWipeStep\n  public static from(form: JQuery<HTMLFormElement>): SpotlightWipeStep\n  public static from(arg: unknown): SpotlightWipeStep {\n    if (arg instanceof HTMLFormElement) return SpotlightWipeStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return SpotlightWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new SpotlightWipeStep(arg as SpotlightWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): SpotlightWipeStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const serializedTexture = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n\n    return new SpotlightWipeStep({\n      ...SpotlightWipeStep.DefaultSettings,\n      serializedTexture,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"direction\", \"radial\", \"backgroundType\", \"backgroundColor\", \"easing\", \"label\")\n    });\n  }\n\n  public static getDuration(config: SpotlightWipeConfiguration): number { return { ...SpotlightWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n\n  // #region Public Methods (1)\n\n  #filter: SpotlightWipeFilter | null = null;\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof SpotlightWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: SpotlightWipeConfiguration = {\n      ...SpotlightWipeStep.DefaultSettings,\n      ...this.config\n    };\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new SpotlightWipeFilter(config.direction, config.radial, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  // #endregion Public Methods (1)\n}\n", "import { TransitionStep } from \"./TransitionStep\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { SceneChangeConfiguration, StartPlaylistConfiguration } from \"./types\";\nimport { InvalidSceneError, NotImplementedError } from \"../errors\";\nimport { parseConfigurationFormElements } from \"../utils\";\nimport { SceneChangeStep } from \"./SceneChangeStep\";\nimport { BattleTransition } from \"../BattleTransition\";\n\nexport class StartPlaylistStep extends TransitionStep<StartPlaylistConfiguration> {\n  public static readonly template = \"\";\n  public static hidden: boolean = false;\n  public static skipConfig: boolean = true;\n\n  public static key = \"startplaylist\";\n  public static name = \"STARTPLAYLIST\";\n  public static icon = \"<i class='bt-icon start-ambient-playlist fa-fw fas'></i>\"\n  public static category = \"technical\";\n\n  public static DefaultSettings: StartPlaylistConfiguration = {\n    id: \"\",\n    type: \"startplaylist\",\n    version: \"1.1.0\"\n  };\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static RenderTemplate(config?: StartPlaylistConfiguration): Promise<string> {\n    throw new NotImplementedError();\n  }\n\n  public static from(config: StartPlaylistConfiguration): StartPlaylistStep\n  public static from(form: JQuery<HTMLFormElement>): StartPlaylistStep\n  public static from(form: HTMLFormElement): StartPlaylistStep\n  public static from(arg: unknown): StartPlaylistStep {\n    if (arg instanceof HTMLFormElement) return StartPlaylistStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return StartPlaylistStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new StartPlaylistStep(arg as StartPlaylistConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): StartPlaylistStep {\n    return new StartPlaylistStep({\n      ...StartPlaylistStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\")\n    });\n  }\n\n  async prepare(sequence: TransitionSequence): Promise<void> {\n    const sceneChanges = sequence.sequence.filter(step => step.type === \"scenechange\");\n    for (const step of sceneChanges) {\n      const config = step as SceneChangeConfiguration;\n      const scene = game.scenes?.get(config.scene);\n      if (!(scene instanceof Scene)) throw new InvalidSceneError(typeof config.scene === \"string\" ? config.scene : typeof config.scene);\n      if (scene.playlist) {\n        if (scene.playlistSound) {\n          const sound = typeof scene.playlistSound === \"string\" ? scene.playlist.sounds.get(scene.playlistSound) : (scene.playlistSound as PlaylistSound);\n          if (sound) await sound.load();\n        } else {\n          const firstId = scene.playlist.playbackOrder[0];\n          const sound = scene.playlist.sounds.get(firstId);\n          if (sound) await sound.load();\n        }\n      }\n\n\n    }\n  }\n\n  public execute(container: PIXI.Container, sequence: TransitionSequence): void {\n    BattleTransition.SuppressSoundUpdates = false;\n\n    const sceneChange = sequence.sequence.reduce((prev, curr) => curr instanceof SceneChangeStep ? curr : prev) as SceneChangeConfiguration;\n    if (!sceneChange) throw new InvalidSceneError(typeof sceneChange);\n    const scene = game.scenes?.get(sceneChange.scene) as Scene;\n    if (!(scene instanceof Scene)) throw new InvalidSceneError(sceneChange.scene);\n    if (!scene.canUserModify(game.user as User, \"update\")) return;\n    if (scene.playlist && !scene.playlistSound) {\n      // Playlist only\n      switch (scene.playlist.mode) {\n        case CONST.PLAYLIST_MODES.SEQUENTIAL:\n        case CONST.PLAYLIST_MODES.SHUFFLE:\n          if (scene.playlist.playbackOrder.length) {\n            const sound = scene.playlist.sounds.get(scene.playlist.playbackOrder[0]);\n            if (sound) void scene.playlist.playSound(sound);\n          }\n          break;\n        case CONST.PLAYLIST_MODES.SIMULTANEOUS:\n          void scene.playlist.playAll();\n          break;\n      }\n    } else if (scene.playlist && ((scene.playlistSound as any) instanceof PlaylistSound)) {\n      // Specific sound, easy peasy\n      void scene.playlist.playSound(scene.playlistSound as unknown as PlaylistSound);\n    }\n\n  }\n\n}", "import { TextureSwapFilter } from \"../filters\";\nimport { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { addFilterToScene, removeFilterFromScene } from \"../transitionUtils\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { generateDualStyleSelectOptions } from \"./selectOptions\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { TextureSwapConfiguration } from \"./types\";\n\nexport class TextureSwapStep extends TransitionStep<TextureSwapConfiguration> {\n  // #region Properties (6)\n\n  public readonly defaultSettings: Partial<TextureSwapConfiguration> = {};\n\n  public static DefaultSettings: TextureSwapConfiguration = {\n    id: \"\",\n    type: \"textureswap\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\",\n    applyToScene: false,\n    applyToOverlay: true\n  };\n  public static hidden: boolean = false;\n  public static key: string = \"textureswap\";\n  public static name = \"TEXTURESWAP\";\n  public static template = \"textureswap-config\";\n  public static icon = \"<i class='bt-icon texture-swap fa-fw fas'></i>\"\n  public static category = \"effect\";\n\n  // #endregion Properties (6)\n\n  // #region Public Static Methods (6)\n\n  public static async RenderTemplate(config?: TextureSwapConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${TextureSwapStep.template}.hbs`, {\n      ...TextureSwapStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    })\n  }\n\n  public static from(config: TextureSwapConfiguration): TextureSwapStep\n  public static from(form: HTMLFormElement): TextureSwapStep\n  public static from(form: JQuery<HTMLFormElement>): TextureSwapStep\n  public static from(arg: unknown): TextureSwapStep {\n    if (arg instanceof HTMLFormElement) return TextureSwapStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return TextureSwapStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new TextureSwapStep(arg as TextureSwapConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): TextureSwapStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const serializedTexture = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n\n    const dualStyle = elem.find(\"#dualStyle\").val() as string;\n\n    return new TextureSwapStep({\n      ...TextureSwapStep.DefaultSettings,\n      serializedTexture,\n      ...parseConfigurationFormElements(elem, \"id\", \"backgroundType\", \"backgroundColor\", \"label\"),\n      applyToOverlay: dualStyle === \"overlay\" || dualStyle === \"both\",\n      applyToScene: dualStyle === \"scene\" || dualStyle === \"both\"\n    });\n  }\n\n  // #endregion Public Static Methods (6)\n\n  // #region Public Methods (1)\n\n  #sceneFilter: PIXI.Filter | null = null;\n\n  public teardown(): Promise<void> | void {\n    if (this.#sceneFilter) removeFilterFromScene(this.#sceneFilter);\n    this.#sceneFilter = null;\n  }\n\n  public execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): void {\n    const config: TextureSwapConfiguration = {\n      ...TextureSwapStep.DefaultSettings,\n      ...this.config\n    };\n\n    if (config.applyToOverlay) {\n      const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n      const filter = new TextureSwapFilter(background.baseTexture);\n      this.addFilter(container, filter);\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      const background = config.deserializedTexture ?? createColorTexture(\"transparent\");\n      const filter = new TextureSwapFilter(background.baseTexture);\n      addFilterToScene(filter, prepared.prepared);\n      this.#sceneFilter = filter;\n    }\n  }\n\n  // #endregion Public Methods (1)\n}", "import { TransitionSequence, PreparedTransitionHash } from '../interfaces';\nimport { addFilterToScene, removeFilterFromScene } from '../transitionUtils';\nimport { parseConfigurationFormElements } from '../utils';\nimport { TransitionStep } from './TransitionStep';\nimport { TwistConfiguration } from './types';\nimport { generateClockDirectionSelectOptions, generateDualStyleSelectOptions, generateEasingSelectOptions } from './selectOptions';\n\nexport class TwistStep extends TransitionStep<TwistConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: TwistConfiguration = {\n    id: \"\",\n    type: \"twist\",\n    version: \"1.1.0\",\n    duration: 1000,\n    maxAngle: 10,\n    easing: \"none\",\n    direction: \"clockwise\",\n    applyToScene: false,\n    applyToOverlay: true\n  };\n  public static category = \"warp\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon twist fa-fw fas'></i>\"\n  public static key = \"twist\";\n  public static name = \"TWIST\";\n  public static template = \"twist-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: TwistConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${TwistStep.template}.hbs`, {\n      ...TwistStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n\n      directionSelect: generateClockDirectionSelectOptions(),\n      easingSelect: generateEasingSelectOptions(),\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    });\n  }\n\n  public static from(config: TwistConfiguration): TwistStep\n  public static from(form: HTMLFormElement): TwistStep\n  public static from(form: JQuery<HTMLFormElement>): TwistStep\n  public static from(arg: unknown): TwistStep {\n    if (arg instanceof HTMLFormElement) return TwistStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return TwistStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new TwistStep(arg as TwistConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): TwistStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const dualStyle = elem.find(\"#dualStyle\").val() as string;\n    return new TwistStep({\n      ...TwistStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"direction\", \"easing\", \"label\"),\n      applyToOverlay: dualStyle === \"overlay\" || dualStyle === \"both\",\n      applyToScene: dualStyle === \"scene\" || dualStyle === \"both\"\n    })\n  }\n\n  public static getDuration(config: TwistConfiguration): number { return { ...TwistStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  #sceneFilter: PIXI.Filter | null = null;\n\n  public teardown(): Promise<void> | void {\n    if (this.#sceneFilter) removeFilterFromScene(this.#sceneFilter);\n    this.#sceneFilter = null;\n  }\n\n  #filters: PIXI.Filter[] = [];\n\n\n  public async reverse(): Promise<void> {\n    const config: TwistConfiguration = {\n      ...TwistStep.DefaultSettings,\n      ...this.config\n    }\n    await Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n      this.#filters.map(filter => TweenMax.to(filter.uniforms, { angle: 0, duration: config.duration / 1000, ease: config.easing }))\n    )\n  }\n\n  // #filter: RadialWipeFilter | null = null;\n  // public async reverse(): Promise<void> {\n  //   if (this.#filter instanceof RadialWipeFilter) await this.simpleReverse(this.#filter);\n  // }\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    const config: TwistConfiguration = {\n      ...TwistStep.DefaultSettings,\n      ...this.config\n    }\n    const filters: PIXI.Filter[] = [];\n\n    if (config.applyToOverlay) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      const filter = new (PIXI.filters as any).TwistFilter({\n        radius: window.innerWidth,\n        angle: 0,\n        offset: { x: window.innerWidth / 2, y: window.innerHeight / 2 }\n      }) as PIXI.Filter;\n\n      this.addFilter(container, filter);\n      filters.push(filter);\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      const filter = new (PIXI.filters as any).TwistFilter({\n        radius: window.innerWidth,\n        angle: 0,\n        offset: { x: window.innerWidth / 2, y: window.innerHeight / 2 }\n      }) as PIXI.Filter;\n      addFilterToScene(filter, prepared.prepared);\n      filters.push(filter);\n    }\n\n    this.#filters = [...filters];\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n    await Promise.all(filters.map(filter => TweenMax.to(filter.uniforms, { angle: this.config.direction === \"clockwise\" ? config.maxAngle * -1 : this.config.maxAngle, duration: config.duration / 1000, ease: this.config.easing || \"none\" })));\n  }\n\n  // #endregion Public Methods (1)\n}\n", "import { FileNotFoundError } from \"../errors\";\nimport { TextureSwapFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { VideoConfiguration } from \"./types\";\n\nexport class VideoStep extends TransitionStep<VideoConfiguration> {\n  // #region Properties (7)\n\n  #preloadedVideo: PIXI.Texture | null = null;\n  #videoContainer: PIXI.Container | null = null;\n\n  public static DefaultSettings: VideoConfiguration = {\n    id: \"\",\n    type: \"video\",\n    volume: 100,\n    clear: false,\n    file: \"\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\",\n    videoSizingMode: \"stretch\",\n    version: \"1.1.0\"\n  }\n\n  public static hidden: boolean = false;\n  public static key = \"video\";\n  public static name = \"VIDEO\";\n  public static template = \"video-config\";\n  public static icon = \"<i class='bt-icon video fa-fw fas'></i>\"\n  public static category = \"effect\";\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (6)\n\n  public static async RenderTemplate(config?: VideoConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${VideoStep.template}.hbs`, {\n      ...VideoStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {})\n    });\n  }\n\n  public static from(config: VideoConfiguration): VideoStep\n  public static from(form: JQuery<HTMLFormElement>): VideoStep\n  public static from(form: HTMLFormElement): VideoStep\n  public static from(arg: unknown): VideoStep {\n    if (arg instanceof HTMLFormElement) return VideoStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return VideoStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new VideoStep(arg as VideoConfiguration);\n  }\n\n  public static addEventListeners(element: HTMLElement | JQuery<HTMLElement>): void {\n    const html = $(element);\n    html.find(\"#file input\").attr(\"required\", \"true\");\n    html.find(\"form input\").trigger(\"input\");\n  }\n\n  public static fromFormElement(form: HTMLFormElement): VideoStep {\n    const file = $(form).find(\"#file\").val() as string ?? \"\";\n    const volume = $(form).find(\"#volume input[type='number']\").val() as number;\n    const backgroundImage = $(form).find(\"#backgroundImage\").val() as string ?? \"\"\n    return new VideoStep({\n      ...VideoStep.DefaultSettings,\n      ...(file ? { file } : {}),\n      ...(volume ? { volume: volume / 100 } : {}),\n      serializedTexture: backgroundImage,\n      ...parseConfigurationFormElements($(form) as JQuery<HTMLFormElement>, \"id\", \"background\", \"backgroundType\", \"backgroundColor\", \"label\")\n    })\n  }\n\n\n  // #endregion Public Static Methods (6)\n\n  public static getDuration(config: VideoConfiguration): Promise<number> {\n    return new Promise<number>((resolve, reject) => {\n      const vid = document.createElement(\"video\");\n      vid.onloadedmetadata = () => { resolve(Math.round(vid.duration * 1000)); };\n      vid.onerror = (e, src, line, col, err) => {\n        if (err) reject(err);\n        // eslint-disable-next-line @typescript-eslint/no-base-to-string\n        else reject(new Error(e.toString()));\n      };\n\n      vid.src = config.file;\n    });\n  }\n\n  // #region Public Methods (3)\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: VideoConfiguration = {\n      ...VideoStep.DefaultSettings,\n      ...this.config\n    };\n\n    const texture = this.#preloadedVideo;\n    if (!texture) throw new FileNotFoundError(config.file);\n\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const resource = texture?.baseTexture.resource as PIXI.VideoResource;\n    const source = resource.source;\n\n    return new Promise<void>((resolve, reject) => {\n      const swapFilter = new TextureSwapFilter(texture.baseTexture);\n      const sprite = PIXI.Sprite.from(texture);\n      const bgSprite = PIXI.Sprite.from(background);\n\n      const videoContainer = new PIXI.Container();\n      videoContainer.addChild(bgSprite);\n      bgSprite.width = window.innerWidth;\n      bgSprite.height = window.innerHeight;\n      videoContainer.addChild(sprite);\n      sprite.width = window.innerWidth;\n      sprite.height = window.innerHeight;\n      sprite.filters = [swapFilter];\n      source.currentTime = 0;\n\n      this.#videoContainer = videoContainer;\n      container.addChild(videoContainer);\n\n      source.addEventListener(\"ended\", () => {\n        if (config.clear) setTimeout(() => { sprite.destroy(); }, 500);\n        resolve();\n      });\n\n      source.addEventListener(\"error\", e => { reject(e.error as Error); });\n\n      void source.play();\n    })\n  }\n\n  public async prepare(): Promise<void> {\n    const config: VideoConfiguration = {\n      ...VideoStep.DefaultSettings,\n      ...this.config\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n    const texture: PIXI.Texture = await (PIXI.loadVideo as any).load(config.file) as PIXI.Texture;\n    this.#preloadedVideo = texture;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public teardown(container: PIXI.Container): void {\n    if (!this.#videoContainer) return;\n    const children = [...this.#videoContainer.children];\n    for (const child of children) child.destroy();\n    this.#videoContainer.destroy();\n  }\n\n  // #endregion Public Methods (3)\n}\n", "import { WaveWipeFilter } from \"../filters\";\nimport { TransitionSequence } from \"../interfaces\";\nimport { createColorTexture, parseConfigurationFormElements } from \"../utils\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { WaveWipeConfiguration } from \"./types\";\nimport { generateEasingSelectOptions, generateRadialDirectionSelectOptions } from './selectOptions';\n\nexport class WaveWipeStep extends TransitionStep<WaveWipeConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: WaveWipeConfiguration = {\n    id: \"\",\n    type: \"wavewipe\",\n    duration: 1000,\n    easing: \"none\",\n    direction: \"inside\",\n    version: \"1.1.0\",\n    bgSizingMode: \"stretch\",\n    backgroundType: \"color\",\n    backgroundImage: \"\",\n    backgroundColor: \"#00000000\"\n  }\n\n  public static category = \"wipe\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon wave-wipe fa-fw fas'></i>\"\n  public static key = \"wavewipe\";\n  public static name: string = \"WAVEWIPE\";\n  public static template = \"wavewipe-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: WaveWipeConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${WaveWipeStep.template}.hbs`, {\n      ...WaveWipeStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      radialSelect: generateRadialDirectionSelectOptions(),\n      easingSelect: generateEasingSelectOptions()\n    });\n  }\n\n  public static from(config: WaveWipeConfiguration): WaveWipeStep\n  public static from(form: HTMLFormElement): WaveWipeStep\n  public static from(form: JQuery<HTMLFormElement>): WaveWipeStep\n  public static from(arg: unknown): WaveWipeStep {\n    if (arg instanceof HTMLFormElement) return WaveWipeStep.fromFormElement(arg)\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return WaveWipeStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new WaveWipeStep(arg as WaveWipeConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): WaveWipeStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const serializedTexture = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n\n    return new WaveWipeStep({\n      ...WaveWipeStep.DefaultSettings,\n      serializedTexture,\n      ...parseConfigurationFormElements(elem, \"id\", \"label\", \"duration\", \"backgroundType\", \"backgroundColor\", \"easing\", \"direction\")\n    })\n  }\n\n  public static getDuration(config: WaveWipeConfiguration): number { return { ...WaveWipeStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n\n  #filter: WaveWipeFilter | null = null;\n  public async reverse(): Promise<void> {\n    if (this.#filter instanceof WaveWipeFilter) await this.simpleReverse(this.#filter);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public async execute(container: PIXI.Container, sequence: TransitionSequence): Promise<void> {\n    const config: WaveWipeConfiguration = {\n      ...WaveWipeStep.DefaultSettings,\n      ...this.config\n    }\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filter = new WaveWipeFilter(config.direction, background.baseTexture);\n    this.#filter = filter;\n    this.addFilter(container, filter);\n    await this.simpleTween(filter);\n  }\n\n  // #endregion Public Methods (1)\n}", "import { PreparedTransitionHash, TransitionSequence } from '../interfaces';\nimport { addFilterToScene, removeFilterFromScene } from '../transitionUtils';\nimport { parseConfigurationFormElements } from '../utils';\nimport { generateDualStyleSelectOptions, generateEasingSelectOptions } from './selectOptions';\nimport { TransitionStep } from './TransitionStep';\nimport { ZoomBlurConfiguration } from './types';\n\nexport class ZoomBlurStep extends TransitionStep<ZoomBlurConfiguration> {\n  // #region Properties (7)\n\n  public static DefaultSettings: ZoomBlurConfiguration = {\n    id: \"\",\n    type: \"zoomblur\",\n    version: \"1.1.0\",\n    duration: 1000,\n    maxStrength: 0.5,\n    easing: \"none\",\n    innerRadius: 0,\n    applyToOverlay: true,\n    applyToScene: false\n  }\n\n  public static category = \"warp\";\n  public static hidden: boolean = false;\n  public static icon = \"<i class='bt-icon zoomblur fa-fw fas'></i>\"\n  public static key = \"zoomblur\";\n  public static name = \"ZOOMBLUR\";\n  public static template = \"zoomblur-config\";\n  public static reversible: boolean = true;\n\n  // #endregion Properties (7)\n\n  // #region Public Static Methods (7)\n\n  public static async RenderTemplate(config?: ZoomBlurConfiguration): Promise<string> {\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${ZoomBlurStep.template}.hbs`, {\n      ...ZoomBlurStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      easingSelect: generateEasingSelectOptions(),\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    });\n  }\n\n  public static from(config: ZoomBlurConfiguration): ZoomBlurStep\n  public static from(form: HTMLFormElement): ZoomBlurStep\n  public static from(form: JQuery<HTMLFormElement>): ZoomBlurStep\n  public static from(arg: unknown) {\n    if (arg instanceof HTMLFormElement) return ZoomBlurStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (((arg as any)[0]) instanceof HTMLFormElement) return ZoomBlurStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new ZoomBlurStep(arg as ZoomBlurConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): ZoomBlurStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n\n    const maxStrength = elem.find(\"#maxStrength input[type='number']\").val() as number ?? 1;\n    const innerRadius = elem.find(\"#innerRadius input[type='number']\").val() as number ?? 0;\n\n    const dualStyle = elem.find(\"#dualStyle\").val() as string;\n    return new ZoomBlurStep({\n      ...ZoomBlurStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"duration\", \"label\"),\n      maxStrength,\n      innerRadius,\n      applyToOverlay: dualStyle === \"overlay\" || dualStyle === \"both\",\n      applyToScene: dualStyle === \"scene\" || dualStyle === \"both\"\n    });\n  }\n\n  public static getDuration(config: ZoomBlurConfiguration): number { return { ...ZoomBlurStep.DefaultSettings, ...config }.duration }\n\n  // #endregion Public Static Methods (7)\n\n  // #region Public Methods (1)\n  #sceneFilter: PIXI.Filter | null = null;\n\n  public teardown(): Promise<void> | void {\n    if (this.#sceneFilter) removeFilterFromScene(this.#sceneFilter);\n    this.#sceneFilter = null;\n  }\n\n\n  #filters: PIXI.Filter[] = [];\n\n  public async reverse(): Promise<void> {\n    const config: ZoomBlurConfiguration = {\n      ...ZoomBlurStep.DefaultSettings,\n      ...this.config\n    };\n\n    await Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n      this.#filters.map(filter => TweenMax.to(filter.uniforms, { uStrength: 0, duration: config.duration / 1000, ease: config.easing }))\n    )\n  }\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    const config: ZoomBlurConfiguration = {\n      ...ZoomBlurStep.DefaultSettings,\n      ...this.config\n    };\n\n    const filters: PIXI.Filter[] = [];\n    if (config.applyToOverlay) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      const filter = new (PIXI.filters as any).ZoomBlurFilter({\n        strength: 0,\n        innerRadius: config.innerRadius * window.innerWidth,\n        radius: -1,\n        center: [window.innerWidth / 2, window.innerHeight / 2]\n\n      }) as PIXI.Filter;\n\n      this.addFilter(container, filter);\n      filters.push(filter);\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      const filter = new (PIXI.filters as any).ZoomBlurFilter({\n        strength: 0,\n        innerRadius: config.innerRadius * window.innerWidth,\n        radius: -1,\n        center: [window.innerWidth / 2, window.innerHeight / 2]\n\n      }) as PIXI.Filter;\n\n      this.#sceneFilter = filter;\n      addFilterToScene(filter, prepared.prepared);\n      filters.push(filter);\n    }\n\n    this.#filters = [...filters];\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n    await Promise.all(filters.map(filter => TweenMax.to(filter.uniforms, { uStrength: config.maxStrength, duration: config.duration / 1000, ease: config.easing || \"none\" })));\n  }\n\n  // #endregion Public Methods (1)\n}", "import { ZoomFilter } from \"../filters\";\nimport { PreparedTransitionHash, TransitionSequence } from \"../interfaces\";\nimport { addFilterToScene, removeFilterFromScene } from \"../transitionUtils\";\nimport { createColorTexture, getTargetType, parseConfigurationFormElements } from \"../utils\";\nimport { generateDualStyleSelectOptions, generateEasingSelectOptions, generateTargetTypeSelectOptions } from \"./selectOptions\";\nimport { TransitionStep } from \"./TransitionStep\";\nimport { SceneChangeConfiguration, TransitionConfiguration, ZoomConfiguration } from \"./types\";\nimport { getTargetFromForm, normalizePosition, onTargetSelectDialogClosed, setTargetSelectEventListeners, validateTarget } from \"./targetSelectFunctions\";\nimport { InvalidSceneError, InvalidTargetError } from \"../errors\";\n\n// #region Classes (1)\n\nexport class ZoomStep extends TransitionStep<ZoomConfiguration> {\n  // #region Properties (11)\n\n  #filters: PIXI.Filter[] = [];\n  #sceneFilter: PIXI.Filter | null = null;\n  #screenLocation: [number, number] = [0.5, 0.5];\n\n  public static DefaultSettings: ZoomConfiguration = {\n    id: \"\",\n    type: \"zoom\",\n    duration: 1000,\n    backgroundType: \"color\",\n    bgSizingMode: \"stretch\",\n    backgroundColor: \"#00000000\",\n    version: \"1.1.0\",\n    easing: \"none\",\n    amount: 0,\n    clampBounds: false,\n    target: [0.5, 0.5],\n    applyToOverlay: true,\n    applyToScene: false\n  }\n\n  public static category: string = \"warp\";\n  public static hidden: boolean = false;\n  public static icon: string = `<i class=\"fas fa-fw fa-magnifying-glass\"></i>`\n  public static key: string = \"zoom\";\n  public static name: string = \"ZOOM\";\n  public static reversible: boolean = true\n  public static template: string = \"zoom-config\";\n\n  // #endregion Properties (11)\n\n  // #region Public Static Methods (10)\n\n  // // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static async RenderTemplate(config?: ZoomConfiguration, oldScene?: Scene, newScene?: Scene): Promise<string> {\n    const targetType = getTargetType({\n      ...ZoomStep.DefaultSettings,\n      ...(config ? config : {})\n    }, oldScene, newScene);\n\n    return renderTemplate(`/modules/${__MODULE_ID__}/templates/config/${ZoomStep.template}.hbs`, {\n      ...ZoomStep.DefaultSettings,\n      id: foundry.utils.randomID(),\n      ...(config ? config : {}),\n      oldScene: oldScene?.id ?? \"\",\n      newScene: newScene?.id ?? \"\",\n      easingSelect: generateEasingSelectOptions(),\n      targetType,\n      ...generateTargetTypeSelectOptions(oldScene, newScene),\n      pointX: Array.isArray(config?.target) ? config.target[0] : 0.5,\n      pointY: Array.isArray(config?.target) ? config.target[1] : 0.5,\n      dualStyleSelect: generateDualStyleSelectOptions(),\n      dualStyle: config ? config.applyToOverlay && config.applyToScene ? \"both\" : config.applyToOverlay ? \"overlay\" : config.applyToScene ? \"scene\" : \"overlay\" : \"overlay\"\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await, @typescript-eslint/no-unused-vars\n  public static async addEventListeners(html: JQuery<HTMLElement>, config?: ZoomConfiguration) {\n    setTargetSelectEventListeners(html);\n    setBackgroundSelector(html);\n\n    html.find(\"#clampBounds\").on(\"change\", () => { setBackgroundSelector(html); })\n  }\n\n  //public static editDialogClosed(element: HTMLElement | JQuery<HTMLElement>, config?: TransitionConfiguration): void { }\n  public static editDialogClosed(element: HTMLElement | JQuery<HTMLElement>): void {\n    onTargetSelectDialogClosed($(element));\n  }\n\n  public static from(config: ZoomConfiguration): ZoomStep\n  public static from(form: HTMLFormElement): ZoomStep\n  public static from(form: JQuery<HTMLFormElement>): ZoomStep\n  public static from(arg: unknown): ZoomStep {\n    if (arg instanceof HTMLFormElement) return ZoomStep.fromFormElement(arg);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if ((arg as any)[0] instanceof HTMLFormElement) return ZoomStep.fromFormElement((arg as any)[0] as HTMLFormElement);\n    else return new ZoomStep(arg as ZoomConfiguration);\n  }\n\n  public static fromFormElement(form: HTMLFormElement): ZoomStep {\n    const elem = $(form) as JQuery<HTMLFormElement>;\n    const serializedTexture = elem.find(\"#backgroundImage\").val() as string ?? \"\";\n\n    const dualStyle = elem.find(\"#dualStyle\").val() as string;\n\n    const target = getTargetFromForm(elem);\n\n    const config: ZoomConfiguration = {\n      ...ZoomStep.DefaultSettings,\n      ...parseConfigurationFormElements(elem, \"id\", \"label\", \"duration\", \"easing\", \"amount\", \"backgroundType\", \"backgroundColor\", \"clampBounds\"),\n      serializedTexture,\n      target,\n      applyToOverlay: dualStyle === \"overlay\" || dualStyle === \"both\",\n      applyToScene: dualStyle === \"scene\" || dualStyle === \"both\"\n    }\n\n    return new ZoomStep(config);\n  }\n\n  public static getDuration(config: ZoomConfiguration): number { return { ...ZoomStep.DefaultSettings, ...config }.duration }\n\n  public static async validate(config: ZoomConfiguration, sequence: TransitionConfiguration[]): Promise<ZoomConfiguration | Error> {\n    try {\n      const newSceneId = sequence.reduce((prev, curr) => curr.type === \"scenechange\" ? (curr as SceneChangeConfiguration).scene : prev, null as string | null);\n      if (!newSceneId) throw new InvalidSceneError(typeof newSceneId === \"string\" ? newSceneId : typeof newSceneId);\n      const newScene = game.scenes?.get(newSceneId);\n      if (!newScene) throw new InvalidSceneError(typeof newSceneId === \"string\" ? newSceneId : typeof newSceneId);\n\n      const target = await validateTarget({\n        ...ZoomStep.DefaultSettings,\n        ...config\n      },\n        canvas?.scene as Scene,\n        newScene\n      );\n      return {\n        ...ZoomStep.DefaultSettings,\n        ...config,\n        target\n      }\n\n    } catch (err) {\n      return err as Error;\n    }\n  }\n\n  // #endregion Public Static Methods (10)\n\n  // #region Public Methods (4)\n\n  public async execute(container: PIXI.Container, sequence: TransitionSequence, prepared: PreparedTransitionHash): Promise<void> {\n    const config: ZoomConfiguration = {\n      ...ZoomStep.DefaultSettings,\n      ...this.config\n    };\n\n    // Check for our target in the current (new) scene\n    if (!Array.isArray(config.target)) {\n      const obj = await fromUuid(config.target);\n      if (!obj) throw new InvalidTargetError(config.target);\n      const parsed = foundry.utils.parseUuid(config.target);\n      if (parsed?.primaryType !== \"Scene\") throw new InvalidTargetError(config.target);\n      if (parsed.primaryId === canvas?.scene?.id) this.#screenLocation = normalizePosition(obj);\n    }\n\n    const background = this.config.deserializedTexture ?? createColorTexture(\"transparent\");\n    const filters: PIXI.Filter[] = [];\n\n    if (config.applyToOverlay) {\n      const filter = new ZoomFilter(this.#screenLocation, config.duration ? 1 : config.amount, config.clampBounds, background.baseTexture);\n      this.addFilter(container, filter);\n      filters.push(filter);\n    }\n\n    if (config.applyToScene && canvas?.stage) {\n      const filter = new ZoomFilter(this.#screenLocation, config.duration ? 1 : config.amount, config.clampBounds, background.baseTexture);\n      addFilterToScene(filter, prepared.prepared);\n      filters.push(filter);\n      this.#sceneFilter = filter;\n    }\n\n    if (config.duration) {\n      this.#filters = [...filters];\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n      await Promise.all(filters.map(filter => TweenMax.to(filter.uniforms, { amount: config.amount, duration: config.duration / 1000, ease: config.easing })))\n    }\n  }\n\n  public async prepare(): Promise<void> {\n    const config: ZoomConfiguration = {\n      ...ZoomStep.DefaultSettings,\n      ...this.config\n    };\n\n    if (Array.isArray(config.target)) {\n      this.#screenLocation = config.target;\n    } else {\n      // Check if the target is in our current (old) scene.\n      const obj = await fromUuid(config.target);\n      if (!obj) throw new InvalidTargetError(config.target);\n      const parsed = foundry.utils.parseUuid(config.target);\n      if (parsed?.primaryType !== \"Scene\") throw new InvalidTargetError(config.target);\n      if (parsed.primaryId === canvas?.scene?.id) this.#screenLocation = normalizePosition(obj);\n    }\n  }\n\n  public async reverse(): Promise<void> {\n    const config: ZoomConfiguration = {\n      ...ZoomStep.DefaultSettings,\n      ...this.config\n    };\n\n    await Promise.all(\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      this.#filters.map(filter => TweenMax.to(filter.uniforms, { amount: 1, duration: config.duration / 1000, ease: config.easing }))\n    )\n  }\n\n  public teardown(): Promise<void> | void {\n    if (this.#sceneFilter) removeFilterFromScene(this.#sceneFilter);\n    this.#sceneFilter = null;\n  }\n\n  // #endregion Public Methods (4)\n}\n\n// #endregion Classes (1)\n\n// #region Functions (1)\n\nfunction setBackgroundSelector(html: JQuery<HTMLElement>) {\n  const clamp = html.find(\"#clampBounds\").is(\":checked\");\n  if (!clamp) html.find(\".background-selector\").css(\"display\", \"block\");\n  else html.find(\".background-selector\").css(\"display\", \"none\");\n}\n\n// #endregion Functions (1)\n", "import { coerceTexture } from \"./coercion\";\nimport { LOG_ICON } from \"./constants\";\nimport { CannotInitializeCanvasError, CanvasNotFoundError, InvalidImportError, InvalidObjectError, InvalidTargetError, InvalidTextureError, NoFileError } from \"./errors\";\nimport { DataURLBuffer, TextureBuffer } from \"./interfaces\";\nimport { createNoise2D, RandomFn } from \"./lib/simplex-noise\";\nimport { ScreenSpaceCanvasGroup } from \"./ScreenSpaceCanvasGroup\";\nimport { bytesToBase64 } from \"./lib/base64Utils\";\nimport { TransitionStep, BackgroundTransition, TransitionConfiguration, TargetedTransition } from \"./steps\";\nimport * as steps from \"./steps\"\nimport { BackgroundType, TextureLike } from \"./types\";\n\n// #region Functions (33)\n\n/**\n * Quick wrapper to wait for a hook to get called\n * @param {string} hook The hook to await\n * @returns \n */\nexport async function awaitHook(hook: string): Promise<unknown[]> {\n  return new Promise<unknown[]>(resolve => {\n    Hooks.once(hook, (...args: unknown[]) => {\n      resolve(args);\n    })\n  })\n}\n\n/**\n * Generates a 1x1 {@link PIXI.Texture} with a given color\n * @param {PIXI.Color} color {@link PIXI.Color}\n * @returns \n */\nexport function createColorTexture(color: PIXI.ColorSource): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = 1;\n  canvas.height = 1;\n\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CannotInitializeCanvasError();\n  const actualColor = new PIXI.Color(color);\n  ctx.fillStyle = actualColor.toHexa();\n  ctx.fillRect(0, 0, 1, 1);\n  return PIXI.Texture.from(canvas);\n}\n\n/**\n * Creates a 1-dimensional gradient by interpolating between r,g,b values of two colors\n * @param {number} size \n * @param {PIXI.Color} startColor {@link PIXI.Color}\n * @param {PIXI.Color} endColor {@link PIXI.Color}\n * @returns \n */\nexport function createGradient1DTexture(size: number, startColor?: PIXI.Color, endColor?: PIXI.Color): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = size;\n  canvas.height = 1;\n\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CannotInitializeCanvasError();\n\n  const gradient = ctx.createLinearGradient(0, 0, size, 0);\n\n  const actualStart: PIXI.Color = (startColor ?? new PIXI.Color(\"white\"));\n  const actualEnd: PIXI.Color = endColor ?? new PIXI.Color(\"black\");\n\n  gradient.addColorStop(0, actualStart.toHex());\n  gradient.addColorStop(1, actualEnd.toHex());\n\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, size, 1);\n\n  return PIXI.Texture.from(canvas);\n}\n\n/**\n * Generates a simplex noise texture\n * @param {number} [width=256]\n * @param {number} [height=256]\n * @param {RandomFn} random {@link RandomFn}\n * @returns \n */\nexport function createNoiseTexture(width: number = 256, height: number = 256, random?: RandomFn): PIXI.Texture {\n  const noise2D = createNoise2D(random);\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CannotInitializeCanvasError();\n  canvas.width = width;\n  canvas.height = height;\n\n  const imageData = ctx.createImageData(canvas.width, canvas.height);\n  const data = imageData.data;\n\n  for (let y = 0; y < canvas.height; y++) {\n    for (let x = 0; x < canvas.width; x++) {\n      const value = noise2D(x / 32, y / 32);\n      const index = (y * canvas.width + x) * 4;\n      data[index] = value * 255;\n      data[index + 1] = value * 255;\n      data[index + 2] = value * 255;\n      data[index + 3] = 255;\n    }\n  }\n\n  ctx.putImageData(imageData, 0, 0);\n  return PIXI.Texture.from(canvas);\n}\n\nfunction dataURLToBuffer(url: string): Uint8Array {\n  const binary = atob(url.split(\",\")[1]);\n  const buffer = new Uint8Array(binary.length);\n  for (let i = 0; i < buffer.length; i++)\n    buffer[i] = binary.charCodeAt(i);\n  return buffer;\n}\n\nfunction deserializeDataURL(data: DataURLBuffer): PIXI.Texture {\n  const base64 = bytesToBase64((data.buffer instanceof ArrayBuffer) ? new Uint8Array(data.buffer) : data.buffer);\n  return PIXI.Texture.from(`data:${data.mimeType};base64,${base64}`);\n}\n\nexport function deserializeTexture(data: string | DataURLBuffer | TextureBuffer): PIXI.Texture {\n  if (typeof data === \"string\") return coerceTexture(data) ?? createColorTexture(\"transparent\");\n\n  const urlBuffer = data as DataURLBuffer;\n  if (urlBuffer.buffer && urlBuffer.mimeType) return deserializeDataURL(urlBuffer);\n\n  const textureBuffer = data as TextureBuffer;\n  if (textureBuffer.buffer && textureBuffer.width && textureBuffer.height) return deserializeTextureBuffer(textureBuffer);\n\n  else throw new InvalidTextureError()\n}\n\nfunction deserializeTextureBuffer(data: TextureBuffer): PIXI.Texture {\n  return PIXI.Texture.fromBuffer(data.buffer, data.width, data.height);\n}\n\nfunction isNumeric(value: unknown): boolean {\n  if (typeof value === \"number\") return true;\n\n  if (typeof value === \"string\") {\n    const temp = parseFloat(value);\n    return temp.toString() === value;\n  }\n  return false;\n}\n\nfunction findFormValue(serialized: { name: string, value: unknown }[], key: string): unknown {\n  const elem = serialized.find(({ name }) => name === key);\n\n  if (key === \"background\") {\n    const bgType = serialized.find(({ name }) => name === \"backgroundType\");\n    if (!bgType) return null;\n    if (bgType.value === \"image\") return findFormValue(serialized, \"backgroundImage\");\n    else return findFormValue(serialized, \"backgroundColor\");\n  }\n\n  if (!elem) return null;\n  if (key === \"id\" && !elem.value) return foundry.utils.randomID();\n\n  return isNumeric(elem.value) ? parseFloat(elem.value as string) : elem.value;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function formatBackgroundSummary(flag: any): string {\n  return \"\";\n  // return (flag.backgroundType === \"image\" ? flag.backgroundImage?.split(\"/\").splice(-1)[0] : flag.backgroundColor) ?? \"\";\n}\n\n\n\nexport function getCanvasGroup(): ScreenSpaceCanvasGroup | undefined {\n  return canvas?.stage?.children.find(child => child instanceof ScreenSpaceCanvasGroup);\n}\n\nexport function getCurrentOverlayObject(): PIXI.DisplayObject | undefined {\n  const canvasGroup = getCanvasGroup();\n  if (!canvasGroup) throw new CanvasNotFoundError();\n  if (canvasGroup.children.length === 0) return;\n  return canvasGroup.children[canvasGroup.children.length - 1];\n}\n\nexport function getSortedSteps(): (typeof TransitionStep)[] {\n  return Object.values(steps).sort((a, b) => localize(`BATTLETRANSITIONS.TRANSITIONTYPES.${a.name}`).localeCompare(localize(`BATTLETRANSITIONS.TRANSITIONTYPES.${b.name}`))) as (typeof TransitionStep)[];\n}\n\nexport function getStepClassByKey(key: string): (typeof TransitionStep) | undefined {\n  return Object.values(steps).find(obj => obj.key === key) as (typeof TransitionStep) | undefined;\n}\n\n/**\n * Inverts a {@link PIXI.Texture}\n * @param {PIXI.Texture} texture {@link PIXI.Texture} to be inverted\n * @returns {PIXI.Texture} {@link PIXI.Texture}\n */\nexport function invertTexture(texture: PIXI.Texture): PIXI.Texture {\n  const extracted = canvas?.app?.renderer.extract.canvas(PIXI.Sprite.from(texture)) as HTMLCanvasElement;\n  if (!extracted) throw new CannotInitializeCanvasError();\n\n  const newCanvas = document.createElement(\"canvas\");\n  newCanvas.width = extracted.width;\n  newCanvas.height = extracted.height;\n  const ctx = newCanvas.getContext(\"2d\");\n  if (!ctx) throw new CannotInitializeCanvasError();\n  ctx.drawImage(extracted, 0, 0);\n  ctx.globalCompositeOperation = \"difference\";\n  ctx.fillStyle = \"white\";\n  ctx.fillRect(0, 0, newCanvas.width, newCanvas.height);\n  return PIXI.Texture.from(newCanvas);\n}\n\n/**\n * Linearly interpolates between two values\n * @param {number} a Starting value\n * @param {number} b Ending value\n * @param {number} progress Relative distance through range, normalized\n * @returns \n */\nexport function lerp(a: number, b: number, progress: number) {\n  return a + progress * (b - progress);\n}\n\nexport function localize(key: string, data: Record<string, unknown> = {}): string {\n  return game.i18n?.format(key, data) ?? key;\n}\n\nexport function log(...args: unknown[]) {\n  console.log(LOG_ICON, __MODULE_TITLE__, \"|\", ...args);\n}\n\nexport function logImage(url: string, width: number = 256, height: number = 256) {\n  const image = new Image();\n\n  image.onload = function () {\n    const style = [\n      `font-size: 1px`,\n      `padding-left: ${width}px`,\n      `padding-bottom: ${height}px`,\n      // `padding: ${this.height / 100 * size}px ${this.width / 100 * size}px`,\n      `background: url(${url}) no-repeat`,\n      `background-size:contain`,\n      `border:1px solid black`,\n      `max-width: 512px`\n    ].join(\";\")\n    console.log('%c ', style);\n  }\n\n  image.src = url;\n}\n\nexport function logTexture(texture: PIXI.Texture) {\n  const renderTexture = PIXI.RenderTexture.create({ width: texture.width, height: texture.height });\n  const sprite = PIXI.Sprite.from(texture);\n  canvas?.app?.renderer.render(sprite, { renderTexture });\n\n  const ratio = 512 / Math.max(texture.width, texture.height);\n  const width = texture.width > texture.height ? 512 : texture.width * ratio;\n  const height = texture.height > texture.width ? 512 : texture.height * ratio;\n\n  canvas?.app?.renderer.extract.base64(renderTexture)\n    .then(base64 => {\n      logImage(base64, width, height);\n    }).catch(console.error);\n}\n\nexport function parseConfigurationFormElements<t = any>(form: JQuery<HTMLFormElement>, ...elements: string[]): Partial<t> {\n  const serialized = form.serializeArray();\n\n  const elem = Object.fromEntries(\n    elements.map(key => [key, findFormValue(serialized, key)])\n  );\n  return elem as Partial<t>;\n}\n\n/**\n * Rotates a texture by a preset\n * @param {PIXI.Texture} texture {@link PIXI.Texture}\n * @param {number} rotation \n * @returns {PIXI.Texture} {@link PIXI.Texture}\n */\nexport function rotateTexture(texture: PIXI.Texture, rotation: number): PIXI.Texture {\n  const { frame } = texture;\n\n  const h = PIXI.groupD8.isVertical(rotation) ? texture.frame.width : texture.frame.height;\n  const w = PIXI.groupD8.isVertical(rotation) ? texture.frame.height : texture.frame.width;\n\n  const crop = new PIXI.Rectangle(texture.frame.x, texture.frame.y, w, h);\n  const trim = crop;\n\n  let rotated: PIXI.Texture;\n  if (rotation % 2 === 0) {\n    rotated = new PIXI.Texture(texture.baseTexture, frame, crop, trim, rotation);\n  } else {\n    rotated = new PIXI.Texture(texture.baseTexture, frame, crop, trim, rotation - 1);\n    rotated.rotate++;\n  }\n\n  return rotated;\n}\n\nfunction serializeCanvas(canvas: HTMLCanvasElement): TextureBuffer {\n  const buffer = dataURLToBuffer(canvas.toDataURL());\n  return {\n    width: canvas.width,\n    height: canvas.height,\n    buffer\n  }\n}\n\nfunction serializeDataURL(url: string): DataURLBuffer {\n  const buffer = dataURLToBuffer(url);\n  return {\n    mimeType: url.split(\";\")[0].split(\":\")[1],\n    buffer\n  }\n}\n\nexport function serializeTexture(texture: any): string | TextureBuffer | DataURLBuffer {\n  if (typeof texture === \"string\" && texture === \"overlay\") return \"overlay\";\n  if (typeof texture === \"string\" && texture.startsWith(\"data:\")) return serializeDataURL(texture);\n  if (typeof texture === \"string\") return texture;\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-member-access\n  if (typeof texture.src === \"string\") return texture.src;\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n  if (typeof texture.value !== \"undefined\") return texture.value;\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n  const baseTexture: PIXI.BaseTexture = texture.baseTexture;\n  const resource = baseTexture.resource;\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n  if (typeof (resource as any).data !== \"undefined\") return { width: resource.width, height: resource.height, buffer: (resource as any).data };\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n  const source = (resource as any).source;\n\n  if (source instanceof HTMLImageElement) return source.getAttribute(\"src\") as string;\n  else if (source instanceof HTMLCanvasElement) return serializeCanvas(source);\n\n  console.error(texture);\n  throw new InvalidTextureError();\n}\n\nexport function shouldUseAppV2(): boolean {\n  return (game.release?.isNewer(\"12\") ?? false) && !!foundry.applications.api.ApplicationV2;\n}\n\nexport function sizeOf(obj: unknown) {\n  const objectList: unknown[] = [];\n  const stack = [obj];\n  let size = 0;\n\n  while (stack.length) {\n    const value = stack.pop();\n\n    switch (typeof value) {\n      case \"boolean\":\n        size += 4;\n        break;\n      case \"string\":\n        size += value.length * 2;\n        break;\n      case \"number\":\n        size += 8;\n        break;\n      case \"object\":\n        if (!objectList.includes(value)) {\n          objectList.push(value);\n          for (const prop in value) {\n            if (Object.prototype.hasOwnProperty.call(value, prop))\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n              stack.push((value as any)[prop]);\n          }\n        }\n        break;\n    }\n  }\n  return size;\n}\n\nexport async function wait(duration: number) {\n  return new Promise(resolve => { setTimeout(resolve, duration); });\n}\n\n// #endregion Functions (33)\n\n\nexport function isColor(data: string): boolean {\n  return CSS.supports(\"color\", data);\n}\n\nexport function migratev10XBackground(old: { background: string }): BackgroundTransition {\n  return {\n    backgroundType: old.background && !isColor(old.background) ? \"image\" : \"color\",\n    backgroundColor: isColor(old.background) ? old.background : \"\",\n    backgroundImage: !isColor(old.background) && old.background ? old.background : \"\",\n    bgSizingMode: \"stretch\"\n  }\n}\n\nexport function getMacros(): Macro[] {\n  return [\n    ...((game.macros?.contents.slice() as Macro[]) ?? []),\n    ...(game.packs?.contents.reduce((prev, curr) => {\n      if (curr.documentName !== \"Macro\") return prev;\n      return [\n        ...prev,\n        ...curr.index.contents\n      ] as Macro[];\n    }, [] as Macro[]) ?? [])\n  ]\n}\n\nexport function getActors(): Actor[] {\n  return [\n    ...((game.actors?.contents.slice() as Actor[]) ?? []),\n    ...(game.packs?.contents.reduce((prev, curr) => {\n      if (curr.documentName !== \"Actor\") return prev;\n      return [\n        ...prev,\n        ...curr.index.contents\n      ] as Actor[]\n    }, [] as Actor[]) ?? [])\n  ]\n}\n\nexport function getCompendiumFromUUID(uuid: string): string {\n  const split = uuid.split(\".\");\n  if (split[0] !== \"Compendium\") return \"\";\n  return split[2];\n}\n\nexport async function nextFrame() {\n  return new Promise(resolve => { requestAnimationFrame(resolve); });\n}\n\n/**\n * Returns a {@link Promise} that rejects after the specified amount of time\n */\nexport async function timeout(time: number, err?: Error): Promise<void> {\n  return new Promise<void>((resolve, reject) => {\n    setTimeout(() => {\n      reject(err ? err : new Error());\n    }, time)\n  });\n}\n\nexport function formatDuration(duration: number): string {\n  return localize(`BATTLETRANSITIONS.FORMATTERS.MILLISECONDS`, { value: duration.toLocaleString() });\n}\n\n\nexport function deepCopy(target: any, source: any): void {\n  if (typeof target !== \"object\") throw new InvalidObjectError(target);\n  if (typeof source !== \"object\") throw new InvalidObjectError(source);\n\n  for (const prop in source) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    if (Array.isArray(source[prop]))\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      target[prop] = source[prop].slice();\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else if (typeof source[prop] === \"object\")\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      deepCopy(target[prop], source[prop]);\n    else\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-assignment\n      target[prop] = source[prop];\n  }\n}\n\nexport function backgroundType(background: TextureLike): BackgroundType {\n  if (typeof background === \"string\" && background === \"overlay\") return \"overlay\";\n  else if (typeof background === \"string\" && isColor(background)) return \"color\";\n  else return \"image\";\n}\n\nexport function downloadJSON(json: object, name: string) {\n  const blob = new Blob([JSON.stringify(json, null, 2)], { type: \"application/json\" });\n  const objUrl = URL.createObjectURL(blob);\n  const link = document.createElement(\"a\");\n  link.href = objUrl;\n  link.download = name.endsWith(\".json\") ? name : `${name}.json`;\n  link.click();\n  URL.revokeObjectURL(objUrl);\n}\n\nexport async function importSequence(): Promise<TransitionConfiguration[] | null> {\n  const json = await uploadJSON<TransitionConfiguration[]>();\n  const sequence: TransitionConfiguration[] = [];\n  if (!json) return null;\n  if (!Array.isArray(json)) throw new InvalidImportError();\n  for (const config of json) {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidImportError();\n    const res = step.validate(config, json);\n    const actual = (res instanceof Promise) ? await res : res;\n    if (actual instanceof Error) throw actual;\n    sequence.push(actual);\n  }\n  return sequence;\n}\n\nexport function uploadJSON<t = any>(): Promise<t> {\n  return new Promise<t>((resolve, reject) => {\n    const file = document.createElement(\"input\");\n    file.setAttribute(\"type\", \"file\");\n    file.setAttribute(\"accept\", \"application/json\");\n    file.onchange = e => {\n      const file = (e.currentTarget as HTMLInputElement).files?.[0];\n      if (!file) {\n        reject(new NoFileError());\n        return;\n      }\n      const reader = new FileReader();\n      reader.onload = e => {\n        if (!e.target?.result) throw new NoFileError();\n        if (typeof e.target.result === \"string\") resolve(JSON.parse(e.target.result) as t);\n      }\n      reader.readAsText(file);\n    }\n    file.onerror = (event, source, line, col, error) => {\n      if (error) reject(error);\n      else reject(new Error(typeof event === \"string\" ? event : typeof undefined));\n    }\n\n    file.click();\n  })\n\n}\n\nexport interface ColorStop { point: number, color: string };\nexport function createGradientTexture(width: number, height: number, x1: number, y1: number, x2: number, y2: number, stops: ColorStop[]): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CanvasNotFoundError();\n  canvas.width = width;\n  canvas.height = height;\n\n  const gradient = ctx.createLinearGradient(x1, y1, x2, y2);\n  for (const stop of stops) {\n    gradient.addColorStop(stop.point, stop.color);\n  }\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  return PIXI.Texture.from(canvas);\n}\n\nexport function createConicGradientTexture(width: number, height: number, angle: number, x: number, y: number, stops: ColorStop[]): PIXI.Texture {\n  const canvas = document.createElement(\"canvas\");\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw new CanvasNotFoundError();\n  canvas.width = width;\n  canvas.height = height;\n\n  const gradient = ctx.createConicGradient(angle, x, y);\n\n  for (const stop of stops) {\n    gradient.addColorStop(stop.point, stop.color);\n  }\n\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  return PIXI.Texture.from(canvas);\n}\n\n/**\n * Returns the angle between two points, in radians\n */\nexport function angleBetween(x1: number, y1: number, x2: number, y2: number): number {\n  return Math.atan2(y2 - y1, x2 - x1);\n}\n\nexport function getTargetType(config: TargetedTransition, oldScene?: Scene, newScene?: Scene): string {\n  if (config && typeof config.target === \"string\" && config.target) {\n    const parsed = foundry.utils.parseUuid(config.target);\n    if (parsed.primaryType !== \"Scene\") throw new InvalidTargetError(config.target);\n    const age = parsed.primaryId === oldScene?.id ? \"old\" : parsed.primaryId === newScene?.id ? \"new\" : \"\";\n    if (Array.isArray(parsed.embedded)) return `${age}${parsed.embedded[0].toLowerCase()}`;\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    else return ((parsed as any).type as string ?? \"\").toLowerCase()\n  } else if (config && Array.isArray(config.target)) {\n    return \"point\";\n  } else if (config && typeof config.target === \"string\" && !config.target) {\n    return \"prompt\";\n  }\n  return \"point\";\n}\n\nexport function parseFontSize(input: string): string {\n  // It is a number with no unit of measure, assume pixels\n  if (parseInt(input).toString() == input) return `${input}px`;\n  return input;\n}\n\nexport function isValidFontSize(input: string): boolean {\n  const size = parseFontSize(input);\n  const temp = document.createElement(\"div\");\n  temp.style.fontSize = size;\n  return temp.style.fontSize !== \"\";\n}\n\n", "import { COVER_ID } from \"./constants\";\nimport { ScreenSpaceCanvasGroup } from './ScreenSpaceCanvasGroup';\nimport { CanvasNotFoundError, NotInitializedError, NoCoverElementError, InvalidSceneError, CannotInitializeCanvasError, InvalidTransitionError } from './errors';\nimport { awaitHook, getStepClassByKey } from \"./utils\";\nimport { coerceScene } from \"./coercion\";\nimport { TransitionConfiguration } from \"./steps\";\nimport { PreparedTransitionSequence } from \"./interfaces\";\n\n\n\n// Create cover HTMLElement\nconst transitionCover = document.createElement(\"div\");\ntransitionCover.style.display = \"none\";\ntransitionCover.style.position = \"absolute\";\ntransitionCover.style.width = \"100%\";\ntransitionCover.style.height = \"100%\";\ntransitionCover.style.backgroundRepeat = \"no-repeat\";\n\ntransitionCover.id = COVER_ID;\ndocument.body.appendChild(transitionCover);\n\nlet canvasGroup: ScreenSpaceCanvasGroup | null = null;\n\nexport function initializeCanvas() {\n  canvasGroup = new ScreenSpaceCanvasGroup();\n  canvas?.stage?.addChild(canvasGroup);\n}\n\nexport async function createSnapshot() {\n  if (!canvas) throw new CanvasNotFoundError();\n  if (!(canvas.app && canvas.hidden && canvas.primary && canvas.tiles && canvas.drawings && canvas.scene && canvas.stage)) throw new NotInitializedError();\n\n  // const { sceneWidth, sceneHeight } = canvas.scene.dimensions;\n  const sceneWidth = window.innerWidth;\n  const sceneHeight = window.innerHeight;\n\n  const renderer = canvas.app.renderer;\n\n  const rt = PIXI.RenderTexture.create({ width: sceneWidth, height: sceneHeight });\n  renderer.render(canvas.stage, { renderTexture: rt, skipUpdateTransform: true, clear: false });\n\n  const transitionCover = document.getElementById(COVER_ID) as HTMLImageElement | null;\n  if (!transitionCover) throw new NoCoverElementError();\n\n  transitionCover.style.backgroundImage = \"\";\n  const img = await renderer.extract.image(rt);\n\n  const tempCanvas = document.createElement(\"canvas\");\n  const ctx = tempCanvas.getContext(\"2d\");\n  if (!ctx) throw new CannotInitializeCanvasError();\n\n  tempCanvas.width = img.width;\n  tempCanvas.height = img.height;\n\n  ctx.fillStyle = renderer.background.backgroundColor.toHex();\n  ctx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);\n  ctx.drawImage(img, 0, 0);\n\n  const src = tempCanvas.toDataURL();\n\n  const renderTexture = PIXI.RenderTexture.create({ width: window.innerWidth, height: window.innerHeight });\n  const finalTexture = PIXI.Texture.from(tempCanvas);\n  const bgSprite = PIXI.Sprite.from(finalTexture);\n  renderer.render(bgSprite, { renderTexture, skipUpdateTransform: true, clear: false });\n\n  // const img = renderer.extract.canvas(rt) as HTMLCanvasElement;\n  transitionCover.style.backgroundImage = `url(${src})`;\n  transitionCover.style.backgroundColor = renderer.background.backgroundColor.toHex()\n  transitionCover.style.display = \"block\";\n\n  const sprite = new PIXI.Sprite(renderTexture);\n  return sprite;\n}\n\nexport function removeFiltersFromScene(sequence: PreparedTransitionSequence) {\n  sequence.sceneFilters.forEach(filter => removeFilterFromScene(filter));\n}\n\nexport function addFilterToScene(filter: PIXI.Filter, sequence: PreparedTransitionSequence) {\n  if (Array.isArray(canvas?.environment?.filters)) canvas.environment.filters.push(filter);\n  else if (canvas?.environment) canvas.environment.filters = [filter];\n  sequence.sceneFilters.push(filter);\n}\n\nexport function removeFilterFromScene(filter: PIXI.Filter) {\n  if (Array.isArray(canvas?.environment?.filters) && canvas.environment.filters.includes(filter)) canvas.environment?.filters?.splice(canvas.environment.filters.indexOf(filter), 1);\n  filter.destroy();\n}\n\nexport async function setupTransition(): Promise<PIXI.Container> {\n  if (!canvasGroup) throw new CannotInitializeCanvasError();\n  const snapshot = await createSnapshot();\n  const container = new PIXI.Container();\n  container.width = window.innerWidth;\n  container.height = window.innerHeight;\n  container.addChild(snapshot);\n  canvasGroup.addChild(container);\n  return container;\n}\n\nexport function cleanupTransition(container?: PIXI.DisplayObject) {\n  // Ensure our cover is hidden\n  transitionCover.style.display = \"none\";\n  transitionCover.style.backgroundImage = \"\";\n  if (container) {\n    if (Array.isArray(container.children) && container.children.length) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      const children = [...(container.children ?? [])];\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n      for (const child of children) child.destroy();\n    }\n    container.destroy();\n  }\n\n  // // Ensure no scene is set to trigger\n  // // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-return\n  // void Promise.all((game.scenes as any).contents.map((scene: any) => scene.unsetFlag(__MODULE_ID__, \"autoTriggered\")));\n}\n\nexport function hideLoadingBar() {\n  const loadingBar = document.getElementById('loading');\n  if (loadingBar) loadingBar.style.opacity = \"0\";\n}\n\nexport function showLoadingBar() {\n  const loadingBar = document.getElementById(\"loading\");\n  if (loadingBar) loadingBar.style.removeProperty(\"opacity\");\n}\n\nexport function hideTransitionCover() {\n  transitionCover.style.display = \"none\";\n  transitionCover.style.removeProperty(\"backgroundImage\");\n}\n\nexport async function activateScene(name: string): Promise<Scene>\nexport async function activateScene(id: string): Promise<Scene>\nexport async function activateScene(uuid: string): Promise<Scene>\nexport async function activateScene(scene: Scene): Promise<Scene>\nexport async function activateScene(arg: unknown): Promise<Scene> {\n  const scene = coerceScene(arg);\n  if (!(scene instanceof Scene)) throw new InvalidSceneError(typeof arg === \"string\" ? arg : \"[Object object]\");\n  // void scene.activate();\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  await (scene as any).setFlag(__MODULE_ID__, \"isTriggered\", true);\n  void scene.activate();\n  // // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  // void (scene as any).update({\n  //   active: true,\n  //   flags: {\n  //     [__MODULE_ID__]: {\n  //       autoTriggered: true\n  //     }\n  //   }\n  // });\n  await awaitHook(\"canvasReady\");\n  return scene;\n}\n\n\nexport function removeFilter(element: PIXI.DisplayObject, filter: PIXI.Filter) {\n  if (Array.isArray(element.filters)) {\n    const index = element.filters.indexOf(filter);\n    if (index !== -1) element.filters.splice(index, 1);\n  }\n}\n\nexport async function sequenceDuration(sequence: TransitionConfiguration[]): Promise<number> {\n  let duration: number = 0;\n  for (const config of sequence) {\n    const step = getStepClassByKey(config.type);\n    if (!step) throw new InvalidTransitionError(typeof config.type === \"string\" ? config.type : typeof config.type);\n    const res = step.getDuration(config, sequence);\n    duration += res instanceof Promise ? await res : res;\n  }\n  return duration;\n}\n", "'use strict';\n\nfunction get(obj, prop) {\n  var parts = prop.split('.'),\n    last = parts.pop();\n\n  while ((prop = parts.shift())) {\n    obj = obj[prop];\n\n    if (obj == null) {\n      return;\n    }\n  }\n\n  return obj[last];\n}\n\nfunction noop() {\n  return '';\n}\n\n/**\n * Registers a group helper on an instance of Handlebars.\n *\n * @type {Function}\n * @param {Object} handlebars Handlebars instance.\n * @return {Object} Handlebars instance.\n */\nfunction groupBy(handlebars) {\n  var helpers = {\n    /**\n     * @method group\n     * @param {Array} list\n     * @param {Object} options\n     * @param {Object} options.hash\n     * @param {String} options.hash.by\n     * @return {String} Rendered partial.\n     */\n    group: function (list, options) {\n      options = options || {};\n\n      var fn = options.fn || noop,\n        inverse = options.inverse || noop,\n        hash = options.hash,\n        prop = hash && hash.by,\n        keys = [],\n        groups = {};\n\n      if (!prop || !list || !list.length) {\n        return inverse(this);\n      }\n\n      function groupKey(item) {\n        var key = get(item, prop);\n\n        if (keys.indexOf(key) === -1) {\n          keys.push(key);\n        }\n\n        if (!groups[key]) {\n          groups[key] = {\n            value: key,\n            items: []\n          };\n        }\n\n        groups[key].items.push(item);\n      }\n\n      function renderGroup(buffer, key) {\n        return buffer + fn(groups[key]);\n      }\n\n      list.forEach(groupKey);\n\n      return keys.reduce(renderGroup, '');\n    }\n  };\n\n  handlebars.registerHelper(helpers);\n\n  return handlebars;\n}\n\n/**\n * Assemble-compatible register method.\n *\n * @method register\n * @param {Object} handlebars Handlebars instance.\n * @return {Object} Handlebars instance.\n * @static\n */\ngroupBy.register = groupBy;\n\n// Legacy\nexport default groupBy;", "/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\n/* eslint-disable @typescript-eslint/no-unsafe-return */\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\nimport groupBy from \"./lib/groupBy\";\nimport { formatDuration } from \"./utils\";\n\nexport function registerHelpers() {\n  Handlebars.registerHelper(\"switch\", function (this: any, value, options) {\n    this._switch_value_ = value;\n    const html = options.fn(this);\n    delete this._switch_value_;\n    return html;\n  });\n\n  Handlebars.registerHelper(\"case\", function (this: any, value, options) {\n    if (value == this._switch_value_)\n      return options.fn(this);\n  });\n\n  groupBy.register(Handlebars)\n\n  Handlebars.registerHelper(\"formatDuration\", function (this: any, value: number) {\n    if (typeof value === \"number\") return formatDuration(value);\n    else if (typeof value === \"string\" && !isNaN(parseFloat(value))) return formatDuration(parseFloat(value));\n    else return \"NaN\";\n  });\n\n  Handlebars.registerHelper(\"when\", function (this: any, operand_1: any, operator: any, operand_2: any, options) {\n    const operators = {\n      'eq': function (l: any, r: any) { return l == r; },\n      'noteq': function (l: any, r: any) { return l != r; },\n      'gt': function (l: any, r: any) { return Number(l) > Number(r); },\n      'or': function (l: any, r: any) { return l || r; },\n      'and': function (l: any, r: any) { return l && r; },\n      '%': function (l: number, r: number) { return (l % r) === 0; }\n    }\n      , result = (operators as any)[operator](operand_1, operand_2);\n\n    if (result) return options.fn(this);\n    else return options.inverse(this);\n  });\n\n\n}\n\nexport async function registerTemplates() {\n\n\n  return loadTemplates([\n    `/modules/${__MODULE_ID__}/templates/scene-config.hbs`,\n    ...[\"add-step\",\n      \"fade-config\",\n      \"linearwipe-config\",\n      \"step-item\",\n      \"background-selector\",\n      \"duration-selector\",\n      \"add-step-button\",\n      \"sequence-item\",\n      \"target-selector\",\n      \"dualtransition-selector\"\n    ].map(name => `/modules/${__MODULE_ID__}/templates/config/${name}.hbs`),\n    `/modules/${__MODULE_ID__}/templates/scene-selector.hbs`,\n    `/modules/${__MODULE_ID__}/templates/transition-steps.hbs`,\n    `/modules/${__MODULE_ID__}/templates/font-selector.hbs`,\n    `/modules/${__MODULE_ID__}/templates/actor-selector.hbs`\n  ]);\n}", "/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { initializeCanvas } from './transitionUtils';\nimport { CUSTOM_HOOKS } from \"./constants\";\nimport { registerHelpers, registerTemplates } from \"./templates\";\nimport { ConfigurationHandler } from './ConfigurationHandler';\n\nimport SocketHandler from \"./SocketHandler\";\nimport { BattleTransition } from \"./BattleTransition\";\nimport semver from \"semver\";\nimport { awaitHook, log } from './utils';\nimport { libWrapper } from \"./vendor/libwrapper.shim\";\nimport { SceneChangeStep } from './steps';\n\n(window as any).semver = semver;\n(window as any).BattleTransition = BattleTransition;\n\n\nHooks.once(\"canvasReady\", () => {\n  initializeCanvas();\n  Hooks.callAll(CUSTOM_HOOKS.INITIALIZE)\n})\n\n\nHooks.once(\"init\", async () => {\n  registerHelpers();\n  await registerTemplates();\n\n  if (typeof libWrapper === \"function\") {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-function-type\n    (libWrapper as any).register(__MODULE_ID__, \"Scene.prototype.update\", function (this: Scene, wrapped: Function, ...args: unknown[]) {\n\n      const delta = args[0] as Partial<Scene>;\n      const config = ConfigurationHandler.GetSceneConfiguration(this);\n\n      if (delta.active && config.autoTrigger && config.sequence?.length && !(this.flags[__MODULE_ID__] as any).isTriggered) {\n        delete delta.active;\n        const sceneChangeStep = new SceneChangeStep({ scene: this.id ?? \"\" });\n        void BattleTransition.executeSequence([\n          {\n            ...SceneChangeStep.DefaultSettings,\n            id: foundry.utils.randomID(),\n            ...sceneChangeStep.config\n          },\n          ...config.sequence\n        ]);\n        if (Object.keys(delta).length === 0) return false;\n      }\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n      return wrapped(delta);\n    }, \"MIXED\");\n  }\n});\n\nHooks.on(\"renderSceneConfig\", (app: SceneConfig, html: JQuery<HTMLElement>, options: any) => {\n  void ConfigurationHandler.InjectSceneConfig(app, html, options);\n});\n\nHooks.once(\"socketlib.ready\", () => {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n  SocketHandler.register(socketlib.registerModule(__MODULE_ID__));\n});\n\nHooks.on(\"getSceneNavigationContext\", (html: JQuery<HTMLElement>, buttons: any[]) => {\n  ConfigurationHandler.AddToNavigationBar(buttons);\n});\n\nHooks.on(\"preUpdatePlaylist\", (playlist: Playlist, delta: Partial<Playlist>) => {\n  if (delta.playing) {\n    // log(\"preUpdatePlaylist:\", BattleTransition.SuppressSoundUpdates, delta)\n    if (BattleTransition.SuppressSoundUpdates) {\n      return false;\n    }\n  }\n});\n\nHooks.on(\"preUpdatePlaylistSound\", (sound: PlaylistSound, delta: Partial<PlaylistSound>) => {\n  if (delta.playing) {\n    // log(\"preUpdatePlaylistSound:\", BattleTransition.SuppressSoundUpdates, delta);\n    if (BattleTransition.SuppressSoundUpdates) {\n      return false;\n    }\n\n  }\n})\n\nHooks.on(CUSTOM_HOOKS.TRANSITION_START, (...args: unknown[]) => {\n  log(\"Transition start:\", args);\n})\n\nHooks.on(CUSTOM_HOOKS.TRANSITION_END, (...args: unknown[]) => {\n  log(\"Transition end:\", args);\n})\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nHooks.on(\"updateScene\", (scene: Scene, delta: Partial<Scene>, mod: unknown, userId: string) => {\n  if (delta.active) {\n    if (scene.canUserModify(game.user as User, \"update\")) void scene.unsetFlag(__MODULE_ID__, \"isTriggered\");\n\n    awaitHook(\"canvasReady\").then(() => { Hooks.callAll(CUSTOM_HOOKS.SCENE_ACTIVATED, scene); }).catch(console.error);\n  }\n});", "// SPDX-License-Identifier: MIT\n// Copyright \u00A9 2021 fvtt-lib-wrapper Rui Pinheiro\n\n\"use strict\";\n\n// A shim for the libWrapper library\nexport let libWrapper = undefined;\n\nexport const VERSIONS = [1, 13, 0];\nexport const TGT_SPLIT_RE = new RegExp(\n  \"([^.[]+|\\\\[('([^'\\\\\\\\]|\\\\\\\\.)+?'|\\\"([^\\\"\\\\\\\\]|\\\\\\\\.)+?\\\")\\\\])\",\n  \"g\"\n);\nexport const TGT_CLEANUP_RE = new RegExp(\"(^\\\\['|'\\\\]$|^\\\\[\\\"|\\\"\\\\]$)\", \"g\");\n\n// Main shim code\nHooks.once(\"init\", () => {\n  // Check if the real module is already loaded - if so, use it\n  if (globalThis.libWrapper && !(globalThis.libWrapper.is_fallback ?? true)) {\n    libWrapper = globalThis.libWrapper;\n    return;\n  }\n\n  // Fallback implementation\n  libWrapper = class {\n    static get is_fallback() {\n      return true;\n    }\n\n    static get WRAPPER() {\n      return \"WRAPPER\";\n    }\n    static get MIXED() {\n      return \"MIXED\";\n    }\n    static get OVERRIDE() {\n      return \"OVERRIDE\";\n    }\n    static get LISTENER() {\n      return \"LISTENER\";\n    }\n\n    static register(\n      package_id,\n      target,\n      fn,\n      type = \"MIXED\",\n      { chain = undefined, bind = [] } = {}\n    ) {\n      const is_setter = target.endsWith(\"#set\");\n      target = !is_setter ? target : target.slice(0, -4);\n      const split = target\n        .match(TGT_SPLIT_RE)\n        .map((x) => x.replace(/\\\\(.)/g, \"$1\").replace(TGT_CLEANUP_RE, \"\"));\n      const root_nm = split.splice(0, 1)[0];\n\n      let obj, fn_name;\n      if (split.length == 0) {\n        obj = globalThis;\n        fn_name = root_nm;\n      } else {\n        const _eval = eval;\n        fn_name = split.pop();\n        obj = split.reduce(\n          (x, y) => x[y],\n          globalThis[root_nm] ?? _eval(root_nm)\n        );\n      }\n\n      let iObj = obj;\n      let descriptor = null;\n      while (iObj) {\n        descriptor = Object.getOwnPropertyDescriptor(iObj, fn_name);\n        if (descriptor) break;\n        iObj = Object.getPrototypeOf(iObj);\n      }\n      if (!descriptor || descriptor?.configurable === false)\n        throw new Error(\n          `libWrapper Shim: '${target}' does not exist, could not be found, or has a non-configurable descriptor.`\n        );\n\n      let original = null;\n      const is_override =\n        type == 3 || type.toUpperCase?.() == \"OVERRIDE\" || type == 3;\n      const is_listener =\n        type == 4 || type.toUpperCase?.() == \"LISTENER\" || type == 4;\n      const wrapper = is_listener\n        ? function (...args) {\n            fn.call(this, ...bind, ...args);\n            return original.call(this, ...args);\n          }\n        : chain ?? !is_override\n        ? function (...args) {\n            return fn.call(this, original.bind(this), ...bind, ...args);\n          }\n        : function (...args) {\n            return fn.call(this, ...bind, ...args);\n          };\n\n      if (!is_setter) {\n        if (descriptor.value) {\n          original = descriptor.value;\n          descriptor.value = wrapper;\n        } else {\n          original = descriptor.get;\n          descriptor.get = wrapper;\n        }\n      } else {\n        if (!descriptor.set)\n          throw new Error(\n            `libWrapper Shim: '${target}' does not have a setter`\n          );\n        original = descriptor.set;\n        descriptor.set = wrapper;\n      }\n\n      descriptor.configurable = true;\n      Object.defineProperty(obj, fn_name, descriptor);\n    }\n  };\n\n  //************** USER CUSTOMIZABLE:\n  // Set up the ready hook that shows the \"libWrapper not installed\" warning dialog. Remove if undesired.\n  {\n    //************** USER CUSTOMIZABLE:\n    // Package ID & Package Title - by default attempts to auto-detect, but you might want to hardcode your package ID and title here to avoid potential auto-detect issues\n    const [PACKAGE_ID, PACKAGE_TITLE] = (() => {\n      const match = (import.meta?.url ?? Error().stack)?.match(\n        /\\/(worlds|systems|modules)\\/(.+)(?=\\/)/i\n      );\n      if (match?.length !== 3) return [null, null];\n      const dirs = match[2].split(\"/\");\n      if (match[1] === \"worlds\")\n        return dirs.find((n) => n && game.world.id === n)\n          ? [game.world.id, game.world.title]\n          : [null, null];\n      if (match[1] === \"systems\")\n        return dirs.find((n) => n && game.system.id === n)\n          ? [game.system.id, game.system.title ?? game.system.data.title]\n          : [null, null];\n      const id = dirs.find((n) => n && game.modules.has(n));\n      const mdl = game.modules.get(id);\n      return [id, mdl?.title ?? mdl?.data?.title];\n    })();\n\n    if (!PACKAGE_ID || !PACKAGE_TITLE) {\n      console.error(\n        \"libWrapper Shim: Could not auto-detect package ID and/or title. The libWrapper fallback warning dialog will be disabled.\"\n      );\n      return;\n    }\n\n    Hooks.once(\"ready\", () => {\n      //************** USER CUSTOMIZABLE:\n      // Title and message for the dialog shown when the real libWrapper is not installed.\n      const FALLBACK_MESSAGE_TITLE = PACKAGE_TITLE;\n      const FALLBACK_MESSAGE = `\n\t\t\t\t<p><b>'${PACKAGE_TITLE}' depends on the 'libWrapper' module, which is not present.</b></p>\n\t\t\t\t<p>A fallback implementation will be used, which increases the chance of compatibility issues with other modules.</p>\n\t\t\t\t<small><p>'libWrapper' is a library which provides package developers with a simple way to modify core Foundry VTT code, while reducing the likelihood of conflict with other packages.</p>\n\t\t\t\t<p>You can install it from the \"Add-on Modules\" tab in the <a href=\"javascript:game.shutDown()\">Foundry VTT Setup</a>, from the <a href=\"https://foundryvtt.com/packages/lib-wrapper\">Foundry VTT package repository</a>, or from <a href=\"https://github.com/ruipin/fvtt-lib-wrapper/\">libWrapper's Github page</a>.</p></small>\n\t\t\t`;\n\n      // Settings key used for the \"Don't remind me again\" setting\n      const DONT_REMIND_AGAIN_KEY = \"libwrapper-dont-remind-again\";\n\n      // Dialog code\n      console.warn(\n        `${PACKAGE_TITLE}: libWrapper not present, using fallback implementation.`\n      );\n      game.settings.register(PACKAGE_ID, DONT_REMIND_AGAIN_KEY, {\n        name: \"\",\n        default: false,\n        type: Boolean,\n        scope: \"world\",\n        config: false,\n      });\n      if (\n        game.user.isGM &&\n        !game.settings.get(PACKAGE_ID, DONT_REMIND_AGAIN_KEY)\n      ) {\n        new Dialog({\n          title: FALLBACK_MESSAGE_TITLE,\n          content: FALLBACK_MESSAGE,\n          buttons: {\n            ok: { icon: '<i class=\"fas fa-check\"></i>', label: \"Understood\" },\n            dont_remind: {\n              icon: '<i class=\"fas fa-times\"></i>',\n              label: \"Don't remind me again\",\n              callback: () =>\n                game.settings.set(PACKAGE_ID, DONT_REMIND_AGAIN_KEY, true),\n            },\n          },\n        }).render(true);\n      }\n    });\n  }\n});\n"],
  "mappings": "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",
  "names": ["require_valid", "outside", "outside", "outside", "require_semver", "outside", "default_default", "default_default", "version", "generateTexture", "canvas", "generateTexture", "topLeftOutside", "topLeftInside", "topRightInside", "topRightOutside", "generateTexture", "canvas", "canvas", "left", "right", "top", "bottom", "element", "filters", "filters", "dialog", "addEventListeners", "config", "addEventListeners", "config", "dialog", "addEventListeners", "checkFormValidity", "setBackgroundType", "scene", "addEventListeners", "confirm", "scene", "dialog", "addEventListeners", "addStep", "uploadHandler", "clearButtonhandler", "setClearDisabled", "updateTotalDuration", "upsertStepButton", "addStepEventListeners", "confirm", "semver", "V10X", "V10X", "V10X", "v10XMigration", "v10Migration", "V10X", "v10X", "v10X", "v10X", "v10X", "addEventListeners", "addStep", "uploadHandler", "clearButtonhandler", "setClearDisabled", "upsertStepButton", "addStepEventListeners", "confirm", "updateTotalDuration", "upsertStepButton", "addEventListeners", "addStep", "uploadHandler", "clearButtonhandler", "setClearDisabled", "addStepEventListeners", "confirm", "updateTotalDuration", "step", "backgroundType", "addStep", "upsertStepButton", "addStepEventListeners", "confirm", "filters", "getTargetType", "CURRENT_VERSION", "addStep", "clearButtonhandler", "setClearDisabled", "buildTransition", "upsertStepButton", "addStepEventListeners", "confirm", "updateTotalDuration", "sequence", "filters", "filters", "getTargetType", "filters", "canvas", "canvas", "file", "e", "canvas", "getTargetType", "transitionCover", "import_semver", "semver"]
}
